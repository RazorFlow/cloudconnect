/**
 * almond 0.2.6 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/**
 * @license
 * Lo-Dash 2.2.1 (Custom Build) lodash.com/license | Underscore.js 1.5.2 underscorejs.org/LICENSE
 * Build: `lodash modern -o ./dist/lodash.js`
 */

/**
 * Copyright (c) 2011-2013 Felix Gnass
 * Licensed under the MIT license
 */

/* Zepto v1.1.3-5-g579c097 - zepto event ajax form ie detect - zeptojs.com/license */

(function(e,t){typeof define=="function"&&define.amd?define([],t):e.Bar=t()})(this,function(){var requirejs,require,define;(function(e){function c(e,t){return f.call(e,t)}function h(e,t){var n,r,i,s,o,a,f,l,c,h,p=t&&t.split("/"),d=u.map,v=d&&d["*"]||{};if(e&&e.charAt(0)===".")if(t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(l=0;l<e.length;l+=1){h=e[l];if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===1&&(e[2]===".."||e[0]===".."))break;l>0&&(e.splice(l-1,2),l-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((p||v)&&d){n=e.split("/");for(l=n.length;l>0;l-=1){r=n.slice(0,l).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=l;break}}}if(s)break;!a&&v&&v[r]&&(a=v[r],f=l)}!s&&a&&(s=a,o=f),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function p(t,r){return function(){return n.apply(e,l.call(arguments,0).concat([t,r]))}}function d(e){return function(t){return h(t,e)}}function v(e){return function(t){s[e]=t}}function m(n){if(c(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!c(s,n)&&!c(a,n))throw new Error("No "+n);return s[n]}function g(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function y(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice;r=function(e,t){var n,r=g(e),i=r[0];return e=r[1],i&&(i=h(i,t),n=m(i)),i?n&&n.normalize?e=n.normalize(e,d(t)):e=h(e,t):(e=h(e,t),r=g(e),i=r[0],e=r[1],i&&(n=m(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return p(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:y(e)}}},t=function(t,n,u,f){var l,h,d,g,y,b=[],w;f=f||t;if(typeof u=="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(y=0;y<n.length;y+=1){g=r(n[y],f),h=g.f;if(h==="require")b[y]=i.require(t);else if(h==="exports")b[y]=i.exports(t),w=!0;else if(h==="module")l=b[y]=i.module(t);else if(c(s,h)||c(o,h)||c(a,h))b[y]=m(h);else{if(!g.p)throw new Error(t+" missing "+h);g.p.load(g.n,p(f,!0),v(h),{}),b[y]=s[h]}}d=u.apply(s[t],b);if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(d!==e||!w)s[t]=d}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){return typeof s=="string"?i[s]?i[s](o):m(r(s,o).f):(s.splice||(u=s,o.splice?(s=o,o=a,a=null):s=e),o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},4),n)},n.config=function(e){return u=e,u.deps&&n(u.deps,u.callback),n},requirejs._defined=s,define=function(e,t,n){t.splice||(n=t,t=[]),!c(s,e)&&!c(o,e)&&(o[e]=[e,t,n])},define.amd={jQuery:!0}})(),define("buildutils/almond",function(){}),define("core/rfclass",[],function(){function t(){var t=this,n=[],r={};t.pro={bind:function(e,t){r.hasOwnProperty(e)||(r[e]=[]),r[e].push(t)},unbindAll:function(){r={}},trigger:function(e,t){if(r.hasOwnProperty(e)){var n=r[e].length;for(var i=0;i<n;i++)r[e][i](t)}},aspect:{items:[],provide:function(e){_.indexOf(t.pro.aspect.items,e)===-1&&t.pro.aspect.items.push(e)},require:function(e){var n=[];for(var r in e)e.hasOwnProperty(r)&&_.indexOf(t.pro.aspect.items,r)===-1&&n.push(e[r]);return n}},handleWarning:function(e){console.warn("Got an error: ",e)}},t._rawId="",t._raw={className:"RFClass",_registerPublic:function(e,r){n.push(r);var i=function(e){return function(){return console.warn("Note: Trying to call base '"+e+"' which doesn't exist"),null}};for(var s in r)r.hasOwnProperty(s)&&(t.hasOwnProperty(s)?e[s]=t[s]:e[s]=i(s),t[s]=r[s])},_registerClassName:function(n){e.hasOwnProperty(n)?e[n]++:e[n]=0,t._raw.className=n,t._rawId=n+"_"+e[n]},_dispose:function(){for(var e=0;e<n.length;e++){for(var t in n[e])n[e].hasOwnProperty(t)&&typeof n[e][t]=="object"&&(n[e][t]=null);n[e]=null}n=null},_registerProtected:function(e,n){e=e?e:{};for(var r in n)n.hasOwnProperty(r)&&(t.pro.hasOwnProperty(r)&&(e[r]=t.pro[r]),t.pro[r]=n[r])},registerPublicExtensions:function(e){var n=e.call(t,t.pro);t._raw._registerPublic({},n)},registerProtectedExtensions:function(e){var n=e.call(t,t.pro);t._raw._registerProtected({},n)}}}var e={};return t}),define("utils/positionutils",[],function(){var e={unitsToPixels:function(e,t){return e/12*t},unitsToPc:function(e){return e*100/12},unitsToPcString:function(t){return e.unitsToPc(t)+"%"}};return e}),define("utils/layoutmanager",[],function(){return layoutManager=function(e){var t=this,n=e||{},r=[],i=n.maxX||12;maxY=0,PAGE_SIZE=12,minY=0;var s=function(){r=[]},o=function(e){for(var t=0;t<e;t++){var n=[];for(var s=0;s<i;s++)n.push(0);r.push(n)}maxY+=e},u=function(e,t,n,i){for(var s=e;s<e+i;s++)for(var o=t;o<t+n;o++)r[s][o]=1};o(PAGE_SIZE),t.findEmptySpot=function(e,n){if(!e&&!n)throw"Dimensions is not provided. Cannot find empty spot.";for(var i=minY;i<maxY;i++){var s=r[i].join(""),a="";for(var f=0;f<e;f++)a+="0";result=s.indexOf(a);if(result>=0){var l=!0;for(var c=i+1,h=1;c<maxY&&h<n;c++,h++){var p=r[c].slice(result,result+e).join("");if(p!==a){l=!1;break}}return l&&h===n?(minY=i,u(i,result,e,n),{row:i,col:result}):(o(PAGE_SIZE),t.findEmptySpot(e,n))}}return o(PAGE_SIZE),t.findEmptySpot(e,n)},t.clearLayout=function(){s()}},layoutManager}),define("helpers/mediahelper",[],function(){var e=function(){var e=this,t="md",n=2,r=function(e){switch(e){case"xs":return 0;case"sm":return 1;case"md":return 2;case"lg":return 3}},i=function(e){switch(e){case 0:return"xs";case 1:return"sm";case 2:return"md";case 3:return"lg"}},s=function(e){if(e.hasOwnProperty(t))return e[t];var r;for(r=n;r>=0;r--)if(e.hasOwnProperty(i(r)))return e[i(r)];for(r=n;r<=4;r++)if(e.hasOwnProperty(i(r)))return e[i(r)]};e.setMedia=function(e){t=e,n=r(e),window.rf.globals.media=e},e.getCurrentMedia=function(){return t},e.mediaSelect=function(e){return s(e)},e.mediaExec=function(e,t){var n=s(e);n(t)},e.smeq=function(e){return n<=r(e)}};return e}),define("constants/componentconstants",[],function(){var e={options:{lines:12,length:6,width:4,radius:12,corners:1,rotate:0,direction:1,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"}},t={resizeDelay:100,dimension:{w:4,h:4}},n={xPadding:10,yPadding:10},r={chart:{drawAxesFlag:!0,paddingLeft:10,paddingTop:15,paddingBottom:25,paddingRight:10,xAxisItemPadding:.2,seriesInterColumnPadding:.15,prettifyDomain:!0,stickLineChartToSides:!1,drawYAxisNameFlag:!0,yAxisNameWidth:20,showGridLineFlag:!0,wrapLabelsFlag:!0,circleRadius:4,dualStageAnimate:!1,yAxisLabelSize:16},spark:{drawAxesFlag:!1,paddingLeft:0,paddingTop:0,paddingBottom:0,paddingRight:0,xAxisItemPadding:0,seriesInterColumnPadding:.1,prettifyDomain:!0,stickLineChartToSides:!0,drawYAxisNameFlag:!1,yAxisNameWidth:0,showGridLineFlag:!0,wrapLabelsFlag:!1,circleRadius:3,dualStageAnimate:!0}},i={animationDuration:1e3},s={startAngle:-1.7*Math.PI/2,endAngle:1.7*Math.PI/2,fontSize:40,arcWidth:.1,xPadding:.1,animationDuration:1e3},o={innerRadiusDistance:50,profile:{labelHeight:18},animationDuration:1e3,padding:20},u={opacity:.9,tooltipOffsetX:40,tooltipOffsetY:40,tooltipHeight:20,tooltipBackground:"#fff",tooltipPaddingX:20},a={LINE_HEIGHT:14,FONT_SIZE:12,THETA:45,MAX_HEIGHT_PERCENT:.25,PADDING:5};return{spinner:e,component:n,dashboard:t,chart_profiles:r,chart:i,pieChart:o,gauge:s,tooltip:u,wrapGenius:a}}),define("data/query",[],function(){function e(){var e=this,t=null,n=[],r={sort:{column:null,order:null}};e.setDataSource=function(e){t=e},e.run=function(t){t(e.runSync())},e.subscribe=function(e){n.push(e)},e.limit=function(t,n){return r.limit={skip:t,take:n},e},e.runAndSubscribe=function(t){e.subscribe(t),e.run(t)},e.triggerUpdates=function(){var t=e.runSync();for(var r=0;r<n.length;r++)n[r](t)},e.runSync=function(){var e=t.getRawData(),n=function(){typeof r.limit=="object"&&(e=e.slice(r.limit.skip,r.limit.skip+r.limit.take))},i=function(){typeof r.sort=="object"&&(sortColumnKey=r.sort.column,e=_.sortBy(e,function(e){return _.isNaN(+e[sortColumnKey])?e[sortColumnKey]:+e[sortColumnKey]}),r.sort.order==="DESC"&&e.reverse())};return i(),n(),e},e.sort=function(t,n){return n=n?n:r.sort.order==="DESC"?"AESC":"DESC",r.sort={column:t,order:n},e}}return e}),define("data/datasource",["data/query"],function(e){function t(){var t=this,n=[],r=[],i=!1;t.pushRow=function(e){n.push(e),s()},t.createQuery=function(){var n=new e;return n.setDataSource(t),r.push(n),n},t.getRawData=function(){return n},t.setRawData=function(e){n=e},t.clearRows=function(){n=[],s()};var s=function(){if(i)return;for(var e=0;e<r.length;e++)r[e].triggerUpdates()};t.addColumn=function(e,t){var r,i=n.length;for(r=0;r<t.length;r++)r>=i&&(n[r]={}),n[r][e]=t[r];s()},t.startApplyPatches=function(){i=!0},t.endApplyPatches=function(){i=!1,s()},t.applyPatch=function(e){var n=e.action,r=e.index,i=e.params,s=!1;switch(n){case"setColumn":t.setColumn(r,i),s=!0;break;case"pushRow":t.pushRow(i),s=!0;break;case"addColumn":t.addColumn(r,i),s=!0;break;default:}},t.applyPatches=function(e){t.startApplyPatches();for(var n=0;n<e.length;n++)t.applyPatch(e[n]);t.endApplyPatches()}}return t}),define("utils/media",[],function(){return{fastMediaSelect:function(e,t){if(typeof t=="undefined")return t;if(t===null)return t;switch(e){case"xs":if(t.hasOwnProperty("xs"))return t.xs;if(t.hasOwnProperty("sm"))return t.sm;if(t.hasOwnProperty("md"))return t.md;if(t.hasOwnProperty("lg"))return t.lg;return t;case"sm":if(t.hasOwnProperty("sm"))return t.sm;if(t.hasOwnProperty("xs"))return t.xs;if(t.hasOwnProperty("md"))return t.md;if(t.hasOwnProperty("lg"))return t.lg;return t;case"md":if(t.hasOwnProperty("md"))return t.md;if(t.hasOwnProperty("lg"))return t.lg;if(t.hasOwnProperty("sm"))return t.sm;if(t.hasOwnProperty("xs"))return t.xs;return t;case"lg":if(t.hasOwnProperty("lg"))return t.lg;if(t.hasOwnProperty("md"))return t.md;if(t.hasOwnProperty("sm"))return t.sm;if(t.hasOwnProperty("xs"))return t.xs;return t}return t},isMediaObject:function(e){if(e===null||typeof e=="undefined")return!1;if(e.hasOwnProperty("xs")||e.hasOwnProperty("sm")||e.hasOwnProperty("md")||e.hasOwnProperty("lg")){for(var t in e)if(e.hasOwnProperty(t)){if(t==="xs"||t==="sm"||t==="md"||t==="lg")continue;return!1}return!0}return!1},getCurrentMedia:function(){return window.rf.globals.media}}}),define("utils/modalutils",[],function(){var e=function(e){var t=this,n=e||{},r=n.title||"",i=n.core||$("body"),s=$(window.JST.rfmodal({title:r})),o,u,a,f,l,c,h,p,d=0,v,m;t.body=s.find(".rfModalBody"),t.header=s.find(".rfModalHeader"),t.footer=s.find(".rfModalFooter");var g=function(){o=$(window).width(),u=$(window).height();if(!n.fullscreen)a=n.width||o*.6,f=n.height||u*.6;else{var e=_.min([o,u]);a=e,f=e}l=(o-a)/2,c=(u-f)/2},y=function(){g(),h=["drop-down","pull-up","peek-left","peek-right"],p=[{left:n.fullscreen?0:l,top:-(n.fullscreen?u:f),width:n.fullscreen?o:a,height:n.fullscreen?u:f},{left:n.fullscreen?0:l,top:n.fullscreen?u:f,width:n.fullscreen?o:a,height:n.fullscreen?u:f},{left:-(n.fullscreen?o:a),top:n.fullscreen?0:c,width:n.fullscreen?o:a,height:n.fullscreen?u:f},{left:n.fullscreen?o:a,top:n.fullscreen?0:c,width:n.fullscreen?o:a,height:n.fullscreen?u:f}],i.append(s),s.show(),v=s.find(".rfModalWindow"),s.find(".cover").on("click",function(){t.close()}),$("body").bind("keydown.modal",function(e){e.which===27&&t.close()}),m=s.find(".rfModalBody");if(n.animate){var e=p[_.indexOf(h,n.animate)];if(typeof e=="undefined"){console.error("no such animation function [ "+n.animate+" ]"),s.remove();return}v.css(e),v.animate({left:n.fullscreen?o/2-a/2:l,top:n.fullscreen?u/2-f/2:c,width:a,height:f},500)}else v.css({left:l,top:c,width:a,height:f});n.html&&t.body.html(n.html);if(n.buttons)for(var r=0;r<n.buttons.length;r++)(function(e){var r=n.buttons[e],i=r.caption||"button",s=r.cls||"",o=$("<button/>").text(i).addClass(s);t.footer.append(o);if(r.events){var u=_.keys(r.events);for(var a=0;a<u.length;a++){var f=u[a];o.on(f,r.events[f])}}})(r);m.width(a),m.height(f-s.find(".rfModalHeader").height()-s.find(".rfModalFooter").height())},b=function(){g(),v.css({left:l,top:c,width:a,height:f}),v.hide(),m.width(a),m.height(f-s.find(".rfModalHeader").height()-s.find(".rfModalFooter").height()),v.show()};y(),n.shown&&n.shown(m),s.find(".closeButton").on("click",function(){s.hide(),s.remove(),$(window).off("resize.modal"),n.hidden&&n.hidden()}),t.close=function(){s.hide(),s.remove(),$("body").unbind("keydown.modal"),$(window).off("resize.modal"),n.hidden&&n.hidden()};var w=_.debounce(function(){b()},150);$(window).on("resize.modal",function(){var e=$(window).height(),t=$(window).width();n.animate="",(e!==u||t!==o)&&w()})};return e}),define("utils/componentutils",[],function(){var e={idGen:function(){var e="rfc";for(var t=-1;++t<6;)e+=Math.floor(Math.random()*10);return e}};return e}),define("utils/assert",[],function(){var e={isType:function(e,t,n,r,i){var s=!1;switch(t){case"string":s=_.isString(e);break;case"array":s=_.isArray(e);break;case"number":s=_.isNumber(e)&&!_.isNaN(e);break;case"object":s=_.isObject(e)}s||typeof i.pro!="undefined"&&typeof i.pro.handleError!="undefined"&&i.pro.handleError("Expected parameter '"+n+"' to be '"+t+"'. Got '"+typeof e+"' instead.",r)},isString:function(t,n,r,i){e.isType(t,"string",n,r,i)},isArray:function(t,n,r,i){e.isType(t,"array",n,r,i)},isNumber:function(t,n,r,i){e.isType(t,"number",n,r,i)}};return e}),define("components/component",["core/rfclass","data/datasource","utils/media","utils/modalutils","utils/componentutils","utils/assert"],function(e,t,n,r,i,s){function o(s){e.call(this);var o=this,u={},a,f=o._raw,l,c={},h=o.pro,p=s||i.idGen();a={setLocation:function(e,t,n,r){if(typeof e!="number"&&typeof e=="object"&&typeof t=="undefined"){h.pb.setObjectAtPath("core.location",e);return}h.pb.setObjectAtPath("core.location",{lg:{x:e||0,y:t||0,w:n||0,h:r||0}})},setDimensions:function(e,t){o.setLocation(0,0,e,t)},setCaption:function(e){h.pb.setValue("core.caption",e)},lock:function(){h.lockedFlag=!0,h.showLoadingScreen()},unlock:function(){if(h.lockedFlag!==!0){h.lockedFlag=!1,h.handleWarning("Unlock called before locking");return}h.lockedFlag=!1,h.hideLoadingScreen(),h.needsRedrawFlag===!0&&h.redraw()},isLocked:function(){return h.lockedFlag},reset:function(){},setID:function(e){p=e},getID:function(){return p},removeFromDashboard:function(){h.db.removeComponent(o)}},l={pb:null,ds:null,db:null,$container:null,$core:null,renderer:null,props:{},propListeners:[],lockedFlag:!1,needsRedrawFlag:!1,maximized:!1,error:{state:!1,message:[]},rawComponentFlag:!1,errMsg:[],overriddenDimensions:{sm:{w:12,h:7},xs:{w:12,h:7}},init:function(){h.pb.linkToComponent(o),h.addListeners(),h.rawComponentFlag||h.validate()},showLoadingScreen:function(){h.renderer&&h.renderer.showLoadingScreen()},hideLoadingScreen:function(){h.renderer&&h.renderer.hideLoadingScreen()},setTargetContainer:function(e){h.$container=e},applyPatches:function(e){var t=e.props,n=e.data;for(var r=0;r<t.length;r++)h.pb.applyPatch(t[r]);o.ds.applyPatches(n)},applyChange:function(e,t,n,r,i){if(h.lockedFlag){h.needsRedrawFlag=!0;return}var s=!0;for(var o=0;o<h.propListeners.length;o++){var u=h.propListeners[o];u.path===t&&(s=!1,u.callback(n,r))}s&&h.redraw()},redraw:function(){h.rawComponentFlag||h.validate(),h.$container.empty(),h.render(),h.resize()},addListeners:function(){},pushListeners:function(e){for(var t=0;t<e.length;t++)h.propListeners.push(e[t])},render:function(){h.renderer!==null&&h.renderer.dispose(),h.createRenderer(),h.renderer.init({shell:o,props:h.pb.getRootObject(),container:h.$container,locked:h.lockedFlag,handleMaximize:d,maximizeFlag:h.maximized}),h.$core=h.renderer.renderContainer();if(h.lockedFlag){h.needsRedrawFlag=!0;return}h.error.state===!0?h.renderer.showErrorMessage(h.error.message):(h.renderer.hideErrorMessage(),h.renderCore())},validate:function(){},handleError:function(e,t){if(t==="warn"){h.handleWarning(e);return}var n=h.error.message;n.push(e),h.showError(n)},showError:function(e){h.error.state=!0,h.error.message=e},hideError:function(){h.error.state=!1,h.error.message=[]},resize:function(e,t){h.renderer.resizeContainer();var n=h.$core.width(),r=h.$core.height();if(h.lockedFlag||h.error.state)return;h.resizeCore(n,r)},convertToObject:function(){return h.preSerialize&&h.preSerialize(),{props:h.pb.getRootObject(),data:o.ds.getRawData(),type:f.className}},buildFromObject:function(e){h.pb.setRootObject(e.props),o.ds.setRawData(e.data),h.rawComponentFlag=!0},_maximize:function(e){var t=n.getCurrentMedia();if(h.lockedFlag)return;oldContainer=h.$container,h.maximized=!0;var i=new r({core:$(".rfDashboardModals"),title:h.pb.getValue("core.caption"),fullscreen:t==="sm"||t==="xs",shown:function(e){h.$container=e,h.redraw()},hidden:function(){h.$container=oldContainer,h.maximized=!1,oldContainer=null,h.redraw()}})},handleComponentEvent:function(e,t){var n=h.pb.getObjectAtPath("events"),r=0;for(r=0;r<n.length;r++){var i=n[r],s=_.map(_.pluck(i.affectedComponents,"id"),h.db.pro.getComponentByID);_.each(s,function(e){e.lock()});var o={components:{}};for(r=0;r<s.length;r++){var u=s[r];o.components[u.getID()]=u.pro.convertToObject()}$.ajax({type:"POST",url:i.url,data:{postback:JSON.stringify(o),params:JSON.stringify(t)},success:function(e){if(e.patches)for(var t in e.patches)if(e.patches.hasOwnProperty(t)){var n=h.db.pro.getComponentByID(t);n.pro.applyPatches(e.patches[t])}_.each(s,function(e){e.unlock()})}})}},linkToDashboard:function(e){h.db=e},bind:function(e,t){}};var d=function(){o.pro._maximize(this)},v=function(){o.ds=new t};f._registerClassName("Component"),f._registerPublic(u,a),f._registerProtected(c,l),v()}return o}),define("renderers/componentrenderer",["core/rfclass","constants/componentconstants"],function(e,t){function i(){e.call(this);var i=this,s={},o,u=i._raw,a,f=i.pro,l={},c=t,h={},p=[],d=[];o={props:null,$container:null,$core:null,$caption:null,$wrapper:null,$lockDisplay:null,locked:!1,init:function(e){i.props=e.props,i.$container=e.container,i.locked=e.locked,i.handleMaximize=e.handleMaximize,i.maximizeFlag=e.maximizeFlag},renderContainer:function(){return u.className==="KPIRenderer"?(i.$container.html(window.JST.component_chromeless({captionText:i.props.core.caption})),i.$caption=i.$container.find(".rfChromelessTop")):(i.$container.html(window.JST.component_wrapper({captionText:i.props.core.caption})),i.$caption=i.$container.find(".rfCaption")),i.$wrapper=i.$container.find(".rfWrapper"),i.maximizeFlag?i.$core=i.$container:i.$core=i.$container.find(".rfCore"),i.$lockDisplay=i.$container.find(".rfLock"),i.$caption.find(".rfMaximizeButton").click(i.handleMaximize),i.$errorMessage=i.$container.find(".rfError"),i.locked?i.showLoadingScreen():i.hideLoadingScreen(),i.$core},resizeContainer:function(){i.adjustHeights()},adjustHeights:function(){var e=i.$core,t=i.$container.height()-r;i.locked?e=i.$lockDisplay:i.error&&(e=i.$errorMessage),i.$wrapper.width(i.$container.width()-n),i.$wrapper.height(t),i.$wrapper.css({"margin-left":n/2,"margin-top":r/2}),e.height(t-i.$caption.height())},dispose:function(){var e;i.pro.unbindAll();for(e=0;e<p.length;e++)p[e].unbind();p=[];for(e=0;e<d.length;e++)d[e].remove();d=[]},managedBind:function(e,t,n){e.bind(t,n),p.push(e)},managedCreate:function(e,t){var n=$(e,t);return d.push(n),n},showLoadingScreen:function(){i.$core.hide(),i.$lockDisplay.show();var e=c.spinner.options,t="Loading, please wait...",n=(new Spinner(e)).spin();i.$lockDisplay.find(".rfLoadingText").text(t),i.$lockDisplay.find(".rfSpinner").append(n.el),i.$lockDisplay.addClass("loading")},hideLoadingScreen:function(){i.$lockDisplay.hide(),i.$lockDisplay.removeClass("loading"),i.$core.show()},showErrorMessage:function(e){i.$core.hide(),i.$errorMessage.show();var t=i.$errorMessage.find(".rfErrorMessageText");t.html("<ul>");for(var n=0;n<e.length;n++)t.append("<li>"+e[n]+"</li>");t.append("</ul>")},hideErrorMessage:function(){i.$errorMessage.hide(),i.$core.show()},getDimensionProperties:function(){var e=i.props.core.location,t=e.w>e.h?!1:!0;return{w:e.w,h:e.h,portrait:t}}},a={},u._registerClassName("ComponentRenderer"),u._registerPublic(s,o),u._registerProtected(l,a)}var n=t.component.xPadding,r=t.component.yPadding;return i}),define("utils/internallayoutmanager",["utils/positionutils"],function(e){var t=function(t,n){var r=this,i=null,s=null,o=null;r.manageElement=function(e){i=e,s=i.width(),o=i.height();for(var r=-1;++r<t.length;){var l=t[r],c=$("<div/>"),h=n[l.className],p=a(l),d=p.elLeft,v=p.elTop,m=p.elWidth,g=p.elHeight,y=p.lines,b=p.fontScale,w=g*b/y,E=g*.7,S=null;_.extend(p,{fontSize:w}),S=u(p),h&&f(h,p,S),c.addClass(l.className),c.css(S),c.attr("data-lines",y),c.attr("data-fontScale",b),i.append(c)}},r.handleResize=function(e,r){s=e,o=r;for(var l=-1;++l<t.length;){var c=t[l],h=i.find("."+c.className),p=n[c.className],d=a(c),v=d.elHeight,m=d.fontScale,g=d.lines,y=v*m/g,b=v*.7;cssObj=null,_.extend(d,{fontSize:y}),cssObj=u(d),f(p,d,cssObj),h.css(cssObj)}},r.setValues=function(){for(var e in n)n.hasOwnProperty(e)&&i.find("."+e).text(n[e])};var u=function(e){return{position:"absolute",top:e.elTop,left:e.elLeft,width:e.elWidth,height:e.elHeight,textAlign:"center",fontSize:e.fontSize,lineHeight:e.elHeight/e.lines+"px",verticalAlign:"middle",overflow:"hidden"}},a=function(t){var n=e.unitsToPixels(t.w,s),r=e.unitsToPixels(t.h,o),i=t.fontScale||.7,u=t.lines||1;return{elLeft:e.unitsToPixels(t.x,s),elTop:e.unitsToPixels(t.y,o),elWidth:n,elHeight:r,lines:u,fontScale:i,maxFontSize:r*i/u,minFontSize:r*.7}},f=function(e,t,n){var r=$("<span/>").text(e).css({fontSize:t.maxFontSize,"white-space":"nowrap"}),s=null;i.append(r),t.lines>1?r.width()<t.elWidth&&(s=t.elWidth/r.width(),s=s>1.2?1.2:s,t.fontScale=s,n.fontSize=Math.floor(t.elHeight*s/t.lines*.8),r.css("font-size",n.fontSize),r.width()<t.elWidth?n.lineHeight=Math.floor(n.fontSize*2.4)+"px":n.lineHeight=Math.floor(n.fontSize*1.1)+"px"):r.width()>t.elWidth?(s=t.elWidth/r.width(),s=s<.5?.5:s,n.fontSize=Math.floor(t.maxFontSize*s),n.lineHeight=t.elHeight+"px"):(s=t.elWidth/r.width(),s=s>1.2?1.2:s,n.fontSize=Math.floor(t.maxFontSize*s),n.lineHeight=t.elHeight+"px"),r.remove()}};return t}),define("constants/kpilayoutconstants",[],function(){var e={portrait:[{x:1,y:2,w:10,h:3,lines:2,fontScale:.7,className:"rfKPICaption",aspectAdjust:!0},{x:1,y:5,w:10,h:5,fontScale:.7,className:"rfKPIValue",aspectAdjust:!0,verticalAlign:"center"}],landscape:[{x:1,y:2,w:10,h:3,lines:2,className:"rfKPICaption",aspectAdjust:!0},{x:1,y:5,w:10,h:5,fontScale:.7,className:"rfKPIValue",aspectAdjust:!0,verticalAlign:"center"}],mobile:[{x:4.5,y:3.5,w:7.5,h:6,lines:2,className:"rfKPICaption"},{x:.5,y:3.5,w:4,h:6,fontScale:.7,className:"rfKPIValue"}]},t={portrait:[{x:1,y:1,w:10,h:3,lines:2,className:"rfKPICaption"},{x:2,y:4,w:8,h:5,className:"rfKPIGauge"},{x:2,y:9,w:8,h:3,className:"rfKPIValue"}],landscape:[{x:2,y:1,w:8,h:3,lines:2,className:"rfKPICaption"},{x:2,y:4,w:8,h:5,className:"rfKPIGauge"},{x:2,y:9,w:8,h:4,className:"rfKPIValue"}],mobile:[{x:.5,y:1,w:4,h:10,className:"rfKPIGauge"},{x:5,y:2,w:6.5,h:4,lines:2,className:"rfKPICaption"},{x:5,y:6,w:6.5,h:6,className:"rfKPIValue"}]},n={portrait:[{x:1,y:1,w:10,h:3,lines:2,className:"rfKPICaption"},{x:2,y:4,w:8,h:4,fontScale:.7,verticalAlign:"center",aspectAdjust:!0,className:"rfKPIValue"},{x:0,y:8.5,w:12,h:3.5,className:"rfKPISpark"}],landscape:[{x:1,y:1,w:10,h:3,lines:2,className:"rfKPICaption"},{x:2,y:4,w:8,h:5,className:"rfKPIValue"},{x:0,y:9,w:12,h:3,className:"rfKPISpark"}],mobile:[{x:6.5,y:2,w:5,h:4,lines:2,className:"rfKPICaption"},{x:.5,y:3.5,w:4,h:6,className:"rfKPIValue"},{x:6.5,y:6,w:5,h:6,className:"rfKPISpark"}]};return{basicKPI:e,basicGauge:t,kpiWithSpark:n}}),define("graphics/rftooltip",["constants/componentconstants"],function(e){var t=e.tooltip,n=function(e){var n=this,r=e||{},i=r.core||$("body"),s,o=!1;n.setCore=function(e){i=e},n.show=function(){s?s.attr("style","opacity: "+t.opacity):(o=!0,s=i.append("g").attr("class","tooltip").attr("style","opacity: "+t.opacity),s.append("rect").attr("class","tooltip-background").attr("rx",5).attr("ry",5),s.append("text").attr("class","tooltip-value"),s.select("text.tooltip-value").append("tspan").attr("class","label"),s.select("text.tooltip-value").append("tspan").attr("class","value"))},n.update=function(e,n,r,i,o){if(s){var u=i+t.tooltipOffsetX,a=o+t.tooltipOffsetY,f=0,l=t.tooltipHeight,c=t.tooltipBackground,h=r,p=null,d=null,v=null;s.select("text.tooltip-value").attr("x",u).attr("y",a),s.select("tspan.label").text(n).attr("style","font-weight: bold;").attr("text-anchor","middle"),s.select("text.tooltip-value .value").text(e).attr("style","font-weight: bold;").attr("fill",r).attr("text-anchor","middle"),v=s.select("text.tooltip-value")[0][0].getBBox().width+t.tooltipPaddingX,f=f<v?v:f,p=u-f/2,d=a-l/2-10,s.select("rect.tooltip-background").attr("x",p).attr("y",d).attr("width",f).attr("height",l+10).attr("fill",c).attr("stroke-width",2).attr("stroke","#222")}},n.position=function(e,n){var r=e+t.tooltipOffsetX,i=n+t.tooltipOffsetY,o=0,u=t.tooltipHeight,a=null,f=null;newWidth=s.select("text.tooltip-value")[0][0].getBBox().width+t.tooltipPaddingX,o=o<newWidth?newWidth:o,a=r-o/2,f=i-u/2-10,s.select("rect.tooltip-background").attr("x",a).attr("y",f).attr("width",o).attr("height",u+10)},n.hide=function(){s&&(o=!1,s.attr("style","opacity: 0"))},n.isVisible=function(){return o},n.isHidden=function(){return!o}};return n}),define("utils/graphicutils",[],function(){var e={prettyDomain:function(e,t){function i(e){return Math.log(e)/Math.LN10}function b(e,t,n){for(g=0;g<n.length;g++)if(t<n[g]){c=n[g];if(n[g]-t<=.2){var r=n[g+1];n[g+1]||(r=n[0]*10),c=r}return e=c*a,e}}var n=!1,r=!1;e=typeof e=="undefined"?0:e,t=typeof t=="undefined"?100:t;var s=e,o=t,u=Math.floor(i(o)),a=Math.pow(10,u),f=[1.25,1.5,2,2.5,3,4,5,6,8,10],l=o/a,c=0,h=[],p=[],d=null,v=null,m=[],g=0,y=0;e<0?-e>t?(u=Math.floor(i(-e)),a=Math.pow(10,u),l=-e/a,s=-o,o=b(-e,l,f),r=!0,n=!0):(s=e,o=b(o,l,f),n=!0):o=b(o,l,f);for(g=3;g<=6;g++){d=c/g*a/10;var w=10;d<.1?(d*=1e3,w=.01):d<1?(d*=100,w=.1):d<=2.5&&(d*=10,w=1),c>10&&(d*=10,w=1,a===10&&(w=.1)),d%5===0?p.push({unit:d*w,num:g}):d%2===0&&h.push({unit:d*w,num:g})}p.length?v=_.min(p,function(e){return e.unit}):v=_.min(h,function(e){return e.unit});if(n)if(r){for(g=v.num;g>=0;g--)m.push(g*v.unit*-1);y=0;while(y<=-s)y+=v.unit,m.push(y)}else{y=0;while(y<=-s)y+=v.unit,m.push(y*-1);m=m.reverse();for(g=0;g<v.num+1;g++)m.push(g*v.unit)}else for(g=0;g<v.num+1;g++)m.push(g*v.unit);return{min:m[0],max:m[m.length-1],numTicks:m.length,unit:v.unit,ticks:m}}};return e}),define("utils/numberformatter",[],function(){var e=function(){var e=this,t,n="",r="",i=null,s=null,o=null,u=null,a=null;e.setConfig=function(e){t=e,t.numberFormatFlag===!0&&t.dataType==="number"&&(typeof t.numberPrefix=="string"&&(n=t.numberPrefix),typeof t.numberSuffix=="string"&&(r=t.numberSuffix),typeof t.numberHumanize=="boolean"&&(i=t.numberHumanize),typeof t.numberThousandsSeparator=="string"&&!i&&(s=t.numberThousandsSeparator),typeof t.numberDecimalsSeparator=="string"&&(o=t.numberDecimalsSeparator),typeof t.numberForceDecimals=="boolean"&&(u=t.numberForceDecimals),typeof t.numberDecimalPoints=="number"&&(a=t.numberDecimalPoints))},e.formatValue=function(e){var t="";e=e.toString(),e=s?c(e,s,o):e,e=i?l(e):e;for(var f=0;f<a;f++)t+="0";return e=e.indexOf(o)===-1&&u?e+o+t:e,n+e+r},e.formatArray=function(t){var n=[],r=t.length;for(var i=0;i<r;i++)n.push(e.formatValue(t[i]));return n},e.formatColumn=function(t,n){var r=t.length;for(var i=0;i<r;i++)t[i][n]=e.formatValue(t[i][n]);return t};var f=function(e){var t=e.split(".")[0],n=e.split(".")[1],r=+n?o+n.split("").slice(0,a).join(""):"";return t+r},l=function(e){var t="",n="",r=e<0;e=Math.abs(+e).toString();if(e==="NaN"){console.error("value is not a number");return}return e.length<4?e:(e.length<7?(n=(+e/1e3).toString(),t=f(n)+"K"):e.length<10?(n=(+e/1e6).toString(),t=f(n)+"M"):(n=(+e/1e9).toString(),t=f(n)+"B"),r?"-"+t:t)},c=function(e,t,n){var r="",i=e<0,s=Math.abs(+e).toString().split(".")[0].split("").reverse().join(""),o=Math.abs(+e).toString().split(".")[1];if(s==="NaN"){console.error("value is not a number");return}if(e.length<4)return e;while(s.length>=4){var u=s.split("");r+=u.splice(0,3).join("")+t,s=u.join("")}return r+=s,r=r.split("").reverse().join("")+(o?n+o.split("").slice(0,a).join(""):""),i?"-"+r:r}};return e}),define("utils/browserutils",[],function(){var e={getBrowser:function(){var e=new UAParser,t=e.getEngine();return t},isIE:function(){var t=e.getBrowser();return t.name==="Trident"}};return e}),!function(){function e(e){return null!=e&&!isNaN(e)}function t(e){return e.length}function n(e){for(var t=1;e*t%1;)t*=10;return t}function r(e,t){try{for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}catch(r){e.prototype=t}}function i(){}function s(e){return mn+e in this}function o(e){return e=mn+e,e in this&&delete this[e]}function u(){var e=[];return this.forEach(function(t){e.push(t)}),e}function a(){var e=0;for(var t in this)t.charCodeAt(0)===gn&&++e;return e}function f(){for(var e in this)if(e.charCodeAt(0)===gn)return!1;return!0}function l(){}function c(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function h(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.substring(1);for(var n=0,r=yn.length;r>n;++n){var i=yn[n]+t;if(i in e)return i}}function p(){}function d(){}function v(e){function t(){for(var t,r=n,i=-1,s=r.length;++i<s;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new i;return t.on=function(t,i){var s,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,s=n.indexOf(o)).concat(n.slice(s+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function m(){en.event.preventDefault()}function g(){for(var e,t=en.event;e=t.sourceEvent;)t=e;return t}function y(e){for(var t=new d,n=0,r=arguments.length;++n<r;)t[arguments[n]]=v(t);return t.of=function(n,r){return function(i){try{var s=i.sourceEvent=en.event;i.target=e,en.event=i,t[i.type].apply(n,r)}finally{en.event=s}}},t}function b(e){return wn(e,Nn),e}function w(e){return"function"==typeof e?e:function(){return En(e,this)}}function E(e){return"function"==typeof e?e:function(){return Sn(e,this)}}function S(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function s(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function u(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=en.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?u:o:e.local?s:i}function x(e){return e.trim().replace(/\s+/g," ")}function T(e){return new RegExp("(?:^|\\s+)"+en.requote(e)+"(?:\\s+|$)","g")}function N(e){return e.trim().split(/^|\s+/)}function C(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=N(e).map(k);var i=e.length;return"function"==typeof t?r:n}function k(e){var t=T(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",x(i+" "+e))):n.setAttribute("class",x(i.replace(t," ")))}}function L(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?s:i}function A(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function O(e){return"function"==typeof e?e:(e=en.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,e)}}function M(e){return{__data__:e}}function _(e){return function(){return Tn(this,e)}}function D(e){return arguments.length||(e=en.ascending),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function P(e,t){for(var n=0,r=e.length;r>n;n++)for(var i,s=e[n],o=0,u=s.length;u>o;o++)(i=s[o])&&t(i,o,n);return e}function H(e){return wn(e,kn),e}function B(e){var t,n;return function(r,i,s){var o,u=e[s].update,a=u.length;for(s!=n&&(n=s,t=0),i>=t&&(t=i+1);!(o=u[t])&&++t<a;);return o}}function j(){var e=this.__transition__;e&&++e.active}function F(e,t,n){function r(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function i(){var i=a(t,nn(arguments));r.call(this),this.addEventListener(e,this[o]=i,i.$=n),i._=t}function s(){var t,n=new RegExp("^__on([^.]+)"+en.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+e,u=e.indexOf("."),a=I;u>0&&(e=e.substring(0,u));var f=An.get(e);return f&&(e=f,a=q),u?t?i:r:t?p:s}function I(e,t){return function(n){var r=en.event;en.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{en.event=r}}}function q(e,t){var n=I(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function R(){var e=".dragsuppress-"+ ++Mn,t="click"+e,n=en.select(on).on("touchmove"+e,m).on("dragstart"+e,m).on("selectstart"+e,m);if(On){var r=sn.style,i=r[On];r[On]="none"}return function(s){function o(){n.on(t,null)}n.on(e,null),On&&(r[On]=i),s&&(n.on(t,function(){m(),o()},!0),setTimeout(o,0))}}function U(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>_n&&(on.scrollX||on.scrollY)){n=en.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=n[0][0].getScreenCTM();_n=!i.f&&!i.e,n.remove()}return _n?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}function z(e){return((e=Math.exp(e))-1/e)/2}function W(e){return((e=Math.exp(e))+1/e)/2}function X(e){return((e=Math.exp(2*e))-1)/(e+1)}function V(e){return"function"==typeof e?e:function(){return e}}function $(){var e=J(),t=K()-e;t>24?(isFinite(t)&&(clearTimeout($n),$n=setTimeout($,t)),Vn=0):(Vn=1,Kn($))}function J(){var e=Date.now();for(Jn=Wn;Jn;)e>=Jn.t&&(Jn.f=Jn.c(e-Jn.t)),Jn=Jn.n;return e}function K(){for(var e,t=Wn,n=1/0;t;)t.f?t=e?e.n=t.n:Wn=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return Xn=e,n}function Q(e){return e}function G(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Y(e,t){var n=Math.pow(10,3*vn(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Z(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,s=r?function(e){for(var t=e.length,i=[],s=0,o=r[0];t>0&&o>0;)i.push(e.substring(t-=o,t+o)),o=r[s=(s+1)%r.length];return i.reverse().join(n)}:Q;return function(e){var n=Gn.exec(e),r=n[1]||" ",o=n[2]||">",u=n[3]||"",a=n[4]||"",f=n[5],l=+n[6],c=n[7],h=n[8],p=n[9],d=1,v="",m="",g=!1;switch(h&&(h=+h.substring(1)),(f||"0"===r&&"="===o)&&(f=r="0",o="=",c&&(l-=Math.floor((l-1)/4))),p){case"n":c=!0,p="g";break;case"%":d=100,m="%",p="f";break;case"p":d=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===a&&(v="0"+p.toLowerCase());case"c":case"d":g=!0,h=0;break;case"s":d=-1,p="r"}"$"===a&&(v=i[0],m=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):("e"==p||"f"==p)&&(h=Math.max(0,Math.min(20,h)))),p=Yn.get(p)||et;var y=f&&c;return function(e){var n=m;if(g&&e%1)return"";var i=0>e||0===e&&0>1/e?(e=-e,"-"):u;if(0>d){var a=en.formatPrefix(e,h);e=a.scale(e),n=a.symbol+m}else e*=d;e=p(e,h);var b=e.lastIndexOf("."),w=0>b?e:e.substring(0,b),E=0>b?"":t+e.substring(b+1);!f&&c&&(w=s(w));var S=v.length+w.length+E.length+(y?0:i.length),x=l>S?(new Array(S=l-S+1)).join(r):"";return y&&(w=s(x+w)),i+=v,e=w+E,("<"===o?i+e+x:">"===o?x+i+e:"^"===o?x.substring(0,S>>=1)+i+e+x.substring(S):i+(y?e:x+e))+n}}}function et(e){return e+""}function tt(){}function nt(e,t){e=en.rgb(e),t=en.rgb(t);var n=e.r,r=e.g,i=e.b,s=t.r-n,o=t.g-r,u=t.b-i;return function(e){return"#"+d3_rgb_hex(Math.round(n+s*e))+d3_rgb_hex(Math.round(r+o*e))+d3_rgb_hex(Math.round(i+u*e))}}function rt(e,t){var n,r={},i={};for(n in e)n in t?r[n]=ut(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function it(e,t){var n,r=[],i=[],s=e.length,o=t.length,u=Math.min(e.length,t.length);for(n=0;u>n;++n)r.push(ut(e[n],t[n]));for(;s>n;++n)i[n]=e[n];for(;o>n;++n)i[n]=t[n];return function(e){for(n=0;u>n;++n)i[n]=r[n](e);return i}}function st(e,t){return t-=e=+e,function(n){return e+t*n}}function ot(e,t){var n,r,i,s,o,u=0,a=0,f=[],l=[];for(e+="",t+="",tr.lastIndex=0,r=0;n=tr.exec(t);++r)n.index&&f.push(t.substring(u,a=n.index)),l.push({i:f.length,x:n[0]}),f.push(null),u=tr.lastIndex;for(u<t.length&&f.push(t.substring(u)),r=0,s=l.length;(n=tr.exec(e))&&s>r;++r)if(o=l[r],o.x==n[0]){if(o.i)if(null==f[o.i+1])for(f[o.i-1]+=o.x,f.splice(o.i,1),i=r+1;s>i;++i)l[i].i--;else for(f[o.i-1]+=o.x+f[o.i+1],f.splice(o.i,2),i=r+1;s>i;++i)l[i].i-=2;else if(null==f[o.i+1])f[o.i]=o.x;else for(f[o.i]=o.x+f[o.i+1],f.splice(o.i+1,1),i=r+1;s>i;++i)l[i].i--;l.splice(r,1),s--,r--}else o.x=st(parseFloat(n[0]),parseFloat(o.x));for(;s>r;)o=l.pop(),null==f[o.i+1]?f[o.i]=o.x:(f[o.i]=o.x+f[o.i+1],f.splice(o.i+1,1)),s--;return 1===f.length?null==f[0]?(o=l[0].x,function(e){return o(e)+""}):function(){return t}:function(e){for(r=0;s>r;++r)f[(o=l[r]).i]=o.x(e);return f.join("")}}function ut(e,t){for(var n,r=en.interpolators.length;--r>=0&&!(n=en.interpolators[r](e,t)););return n}function at(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function ft(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function lt(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function ct(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function ht(e,t){var n,r=0,i=e.length-1,s=e[r],o=e[i];return s>o&&(n=r,r=i,i=n,n=s,s=o,o=n),e[r]=t.floor(s),e[i]=t.ceil(o),e}function pt(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:nr}function dt(e,t,n,r){var i=[],s=[],o=0,u=Math.min(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=u;)i.push(n(e[o-1],e[o])),s.push(r(t[o-1],t[o]));return function(t){var n=en.bisect(e,t,1,u)-1;return s[n](i[n](t))}}function vt(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function mt(e){return e.rangeExtent?e.rangeExtent():vt(e.range())}function gt(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?dt:ct,a=r?lt:ft;return o=i(e,t,a,n),u=i(t,e,a,ut),s}function s(e){return o(e)}var o,u;return s.invert=function(e){return u(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},s.range=function(e){return arguments.length?(t=e,i()):t},s.rangeRound=function(e){return s.range(e).interpolate(at)},s.clamp=function(e){return arguments.length?(r=e,i()):r},s.interpolate=function(e){return arguments.length?(n=e,i()):n},s.ticks=function(t){return wt(e,t)},s.tickFormat=function(t,n){return Et(e,t,n)},s.nice=function(t){return yt(e,t),i()},s.copy=function(){return gt(e,t,n,r)},i()}function yt(e,t){return ht(e,pt(bt(e,t)[2]))}function bt(e,t){null==t&&(t=10);var n=vt(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return.15>=s?i*=10:.35>=s?i*=5:.75>=s&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function wt(e,t){return en.range.apply(en,bt(e,t))}function Et(e,t,n){var r=bt(e,t);return en.format(n?n.replace(Gn,function(e,t,n,i,s,o,u,a,f,l){return[t,n,i,s,o,u,a,f||"."+xt(l,r),l].join("")}):",."+St(r[2])+"f")}function St(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function xt(e,t){var n=St(t[2]);return e in rr?Math.abs(n-St(Math.max(Math.abs(t[0]),Math.abs(t[1]))))+ +("e"!==e):n-2*("%"===e)}function Tt(e,t){function n(n){return o[((s.get(n)||"range"===t.t&&s.set(n,e.push(n)))-1)%o.length]}function r(t,n){return en.range(e.length).map(function(e){return t+n*e})}var s,o,u;return n.domain=function(r){if(!arguments.length)return e;e=[],s=new i;for(var o,u=-1,a=r.length;++u<a;)s.has(o=r[u])||s.set(o,e.push(o));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(o=e,u=0,t={t:"range",a:arguments},n):o},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var a=i[0],f=i[1],l=(f-a)/(Math.max(1,e.length-1)+s);return o=r(e.length<2?(a+f)/2:a+l*s/2,l),u=0,t={t:"rangePoints",a:arguments},n},n.rangeBands=function(i,s,a){arguments.length<2&&(s=0),arguments.length<3&&(a=s);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=(c-l)/(e.length-s+2*a);return o=r(l+h*a,h),f&&o.reverse(),u=h*(1-s),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,a){arguments.length<2&&(s=0),arguments.length<3&&(a=s);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=Math.floor((c-l)/(e.length-s+2*a)),p=c-l-(e.length-s)*h;return o=r(l+Math.round(p/2),h),f&&o.reverse(),u=Math.round(h*(1-s)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return u},n.rangeExtent=function(){return vt(t.a[0])},n.copy=function(){return Tt(e,t)},n.domain(e)}function Nt(e){return e.innerRadius}function Ct(e){return e.outerRadius}function kt(e){return e.startAngle}function Lt(e){return e.endAngle}function At(){return!0}function Ot(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function Mt(e){return function(t){return 1-e(1-t)}}function _t(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function Dt(e){return e*e}function Pt(e){return e*e*e}function Ht(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Bt(e){return function(t){return Math.pow(t,e)}}function jt(e){return 1-Math.cos(e*Hn)}function Ft(e){return Math.pow(2,10*(e-1))}function It(e){return 1-Math.sqrt(1-e*e)}function qt(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Pn*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Pn/t)}}function Rt(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Ut(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function zt(e,t){return wn(e,cr),e.id=t,e}function Wt(e){var t=[e.a,e.b],n=[e.c,e.d],r=Vt(t),i=Xt(t,n),s=Vt($t(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*jn,this.translate=[e.e,e.f],this.scale=[r,s],this.skew=s?Math.atan2(i,s)*jn:0}function Xt(e,t){return e[0]*t[0]+e[1]*t[1]}function Vt(e){var t=Math.sqrt(Xt(e,e));return t&&(e[0]/=t,e[1]/=t),t}function $t(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function Jt(e,t){var n,r=[],i=[],s=en.transform(e),o=en.transform(t),u=s.translate,a=o.translate,f=s.rotate,l=o.rotate,c=s.skew,h=o.skew,p=s.scale,d=o.scale;return u[0]!=a[0]||u[1]!=a[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:st(u[0],a[0])},{i:3,x:st(u[1],a[1])})):a[0]||a[1]?r.push("translate("+a+")"):r.push(""),f!=l?(f-l>180?l+=360:l-f>180&&(f+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:st(f,l)})):l&&r.push(r.pop()+"rotate("+l+")"),c!=h?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:st(c,h)}):h&&r.push(r.pop()+"skewX("+h+")"),p[0]!=d[0]||p[1]!=d[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:st(p[0],d[0])},{i:n-2,x:st(p[1],d[1])})):(1!=d[0]||1!=d[1])&&r.push(r.pop()+"scale("+d+")"),n=i.length,function(e){for(var t,s=-1;++s<n;)r[(t=i[s]).i]=t.x(e);return r.join("")}}function Kt(e,t,n,r){var i=e.id;return P(e,"function"==typeof n?function(e,s,o){e.__transition__[i].tween.set(t,r(n.call(e,e.__data__,s,o)))}:(n=r(n),function(e){e.__transition__[i].tween.set(t,n)}))}function Qt(e){return null==e&&(e=""),function(){this.textContent=e}}function Gt(e,t,n,r){var s=e.__transition__||(e.__transition__={active:0,count:0}),o=s[n];if(!o){var u=r.time;o=s[n]={tween:new i,time:u,ease:r.ease,delay:r.delay,duration:r.duration},++s.count,en.timer(function(r){function i(r){return s.active>n?f():(s.active=n,o.event&&o.event.start.call(e,l,t),o.tween.forEach(function(n,r){(r=r.call(e,l,t))&&v.push(r)}),en.timer(function(){return d.c=a(r||1)?At:a,1},0,u),void 0)}function a(r){if(s.active!==n)return f();for(var i=r/p,u=c(i),a=v.length;a>0;)v[--a].call(e,u);return i>=1?(o.event&&o.event.end.call(e,l,t),f()):void 0}function f(){return--s.count?delete s[n]:delete e.__transition__,1}var l=e.__data__,c=o.ease,h=o.delay,p=o.duration,d=Jn,v=[];return d.t=h+u,r>=h?i(r-h):(d.c=i,void 0)},0,u)}}function Yt(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function Zt(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}var en={version:"3.4.3"};Date.now||(Date.now=function(){return+(new Date)});var tn=[].slice,nn=function(e){return tn.call(e)},rn=document,sn=rn.documentElement,on=window;try{nn(sn.childNodes)[0].nodeType}catch(un){nn=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}try{rn.createElement("div").style.setProperty("opacity",0,"")}catch(an){var fn=on.Element.prototype,ln=fn.setAttribute,cn=fn.setAttributeNS,hn=on.CSSStyleDeclaration.prototype,pn=hn.setProperty;fn.setAttribute=function(e,t){ln.call(this,e,t+"")},fn.setAttributeNS=function(e,t,n){cn.call(this,e,t,n+"")},hn.setProperty=function(e,t,n){pn.call(this,e,t+"",n)}}en.ascending=function(e,t){return t>e?-1:e>t?1:e>=t?0:0/0},en.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},en.min=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s&&!(null!=(n=e[i])&&n>=n);)n=void 0;for(;++i<s;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<s&&!(null!=(n=t.call(e,e[i],i))&&n>=n);)n=void 0;for(;++i<s;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},en.max=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s&&!(null!=(n=e[i])&&n>=n);)n=void 0;for(;++i<s;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<s&&!(null!=(n=t.call(e,e[i],i))&&n>=n);)n=void 0;for(;++i<s;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},en.extent=function(e,t){var n,r,i,s=-1,o=e.length;if(1===arguments.length){for(;++s<o&&!(null!=(n=i=e[s])&&n>=n);)n=i=void 0;for(;++s<o;)null!=(r=e[s])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++s<o&&!(null!=(n=i=t.call(e,e[s],s))&&n>=n);)n=void 0;for(;++s<o;)null!=(r=t.call(e,e[s],s))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},en.sum=function(e,t){var n,r=0,i=e.length,s=-1;if(1===arguments.length)for(;++s<i;)isNaN(n=+e[s])||(r+=n);else for(;++s<i;)isNaN(n=+t.call(e,e[s],s))||(r+=n);return r},en.mean=function(t,n){var r,i=t.length,s=0,o=-1,u=0;if(1===arguments.length)for(;++o<i;)e(r=t[o])&&(s+=(r-s)/++u);else for(;++o<i;)e(r=n.call(t,t[o],o))&&(s+=(r-s)/++u);return u?s:void 0},en.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],s=n-r;return s?i+s*(e[r]-i):i},en.median=function(t,n){return arguments.length>1&&(t=t.map(n)),t=t.filter(e),t.length?en.quantile(t.sort(en.ascending),.5):void 0},en.bisector=function(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var s=r+i>>>1;e.call(t,t[s],s)<n?r=s+1:i=s}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var s=r+i>>>1;n<e.call(t,t[s],s)?i=s:r=s+1}return r}}};var dn=en.bisector(function(e){return e});en.bisectLeft=dn.left,en.bisect=en.bisectRight=dn.right,en.shuffle=function(e){for(var t,n,r=e.length;r;)n=0|Math.random()*r--,t=e[r],e[r]=e[n],e[n]=t;return e},en.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},en.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],s=new Array(0>r?0:r);r>n;)s[n]=[t=i,i=e[++n]];return s},en.zip=function(){if(!(i=arguments.length))return[];for(var e=-1,n=en.min(arguments,t),r=new Array(n);++e<n;)for(var i,s=-1,o=r[e]=new Array(i);++s<i;)o[s]=arguments[s][e];return r},en.transpose=function(e){return en.zip.apply(en,e)},en.keys=function(e){var t=[];for(var n in e)t.push(n);return t},en.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},en.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},en.merge=function(e){for(var t,n,r,i=e.length,s=-1,o=0;++s<i;)o+=e[s].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n};var vn=Math.abs;en.range=function(e,t,r){if(arguments.length<3&&(r=1,arguments.length<2&&(t=e,e=0)),1/0===(t-e)/r)throw new Error("infinite range");var i,s=[],o=n(vn(r)),u=-1;if(e*=o,t*=o,r*=o,0>r)for(;(i=e+r*++u)>t;)s.push(i/o);else for(;(i=e+r*++u)<t;)s.push(i/o);return s},en.map=function(e){var t=new i;if(e instanceof i)e.forEach(function(e,n){t.set(e,n)});else for(var n in e)t.set(n,e[n]);return t},r(i,{has:s,get:function(e){return this[mn+e]},set:function(e,t){return this[mn+e]=t},remove:o,keys:u,values:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e},entries:function(){var e=[];return this.forEach(function(t,n){e.push({key:t,value:n})}),e},size:a,empty:f,forEach:function(e){for(var t in this)t.charCodeAt(0)===gn&&e.call(this,t.substring(1),this[t])}});var mn="\0",gn=mn.charCodeAt(0);en.nest=function(){function e(t,u,a){if(a>=o.length)return r?r.call(s,u):n?u.sort(n):u;for(var f,l,c,h,p=-1,d=u.length,v=o[a++],m=new i;++p<d;)(h=m.get(f=v(l=u[p])))?h.push(l):m.set(f,[l]);return t?(l=t(),c=function(n,r){l.set(n,e(t,r,a))}):(l={},c=function(n,r){l[n]=e(t,r,a)}),m.forEach(c),l}function t(e,n){if(n>=o.length)return e;var r=[],i=u[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,s={},o=[],u=[];return s.map=function(t,n){return e(n,t,0)},s.entries=function(n){return t(e(en.map,n,0),0)},s.key=function(e){return o.push(e),s},s.sortKeys=function(e){return u[o.length-1]=e,s},s.sortValues=function(e){return n=e,s},s.rollup=function(e){return r=e,s},s},en.set=function(e){var t=new l;if(e)for(var n=0,r=e.length;r>n;++n)t.add(e[n]);return t},r(l,{has:s,add:function(e){return this[mn+e]=!0,e},remove:function(e){return e=mn+e,e in this&&delete this[e]},values:u,size:a,empty:f,forEach:function(e){for(var t in this)t.charCodeAt(0)===gn&&e.call(this,t.substring(1))}}),en.behavior={},en.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=c(e,t,t[n]);return e};var yn=["webkit","ms","moz","Moz","o","O"];en.dispatch=function(){for(var e=new d,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=v(e);return e},d.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.substring(n+1),e=e.substring(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},en.event=null,en.requote=function(e){return e.replace(bn,"\\$&")};var bn=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,wn={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},En=function(e,t){return t.querySelector(e)},Sn=function(e,t){return t.querySelectorAll(e)},xn=sn[h(sn,"matchesSelector")],Tn=function(e,t){return xn.call(e,t)};"function"==typeof Sizzle&&(En=function(e,t){return Sizzle(e,t)[0]||null},Sn=function(e,t){return Sizzle.uniqueSort(Sizzle(e,t))},Tn=Sizzle.matchesSelector),en.selection=function(){return Ln};var Nn=en.selection.prototype=[];Nn.select=function(e){var t,n,r,i,s=[];e=w(e);for(var o=-1,u=this.length;++o<u;){s.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var a=-1,f=r.length;++a<f;)(i=r[a])?(t.push(n=e.call(i,i.__data__,a,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return b(s)},Nn.selectAll=function(e){var t,n,r=[];e=E(e);for(var i=-1,s=this.length;++i<s;)for(var o=this[i],u=-1,a=o.length;++u<a;)(n=o[u])&&(r.push(t=nn(e.call(n,n.__data__,u,i))),t.parentNode=n);return b(r)};var Cn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};en.ns={prefix:Cn,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.substring(0,t),e=e.substring(t+1)),Cn.hasOwnProperty(n)?{space:Cn[n],local:e}:e}},Nn.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=en.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(S(t,e[t]));return this}return this.each(S(e,t))},Nn.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=N(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!T(e[i]).test(t))return!1;return!0}for(t in e)this.each(C(t,e[t]));return this}return this.each(C(e,t))},Nn.style=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t="");for(n in e)this.each(L(n,e[n],t));return this}if(2>r)return on.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(L(e,t,n))},Nn.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(A(t,e[t]));return this}return this.each(A(e,t))},Nn.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},Nn.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},Nn.append=function(e){return e=O(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},Nn.insert=function(e,t){return e=O(e),t=w(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},Nn.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},Nn.data=function(e,t){function n(e,n){var r,s,o,u=e.length,c=n.length,h=Math.min(u,c),p=new Array(c),d=new Array(c),v=new Array(u);if(t){var m,g=new i,y=new i,b=[];for(r=-1;++r<u;)m=t.call(s=e[r],s.__data__,r),g.has(m)?v[r]=s:g.set(m,s),b.push(m);for(r=-1;++r<c;)m=t.call(n,o=n[r],r),(s=g.get(m))?(p[r]=s,s.__data__=o):y.has(m)||(d[r]=M(o)),y.set(m,o),g.remove(m);for(r=-1;++r<u;)g.has(b[r])&&(v[r]=e[r])}else{for(r=-1;++r<h;)s=e[r],o=n[r],s?(s.__data__=o,p[r]=s):d[r]=M(o);for(;c>r;++r)d[r]=M(n[r]);for(;u>r;++r)v[r]=e[r]}d.update=p,d.parentNode=p.parentNode=v.parentNode=e.parentNode,a.push(d),f.push(p),l.push(v)}var r,s,o=-1,u=this.length;if(!arguments.length){for(e=new Array(u=(r=this[0]).length);++o<u;)(s=r[o])&&(e[o]=s.__data__);return e}var a=H([]),f=b([]),l=b([]);if("function"==typeof e)for(;++o<u;)n(r=this[o],e.call(r,r.parentNode.__data__,o));else for(;++o<u;)n(r=this[o],e);return f.enter=function(){return a},f.exit=function(){return l},f},Nn.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Nn.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=_(e));for(var s=0,o=this.length;o>s;s++){i.push(t=[]),t.parentNode=(n=this[s]).parentNode;for(var u=0,a=n.length;a>u;u++)(r=n[u])&&e.call(r,r.__data__,u,s)&&t.push(r)}return b(i)},Nn.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,s=r[i];--i>=0;)(n=r[i])&&(s&&s!==n.nextSibling&&s.parentNode.insertBefore(n,s),s=n);return this},Nn.sort=function(e){e=D.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Nn.each=function(e){return P(this,function(t,n,r){e.call(t,t.__data__,n,r)})},Nn.call=function(e){var t=nn(arguments);return e.apply(t[0]=this,t),this},Nn.empty=function(){return!this.node()},Nn.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,i=n.length;i>r;r++){var s=n[r];if(s)return s}return null},Nn.size=function(){var e=0;return this.each(function(){++e}),e};var kn=[];en.selection.enter=H,en.selection.enter.prototype=kn,kn.append=Nn.append,kn.empty=Nn.empty,kn.node=Nn.node,kn.call=Nn.call,kn.size=Nn.size,kn.select=function(e){for(var t,n,r,i,s,o=[],u=-1,a=this.length;++u<a;){r=(i=this[u]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var f=-1,l=i.length;++f<l;)(s=i[f])?(t.push(r[f]=n=e.call(i.parentNode,s.__data__,f,u)),n.__data__=s.__data__):t.push(null)}return b(o)},kn.insert=function(e,t){return arguments.length<2&&(t=B(this)),Nn.insert.call(this,e,t)},Nn.transition=function(){for(var e,t,n=fr||++hr,r=[],i=lr||{time:Date.now(),ease:Ht,delay:0,duration:250},s=-1,o=this.length;++s<o;){r.push(e=[]);for(var u=this[s],a=-1,f=u.length;++a<f;)(t=u[a])&&Gt(t,a,n,i),e.push(t)}return zt(r,n)},Nn.interrupt=function(){return this.each(j)},en.select=function(e){var t=["string"==typeof e?En(e,rn):e];return t.parentNode=sn,b([t])},en.selectAll=function(e){var t=nn("string"==typeof e?Sn(e,rn):e);return t.parentNode=sn,b([t])};var Ln=en.select(sn);Nn.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each(F(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(F(e,t,n))};var An=en.map({mouseenter:"mouseover",mouseleave:"mouseout"});An.forEach(function(e){"on"+e in rn&&An.remove(e)});var On="onselectstart"in rn?null:h(sn.style,"userSelect"),Mn=0;en.mouse=function(e){return U(e,g())};var _n=/WebKit/.test(on.navigator.userAgent)?-1:0;en.touches=function(e,t){return arguments.length<2&&(t=g().touches),t?nn(t).map(function(t){var n=U(e,t);return n.identifier=t.identifier,n}):[]},en.behavior.drag=function(){function e(){this.on("mousedown.drag",o).on("touchstart.drag",u)}function t(){return en.event.changedTouches[0].identifier}function n(e,t){return en.touches(e).filter(function(e){return e.identifier===t})[0]}function r(e,t,n,r){return function(){function o(){var e=t(l,p),n=e[0]-v[0],r=e[1]-v[1];m|=n|r,v=e,c({type:"drag",x:e[0]+a[0],y:e[1]+a[1],dx:n,dy:r})}function u(){g.on(n+"."+d,null).on(r+"."+d,null),y(m&&en.event.target===h),c({type:"dragend"})}var a,f=this,l=f.parentNode,c=i.of(f,arguments),h=en.event.target,p=e(),d=null==p?"drag":"drag-"+p,v=t(l,p),m=0,g=en.select(on).on(n+"."+d,o).on(r+"."+d,u),y=R();s?(a=s.apply(f,arguments),a=[a.x-v[0],a.y-v[1]]):a=[0,0],c({type:"dragstart"})}}var i=y(e,"drag","dragstart","dragend"),s=null,o=r(p,en.mouse,"mousemove","mouseup"),u=r(t,n,"touchmove","touchend");return e.origin=function(t){return arguments.length?(s=t,e):s},en.rebind(e,i,"on")};var Dn=Math.PI,Pn=2*Dn,Hn=Dn/2,Bn=1e-6,jn=180/Dn,Fn=Math.SQRT2,In=2,qn=4;en.interpolateZoom=function(e,t){function n(e){var t=e*y;if(g){var n=W(v),o=s/(In*h)*(n*X(Fn*t+v)-z(v));return[r+o*f,i+o*l,s*n/W(Fn*t+v)]}return[r+e*f,i+e*l,s*Math.exp(Fn*t)]}var r=e[0],i=e[1],s=e[2],o=t[0],u=t[1],a=t[2],f=o-r,l=u-i,c=f*f+l*l,h=Math.sqrt(c),p=(a*a-s*s+qn*c)/(2*s*In*h),d=(a*a-s*s-qn*c)/(2*a*In*h),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(d*d+1)-d),g=m-v,y=(g||Math.log(a/s))/Fn;return n.duration=1e3*y,n},en.behavior.zoom=function(){function e(e){e.on(k,f).on(zn+".zoom",c).on(L,h).on("dblclick.zoom",p).on(O,l)}function t(e){return[(e[0]-T.x)/T.k,(e[1]-T.y)/T.k]}function n(e){return[e[0]*T.k+T.x,e[1]*T.k+T.y]}function r(e){T.k=Math.max(C[0],Math.min(C[1],e))}function i(e,t){t=n(t),T.x+=e[0]-t[0],T.y+=e[1]-t[1]}function s(){E&&E.domain(w.range().map(function(e){return(e-T.x)/T.k}).map(w.invert)),x&&x.domain(S.range().map(function(e){return(e-T.y)/T.k}).map(S.invert))}function o(e){e({type:"zoomstart"})}function u(e){s(),e({type:"zoom",scale:T.k,translate:[T.x,T.y]})}function a(e){e({type:"zoomend"})}function f(){function e(){l=1,i(en.mouse(r),p),u(s)}function n(){c.on(L,on===r?h:null).on(A,null),d(l&&en.event.target===f),a(s)}var r=this,s=M.of(r,arguments),f=en.event.target,l=0,c=en.select(on).on(L,e).on(A,n),p=t(en.mouse(r)),d=R();j.call(r),o(s)}function l(){function e(){var e=en.touches(p);return h=T.k,e.forEach(function(e){e.identifier in v&&(v[e.identifier]=t(e))}),e}function n(){for(var t=en.event.changedTouches,n=0,s=t.length;s>n;++n)v[t[n].identifier]=null;var o=e(),a=Date.now();if(1===o.length){if(500>a-b){var f=o[0],l=v[f.identifier];r(2*T.k),i(f,l),m(),u(d)}b=a}else if(o.length>1){var f=o[0],c=o[1],h=f[0]-c[0],p=f[1]-c[1];g=h*h+p*p}}function s(){for(var e,t,n,s,o=en.touches(p),a=0,f=o.length;f>a;++a,s=null)if(n=o[a],s=v[n.identifier]){if(t)break;e=n,t=s}if(s){var l=(l=n[0]-e[0])*l+(l=n[1]-e[1])*l,c=g&&Math.sqrt(l/g);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+s[0])/2,(t[1]+s[1])/2],r(c*h)}b=null,i(e,t),u(d)}function c(){if(en.event.touches.length){for(var t=en.event.changedTouches,n=0,r=t.length;r>n;++n)delete v[t[n].identifier];for(var i in v)return void e()}S.on(w,null).on(E,null),x.on(k,f).on(O,l),N(),a(d)}var h,p=this,d=M.of(p,arguments),v={},g=0,y=en.event.changedTouches[0].identifier,w="touchmove.zoom-"+y,E="touchend.zoom-"+y,S=en.select(on).on(w,s).on(E,c),x=en.select(p).on(k,null).on(O,n),N=R();j.call(p),n(),o(d)}function c(){var e=M.of(this,arguments);g?clearTimeout(g):(j.call(this),o(e)),g=setTimeout(function(){g=null,a(e)},50),m();var n=v||en.mouse(this);d||(d=t(n)),r(Math.pow(2,.002*Rn())*T.k),i(n,d),u(e)}function h(){d=null}function p(){var e=M.of(this,arguments),n=en.mouse(this),s=t(n),f=Math.log(T.k)/Math.LN2;o(e),r(Math.pow(2,en.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1)),i(n,s),u(e),a(e)}var d,v,g,b,w,E,S,x,T={x:0,y:0,k:1},N=[960,500],C=Un,k="mousedown.zoom",L="mousemove.zoom",A="mouseup.zoom",O="touchstart.zoom",M=y(e,"zoomstart","zoom","zoomend");return e.event=function(e){e.each(function(){var e=M.of(this,arguments),t=T;fr?en.select(this).transition().each("start.zoom",function(){T=this.__chart__||{x:0,y:0,k:1},o(e)}).tween("zoom:zoom",function(){var n=N[0],r=N[1],i=n/2,s=r/2,o=en.interpolateZoom([(i-T.x)/T.k,(s-T.y)/T.k,n/T.k],[(i-t.x)/t.k,(s-t.y)/t.k,n/t.k]);return function(t){var r=o(t),a=n/r[2];this.__chart__=T={x:i-r[0]*a,y:s-r[1]*a,k:a},u(e)}}).each("end.zoom",function(){a(e)}):(this.__chart__=T,o(e),u(e),a(e))})},e.translate=function(t){return arguments.length?(T={x:+t[0],y:+t[1],k:T.k},s(),e):[T.x,T.y]},e.scale=function(t){return arguments.length?(T={x:T.x,y:T.y,k:+t},s(),e):T.k},e.scaleExtent=function(t){return arguments.length?(C=null==t?Un:[+t[0],+t[1]],e):C},e.center=function(t){return arguments.length?(v=t&&[+t[0],+t[1]],e):v},e.size=function(t){return arguments.length?(N=t&&[+t[0],+t[1]],e):N},e.x=function(t){return arguments.length?(E=t,w=t.copy(),T={x:0,y:0,k:1},e):E},e.y=function(t){return arguments.length?(x=t,S=t.copy(),T={x:0,y:0,k:1},e):x},en.rebind(e,M,"on")};var Rn,Un=[0,1/0],zn="onwheel"in rn?(Rn=function(){return-en.event.deltaY*(en.event.deltaMode?120:1)},"wheel"):"onmousewheel"in rn?(Rn=function(){return en.event.wheelDelta},"mousewheel"):(Rn=function(){return-en.event.detail},"MozMousePixelScroll");en.functor=V;var Wn,Xn,Vn,$n,Jn,Kn=on[h(on,"requestAnimationFrame")]||function(e){setTimeout(e,17)};en.timer=function(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var i=n+t,s={c:e,t:i,f:!1,n:null};Xn?Xn.n=s:Wn=s,Xn=s,Vn||($n=clearTimeout($n),Vn=1,Kn($))},en.timer.flush=function(){J(),K()},en.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Qn=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Y);en.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=en.round(e,G(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),Qn[8+n/3]};var Gn=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Yn=en.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=en.round(e,G(e,t))).toFixed(Math.max(0,Math.min(20,G(e*(1+1e-15),t))))}});en.locale=function(e){return{numberFormat:Z(e)}};var Zn=en.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});en.format=Zn.numberFormat,en.layout={},en.layout.pie=function(){function e(s){var o=s.map(function(n,r){return+t.call(e,n,r)}),u=+("function"==typeof r?r.apply(this,arguments):r),a=(("function"==typeof i?i.apply(this,arguments):i)-u)/en.sum(o),f=en.range(s.length);null!=n&&f.sort(n===er?function(e,t){return o[t]-o[e]}:function(e,t){return n(s[e],s[t])});var l=[];return f.forEach(function(e){var t;l[e]={data:s[e],value:t=o[e],startAngle:u,endAngle:u+=t*a}}),l}var t=Number,n=er,r=0,i=Pn;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e};var er={};tt.prototype.toString=function(){return this.rgb()+""},en.interpolateRgb=nt,en.interpolateObject=rt,en.interpolateArray=it,en.interpolateNumber=st,en.interpolateString=ot;var tr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;en.interpolate=ut,en.interpolators=[function(e,t){var n=typeof t;return("string"===n?ot:"object"===n?Array.isArray(t)?it:rt:st)(e,t)}],en.interpolateRound=at;var nr={floor:Q,ceil:Q};en.scale={},en.scale.linear=function(){return gt([0,1],[0,1],ut,!1)};var rr={s:1,g:1,p:1,r:1,e:1};en.scale.ordinal=function(){return Tt([],{t:"range",a:[[]]})},en.svg={},en.svg.arc=function(){function e(){var e=t.apply(this,arguments),s=n.apply(this,arguments),o=r.apply(this,arguments)+ir,u=i.apply(this,arguments)+ir,a=(o>u&&(a=o,o=u,u=a),u-o),f=Dn>a?"0":"1",l=Math.cos(o),c=Math.sin(o),h=Math.cos(u),p=Math.sin(u);return a>=sr?e?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+ -e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":e?"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L"+e*h+","+e*p+"A"+e+","+e+" 0 "+f+",0 "+e*l+","+e*c+"Z":"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L0,0"+"Z"}var t=Nt,n=Ct,r=kt,i=Lt;return e.innerRadius=function(n){return arguments.length?(t=V(n),e):t},e.outerRadius=function(t){return arguments.length?(n=V(t),e):n},e.startAngle=function(t){return arguments.length?(r=V(t),e):r},e.endAngle=function(t){return arguments.length?(i=V(t),e):i},e.centroid=function(){var e=(t.apply(this,arguments)+n.apply(this,arguments))/2,s=(r.apply(this,arguments)+i.apply(this,arguments))/2+ir;return[Math.cos(s)*e,Math.sin(s)*e]},e};var ir=-Hn,sr=Pn-Bn,or=function(){return Q},ur=en.map({linear:or,poly:Bt,quad:function(){return Dt},cubic:function(){return Pt},sin:function(){return jt},exp:function(){return Ft},circle:function(){return It},elastic:qt,back:Rt,bounce:function(){return Ut}}),ar=en.map({"in":Q,out:Mt,"in-out":_t,"out-in":function(e){return _t(Mt(e))}});en.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,r=t>=0?e.substring(t+1):"in";return n=ur.get(n)||or,r=ar.get(r)||Q,Ot(r(n.apply(null,tn.call(arguments,1))))};var fr,lr,cr=[],hr=0;cr.call=Nn.call,cr.empty=Nn.empty,cr.node=Nn.node,cr.size=Nn.size,en.transition=function(e){return arguments.length?fr?e.transition():e:Ln.transition()},en.transition.prototype=cr,cr.select=function(e){var t,n,r,i=this.id,s=[];e=w(e);for(var o=-1,u=this.length;++o<u;){s.push(t=[]);for(var a=this[o],f=-1,l=a.length;++f<l;)(r=a[f])&&(n=e.call(r,r.__data__,f,o))?("__data__"in r&&(n.__data__=r.__data__),Gt(n,f,i,r.__transition__[i]),t.push(n)):t.push(null)}return zt(s,i)},cr.selectAll=function(e){var t,n,r,i,s,o=this.id,u=[];e=E(e);for(var a=-1,f=this.length;++a<f;)for(var l=this[a],c=-1,h=l.length;++c<h;)if(r=l[c]){s=r.__transition__[o],n=e.call(r,r.__data__,c,a),u.push(t=[]);for(var p=-1,d=n.length;++p<d;)(i=n[p])&&Gt(i,p,o,s),t.push(i)}return zt(u,o)},cr.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=_(e));for(var s=0,o=this.length;o>s;s++){i.push(t=[]);for(var n=this[s],u=0,a=n.length;a>u;u++)(r=n[u])&&e.call(r,r.__data__,u,s)&&t.push(r)}return zt(i,this.id)},en.transform=function(e){var t=rn.createElementNS(en.ns.prefix.svg,"g");return(en.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Wt(n?n.matrix:pr)})(e)},Wt.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var pr={a:1,b:0,c:0,d:1,e:0,f:0};en.interpolateTransform=Jt,cr.tween=function(e,t){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(e):P(this,null==t?function(t){t.__transition__[n].tween.remove(e)}:function(r){r.__transition__[n].tween.set(e,t)})},cr.attr=function(e,t){function n(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(u);return n!==e&&(t=o(n,e),function(e){this.setAttribute(u,t(e))})})}function s(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(u.space,u.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(u.space,u.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?Jt:ut,u=en.ns.qualify(e);return Kt(this,"attr."+e,t,u.local?s:i)},cr.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=en.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},cr.style=function(e,t,n){function r(){this.style.removeProperty(e)}function i(t){return null==t?r:(t+="",function(){var r,i=on.getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(r=ut(i,t),function(t){this.style.setProperty(e,r(t),n)})})}var s=arguments.length;if(3>s){if("string"!=typeof e){2>s&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return Kt(this,"style."+e,t,i)},cr.styleTween=function(e,t,n){function r(r,i){var s=t.call(this,r,i,on.getComputedStyle(this,null).getPropertyValue(e));return s&&function(t){this.style.setProperty(e,s(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},cr.text=function(e){return Kt(this,"text",e,Qt)},cr.remove=function(){return this.each("end.transition",function(){var e;this.__transition__.count<2&&(e=this.parentNode)&&e.removeChild(this)})},cr.ease=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].ease:("function"!=typeof e&&(e=en.ease.apply(en,arguments)),P(this,function(n){n.__transition__[t].ease=e}))},cr.delay=function(e){var t=this.id;return P(this,"function"==typeof e?function(n,r,i){n.__transition__[t].delay=+e.call(n,n.__data__,r,i)}:(e=+e,function(n){n.__transition__[t].delay=e}))},cr.duration=function(e){var t=this.id;return P(this,"function"==typeof e?function(n,r,i){n.__transition__[t].duration=Math.max(1,e.call(n,n.__data__,r,i))}:(e=Math.max(1,e),function(n){n.__transition__[t].duration=e}))},cr.each=function(e,t){var n=this.id;if(arguments.length<2){var r=lr,i=fr;fr=n,P(this,function(t,r,i){lr=t.__transition__[n],e.call(t,t.__data__,r,i)}),lr=r,fr=i}else P(this,function(r){var i=r.__transition__[n];(i.event||(i.event=en.dispatch("start","end"))).on(e,t)});return this},cr.transition=function(){for(var e,t,n,r,i=this.id,s=++hr,o=[],u=0,a=this.length;a>u;u++){o.push(e=[]);for(var t=this[u],f=0,l=t.length;l>f;f++)(n=t[f])&&(r=Object.create(n.__transition__[i]),r.delay+=r.duration,Gt(n,f,s,r)),e.push(n)}return zt(o,s)},en.svg.axis=function(){function e(e){e.each(function(){var e,f=en.select(this),l=this.__chart__||n,c=this.__chart__=n.copy(),h=null==a?c.ticks?c.ticks.apply(c,u):c.domain():a,p=null==t?c.tickFormat?c.tickFormat.apply(c,u):Q:t,d=f.selectAll(".tick").data(h,c),v=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Bn),m=en.transition(d.exit()).style("opacity",Bn).remove(),g=en.transition(d).style("opacity",1),y=mt(c),b=f.selectAll(".domain").data([0]),w=(b.enter().append("path").attr("class","domain"),en.transition(b));v.append("line"),v.append("text");var E=v.select("line"),S=g.select("line"),x=d.select("text").text(p),T=v.select("text"),N=g.select("text");switch(r){case"bottom":e=Yt,E.attr("y2",i),T.attr("y",Math.max(i,0)+o),S.attr("x2",0).attr("y2",i),N.attr("x",0).attr("y",Math.max(i,0)+o),x.attr("dy",".71em").style("text-anchor","middle"),w.attr("d","M"+y[0]+","+s+"V0H"+y[1]+"V"+s);break;case"top":e=Yt,E.attr("y2",-i),T.attr("y",-(Math.max(i,0)+o)),S.attr("x2",0).attr("y2",-i),N.attr("x",0).attr("y",-(Math.max(i,0)+o)),x.attr("dy","0em").style("text-anchor","middle"),w.attr("d","M"+y[0]+","+ -s+"V0H"+y[1]+"V"+ -s);break;case"left":e=Zt,E.attr("x2",-i),T.attr("x",-(Math.max(i,0)+o)),S.attr("x2",-i).attr("y2",0),N.attr("x",-(Math.max(i,0)+o)).attr("y",0),x.attr("dy",".32em").style("text-anchor","end"),w.attr("d","M"+ -s+","+y[0]+"H0V"+y[1]+"H"+ -s);break;case"right":e=Zt,E.attr("x2",i),T.attr("x",Math.max(i,0)+o),S.attr("x2",i).attr("y2",0),N.attr("x",Math.max(i,0)+o).attr("y",0),x.attr("dy",".32em").style("text-anchor","start"),w.attr("d","M"+s+","+y[0]+"H0V"+y[1]+"H"+s)}if(c.rangeBand){var C=c,k=C.rangeBand()/2;l=c=function(e){return C(e)+k}}else l.rangeBand?l=c:m.call(e,c);v.call(e,l),g.call(e,c)})}var t,n=en.scale.linear(),r=dr,i=6,s=6,o=3,u=[10],a=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in vr?t+"":dr,e):r},e.ticks=function(){return arguments.length?(u=arguments,e):u},e.tickValues=function(t){return arguments.length?(a=t,e):a},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,s=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(s=+t,e):s},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var dr="bottom",vr={top:1,right:1,bottom:1,left:1};"function"==typeof define&&define.amd?define("d3",en):"object"==typeof module&&module.exports?module.exports=en:this.d3=en}(),define("graphics/wrapgenius",["constants/componentconstants","d3"],function(e,t){var n={strings:{},LINE_HEIGHT:e.wrapGenius.LINE_HEIGHT,FONT_SIZE:e.wrapGenius.FONT_SIZE,THETA:e.wrapGenius.THETA,MAX_HEIGHT_PERCENT:e.wrapGenius.MAX_HEIGHT_PERCENT,PADDING:e.wrapGenius.PADDING,add:function(e,t){var n=this,r=e.split(" ");canary=rf.globals.dbRegistry.getDefaultDashboard()._makeTempDiv(),canary.addClass("wrap-genius-canary"),$(t).append(canary);for(var i=0;i<r.length;i++){var s=r[i];if(typeof n.strings!="undefined"){var o=$("<p/>").text(s).addClass("xAxisLabel").css({"font-size":n.FONT_SIZE,"line-height":n.LINE_HEIGHT});canary.append(o),n.strings[s]=o.width()}}canary.remove()},toBreakOrNotToBreak:function(e,t,n){var r=this;for(var i=0;i<e.length;i++){var s=r.getWordLengths(e[i]);if(_.max(s)>t)return!1}return!0},getWordLengths:function(e){var t=this,n=e.split(" "),r=_.values(_.pick(t.strings,n));return r},getHeight:function(e,t,n){var r=this,i=[],s=!r.toBreakOrNotToBreak(e,t,n),o=[],u=0,a;if(!s){for(u=0;u<e.length;u++){var f=e[u].split(" "),l=_.values(_.pick(r.strings,f));i.push(r.lines(e[u],t).numLines)}return a=_.max(i),a*r.LINE_HEIGHT}if(s){for(u=0;u<e.length;u++)o.push(r.getTiltHeight(e[u],n*r.MAX_HEIGHT_PERCENT));return a=_.max(o),a}},getTiltHeight:function(e,t){var n=this,r=e.split(" "),i=_.values(_.pick(n.strings,r)),s=_.reduce(i,function(e,t){return e+t})+(r.length-1)*n.FONT_SIZE,o=s*Math.sin(n.THETA)+n.PADDING;return o>t?t:o},lines:function(e,t){var n=this,r=e.split(" "),i=_.values(_.pick(n.strings,r)),s=1,o=[""],u=0;for(var a=0;a<r.length;a++)u+i[a]<t?(u+=i[a],o[s-1]+=" "+r[a]):(s++,o[s-1]=" "+r[a],u=i[a]);return{numLines:s,words:o}},breakLabels:function(e,n,r){var i=this,s=e.selectAll("text"),o=[];s.each(function(e){o.push(e)});var u=i.toBreakOrNotToBreak(o,n);u?s.each(function(e){var r=i.lines(e,n).words,s=t.select($(t.select(this)[0][0]).parent()[0]);t.select(this).remove();var o=s.insert("text").attr("style","font-size: "+i.FONT_SIZE+"px");for(var u=0;u<r.length;u++)o.insert("tspan").attr("style","text-anchor: middle").attr("x","0px").attr("dy",i.LINE_HEIGHT+"px").text(r[u])}):i.tiltLabels(e,n,r)},tiltLabels:function(e,n,r){var i=this,s=i.MAX_HEIGHT_PERCENT*r,o=e.selectAll("text");o.each(function(e){t.select(this).attr("style","font-size: "+i.FONT_SIZE+"px; text-anchor: right;"),t.select(this).attr("data-tooltip","true"),t.select(this).attr("data-full-text",e);var n=this.getBBox().width,r=t.select(this),o,u,a;r.attr("transform","rotate("+ -i.THETA+")"),u=$(this).parent()[0].getBBox().height,o=Math.abs(s/u),e=$(r[0]).text(),o<1&&(a=Math.floor(o*e.length),e=a>4?e.slice(0,a-3)+"...":e.slice(0,a-1),$(r[0]).text(e)),r.attr("dx",-this.getBBox().width-i.PADDING*2),r.attr("dy",0)})}};return n}),define("graphics/rfchart",["graphics/rftooltip","utils/graphicutils","utils/numberformatter","utils/browserutils","graphics/wrapgenius","constants/componentconstants","d3"],function(e,t,n,r,i,s,o){var u=s.chart_profiles,a=function(){var a=this,f={},l=[],c=[],h=1,p,d=1,v,m=$("<div/>"),g=null,y=null,b=null,w,E,S,x,T,N,C={},k={},L={},A,O={column:[]},M=u.chart,D,P=[],H,B,j,F,I="",q=!1,R=M.paddingLeft,U,z,W=null,X=[],V=!1,J=s.chart.animationDuration,K=600,Q=[],G=null,Y=null,Z=1,et=new e,tt=null,nt=null;a.configure=function(e){f=e},a.setAnimation=function(e){V=!e},a.setProfile=function(e){var t=u[e];R=t.paddingLeft,t?M=t:console.error("profile "+e+" doesn't exist")},a.setData=function(e,t,n,r){c=e,l=t,P=n,H=r},a.setYAxisProperties=function(e){Y=e},a.updateData=function(e,t,n){a.setData(e,t,P,n),M.dualStageAnimate?(ht(),vt(),setTimeout(function(){ct(),M.drawAxesFlag&&lt(),ht(),vt()},K)):(ct(),M.drawAxesFlag&&lt(),ht(),vt())},a.renderTo=function(e,t,n){h=t,d=n,m=e,rt()},a.resizeTo=function(e,t){h=e,d=t,ot(),V===!1&&it(),vt()},a.setYAxisName=function(e){q=M.drawYAxisNameFlag,I=e},a.onItemClicked=function(e){X.push(e)};var rt=function(){m.empty(),st(),ot(),dt()};a.dispose=function(){y.remove()};var it=function(){for(A=0;A<C.column.length;A++)tt=C.column[A],color=L.column[A],O.column[A].selectAll("rect").data(tt).attr("y",E(0)).attr("height",0);for(A=0;A<C.line.length;A++)tt=C.line[A],color=L.line[A],O.line[A].selectAll("line").data(tt.slice(0,tt.length-1)).attr("y1",E(0)).attr("y2",E(0)),O.line[A].selectAll("circle").data(tt).attr("cy",E(0))},st=function(){g=o.select(m[0]).append("svg"),G=m.offset(),y=g.append("g").attr("class","chart-container"),E=o.scale.linear(),w=o.scale.ordinal(),ct(),M.drawAxesFlag&&ft(),b=y.append("g").attr("class","chart-core"),et.setCore(b)},ot=function(){p=h-R-M.paddingRight,v=d-M.paddingTop-M.paddingBottom,y=y.attr("transform",mt(R,M.paddingTop)),g.attr("width",h).attr("height",d),g.select(".chart-container").attr("width",p).attr("height",v),g.select(".chart-core").attr("width",p).attr("height",v),M.drawAxesFlag&&at(),ct(),M.drawAxesFlag&&(V=!0,lt(),V=!1)},ut=function(e){var t=r.isIE()?e.node().getBoundingClientRect().width:e.node().getBBox().width;Y.axisName&&(I=e.select(".yAxisName"),I[0][0]?I.select("text").attr("x",-v/2):e.append("g").attr("class","yAxisName").attr("transform","translate(0,0)").append("text").text(Y.axisName).attr("style","text-anchor:middle;font-size:"+M.yAxisLabelSize+"px;").attr("transform","rotate(-90)").attr("x",-v/2).attr("y",-t))},at=function(){var e=w,t=E,r=null,s=null,u=null,a=null,f=null,l=null;ct(),t=E,r=o.svg.axis().scale(e).orient("bottom"),s=o.svg.axis().scale(t).orient("left").tickFormat(function(e){var t=new n;return t.setConfig(Y),t.formatValue(e)}),u=j.select("g.tYAxis"),u=j.append("g").attr("class","tYAxis"),u.attr("transform",mt(0,0)).call(s),u.selectAll("line").remove(),ut(u),a=u.node().getBBox().width,u.remove(),e.rangeBands([0,p-a],M.xAxisItemPadding).domain(c),g.append("g").attr("class","dummyXAxis").attr("transform",mt(0,0)).call(r),f=g.select(".dummyXAxis").node().getBBox().height,W=l,g.select(".dummyXAxis").remove(),l=i.getHeight(c,e.rangeBand(),v),v-=l-f},ft=function(){j=y.append("g").attr("class","yAxis"),y.append("g").attr("class","xAxis"),q&&(F=g.append("g").attr("class","yAxisNameContainer"),F.append("text").attr("class","yAxisLabel rfText").attr("transform","rotate(270)").text(I),R+=M.yAxisNameWidth),M.showGridLineFlag&&(U=y.append("g").attr("class","yGridLines")),M.prettifyDomain},lt=function(){var e,t,s=M.dualStageAnimate?K:J;x=o.svg.axis().scale(E).orient("left").tickFormat(function(e){var t=new n;return t.setConfig(Y),t.formatValue(e)}),N=o.svg.axis().scale(E).orient("right"),M.prettifyDomain&&(x=x.tickValues(D.ticks),N=N.tickValues(D.ticks)),S=o.svg.axis().scale(w).orient("bottom"),e=j.select("g.yAxis"),e[0][0]||(e=j.append("g").attr("class","yAxis")),t=j.select("g.yGrid"),t[0][0]||(t=j.append("g").attr("class","yGrid")),e.attr("transform",mt(0,0)).transition().duration(V?0:s).call(x),e.selectAll("line").remove(),ut(e),T=r.isIE()?e[0][0].getBoundingClientRect().width:e[0][0].getBBox().width,M.showGridLineFlag&&(N=N.tickSize(p-T)),t.attr("transform",mt(T,0)).transition().duration(V?0:s).call(N),t.selectAll("text").remove(),w.rangeBands([0,p-T],M.xAxisItemPadding).domain(c),e.attr("transform",mt(T,0)),g.select(".chart-core").attr("transform",mt(T,0)),g.select(".xAxis").attr("transform",mt(T,E.range()[0])).call(S),M.wrapLabelsFlag&&i.breakLabels(g.select(".xAxis"),w.rangeBand(),v);if(M.prettifyDomain)var u=D.ticks.length,a=E(D.ticks[0])-E(D.ticks[1]);q&&(F=F.attr("transform",mt(M.yAxisNameWidth,h*.6))),y.selectAll(".xAxis text").on("mousemove",function(){var e=o.event,t=e.pageX-m.offset().left-(R+T),n=e.pageY-m.offset().top-M.paddingTop-60,r=o.select(this).text();o.select(this).attr("data-tooltip")==="true"&&(et.show(),et.update("",o.select(this).attr("data-full-text"),"#000",t,n))}),y.selectAll(".xAxis text").on("touchstart",function(){var e=o.event,t=e.pageX-m.offset().left-(R+T),n=e.pageY-m.offset().top-M.paddingTop-60,r=o.select(this).text();o.select(this).attr("data-tooltip")==="true"&&(et.show(),et.update("",o.select(this).attr("data-full-text"),"#000",t,n))}),y.select(".xAxis text").on("mouseout",function(){et.hide()})},ct=function(){var e=_.flatten(l),n,r;if(M.prettifyDomain){var i=_.min(e)<0?_.min(e):0;D=t.prettyDomain(i,_.max(e)),n=D.min,r=D.max}else n=_.min(e),r=_.max(e),r<0&&(r=0),n>0&&(n=0);E.range([v,0]).domain([n,r]),w.rangeBands([0,p],M.xAxisItemPadding).domain(c)},ht=function(){C={column:[],line:[]},k={column:[],line:[]},L={column:[],line:[]};for(A=0;A<P.length;A++)switch(P[A].displayType){case"column":C.column.push(l[A]),k.column.push(H[A]),L.column.push(P[A].color);break;case"line":C.line.push(l[A]),k.line.push(H[A]),L.line.push(P[A].color);break;default:console.error("Unknown type ",P[A].displayType)}},pt=function(){Q=[];for(var e=0;e<c.length;e++)Q[e]={x:w(c[e]),width:w.rangeBand(),item:{column:[],line:[]}}},dt=function(){function n(e,t,n){var r=b[0][0].getBBox(),i=Math.floor(e/(p-T)*c.length),s=null;if(i>=0&&i<c.length){for(var o=0;o<Q[i].item.line.length;o++){s=Q[i].item.line[o];if(e>s.x&&e<s.x+s.width&&t>s.y&&t<s.y+s.height){et.isHidden()&&et.show(),et.update(s.displayValue,c[i]+" : ",s.color,e,t);return}}for(o=0;o<Q[i].item.column.length;o++){s=Q[i].item.column[o];if(e>s.x&&e<s.x+s.width&&t>s.y&&t<s.y+s.height){et.isHidden()&&et.show(),et.update(s.displayValue,c[i]+" : ",s.color,e,t);return}}}n&&et.hide()}ht(),O={column:[],line:[]},b.selectAll(".data-series").remove();var e=1;for(A=0;A<C.column.length;A++){tt=C.column[A],color=L.column[A]+" plotItem",nt=b.append("g").attr("class","column-series").attr("class","data-series");var t=nt.selectAll("rect").data(tt).enter().append("rect").attr("class",color).attr("data-index",function(e,t){return t}).attr("data-label",function(e,t){return c[t]}).attr("y",E(0)).attr("height",0);O.column.push(nt)}for(A=0;A<C.line.length;A++)tt=C.line[A],color=L.line[A]+" plotItem",nt=b.append("g").attr("class","column-series").attr("class","data-series"),nt.selectAll("line").data(tt.slice(0,tt.length-1)).enter().append("line").attr("class",color).attr("y1",E(0)).attr("y2",E(0)).attr("data-index",function(e,t){return t}),nt.selectAll("circle").data(tt).enter().append("circle").attr("class",color).attr("cy",E(0)).attr("r",5).attr("data-index",function(e,t){return t}).attr("data-label",function(e,t){return c[t]}),O.line.push(nt);pt(),Modernizr.touch||g.on("mouseout",function(){et.hide()}),Modernizr.touch||g.on("mousemove",function(){var e=o.event,t=e.pageX-m.offset().left-(R+T),r=e.pageY-m.offset().top-M.paddingTop;n(t,r)}),g.on("touchstart",function(){var e=o.mouse(this);n(e[0]-(R+T),e[1]-M.paddingTop,!1)}),vt()},vt=function(){var e=C.column.length,t=M.dualStageAnimate?K:J;for(A=0;A<C.column.length;A++)tt=C.column[A],columnWidth=w.rangeBand()/e,columnPadding=columnWidth*M.seriesInterColumnPadding,currentDisplayValues=k.column[A],color=L.column[A],O.column[A].selectAll("rect").data(tt).attr("x",function(e,t){return Q[t].item.column[A]={},Q[t].item.column[A].x=w(c[t])+A*columnWidth+columnPadding,Q[t].item.column[A].width=columnWidth-2*columnPadding,w(c[t])+A*columnWidth+columnPadding}).attr("width",columnWidth-2*columnPadding).attr("fill",function(e,t){return Q[t].item.column[A].color=color,color}).attr("stroke",color).attr("data-displayValue",function(e,t){return Q[t].item.column[A].displayValue=currentDisplayValues[t],currentDisplayValues[t]}).transition().duration(V?0:t).attr("y",function(e,t){return e<=0?(Q[t].item.column[A].y=E(0),E(0)):(Q[t].item.column[A].y=E(e),E(e))}).attr("height",function(e,t){return Q[t].item.column[A].height=Math.abs(e*(E(0)-E(1))),Math.abs(e*(E(0)-E(1)))});var n=C.line.length;for(A=0;A<n;A++)tt=C.line[A],nLineCount=tt.length-1,columnWidth=w.rangeBand(),currentDisplayValues=k.line[A],color=L.line[A],O.line[A].selectAll("line").data(tt.slice(0,tt.length-1)).attr("x1",function(e,t){return M.stickLineChartToSides?t*p/nLineCount:w(c[t])+columnWidth/2}).attr("x2",function(e,t){return M.stickLineChartToSides?(t+1)*p/nLineCount:w(c[t+1])+columnWidth/2}).attr("stroke-width",3).attr("fill",color).attr("stroke",color).attr("data-displayValue",function(e,t){return currentDisplayValues[t]}).transition().duration(V?0:t).attr("y1",function(e){return E(e)}).attr("y2",function(e,t){return E(tt[t+1])}),O.line[A].selectAll("circle").data(tt).attr("cx",function(e,t){return Q[t].item.line[A]={},Q[t].item.line[A].width=M.circleRadius*2,Q[t].item.line[A].height=M.circleRadius*2,M.stickLineChartToSides?(Q[t].item.line[A].x=t*p/nLineCount-M.circleRadius,t*p/nLineCount):(Q[t].item.line[A].x=w(c[t])+columnWidth/2-M.circleRadius,w(c[t])+columnWidth/2)}).attr("r",M.circleRadius).attr("fill",function(e,t){return Q[t].item.line[A].color=color,"#fff"}).attr("stroke",color).attr("stroke-width",2).attr("data-displayValue",function(e,t){return Q[t].item.line[A].displayValue=currentDisplayValues[t],currentDisplayValues[t]}).transition().duration(V?0:t).attr("cy",function(e,t){return Q[t].item.line[A].y=E(e)-M.circleRadius,E(e)});b.selectAll(".plotItem").on("click",function(e){for(var t=0;t<X.length;t++){var n=X[t],r=parseInt(this.attributes["data-index"].value,10);n({value:e,labelIndex:r,label:c[r]})}})},mt=function(e,t){return"translate("+e+","+t+")"}};return a}),define("graphics/rfgauge",["constants/componentconstants","d3"],function(e,t){var n=function(){var n=this,r="",i="",s=0,o=100,u=50,a=null,f=null,l=null,c=null,h=null,p=null,d=null,v=null,m=null,g=null,y=null,b=null,w=null,E=null,S=null,x=null,T=null,N=e.gauge.startAngle,C=e.gauge.endAngle,k=e.gauge.fontSize,L=e.gauge.arcWidth,A=e.gauge.xPadding,O=e.gauge.animationDuration,M=!1;n.setData=function(e,t,n,a,f){r=e,i=t,s=n,o=a,u=f},n.updateData=function(e,t,r,i,s){n.setData(e,t,r,i,s),updateValues(),B()},n.updateValue=function(e,t){D(e,t)},n.renderTo=function(e,t,n){a=t-t*A,f=n,l=e,_()},n.resizeTo=function(e,t){a=e,f=t,_()};var _=function(){l.empty(),P(),H(),B()},D=function(e,n){var r=null,i=a/2,l=f/2,c=T/2,h=N*180/Math.PI,p=C*180/Math.PI;r=t.svg.arc().innerRadius(c).outerRadius(c-c*L).startAngle(function(e){return e.startAngle}).endAngle(function(e){return e.endAngle}),arcTween=function(e){var i=t.interpolate({endAngle:n?N:((Math.abs(N*2/Math.PI)+Math.abs(C*2/Math.PI))*(u/(o-s))+N*2/Math.PI)*(Math.PI/2)},e);return function(e){return r(i(e))}};var d=n?0:u;M?b.text(e):t.timer(function(t){if(t>=O)return b.text(e),!0;var n=Math.floor(d+(e-d)*t/O);b.text(n)}),m.data([{color:"gray",startAngle:N,endAngle:((Math.abs(N*2/Math.PI)+Math.abs(C*2/Math.PI))*(e/(o-s))+N*2/Math.PI)*(Math.PI/2)}]).transition().duration(0).attr("d",function(e){return r(e)}),m.transition().ease("linear").duration(M?0:O).attrTween("d",arcTween)};n.dispose=function(){};var P=function(){c=t.select(l[0]).append("svg"),h=c.append("g").attr("class","gauge-container"),p=h.append("g").attr("class","gauge-layer"),d=h.append("g").attr("class","text-layer")},H=function(){a>0&&f>0&&(c.attr("width",a),c.attr("height",f),T=a<f?a:f)},B=function(){var e=null,t=a/2,n=f/2,r=T/2,l=N*180/Math.PI,c=C*180/Math.PI,h=r*.5,p=h+h*.2;E=d.append("circle").attr("class","innerCircle").attr("stroke","rgb(235,235,235)").attr("fill","rgb(235,235,235)"),$arrowPath=d.selectAll("path").data([0]).enter().append("path").attr("d",function(e,t){e=l;var n=r*.5,i=n/2;return"M0,-"+i+" l -"+i+","+i+" l "+n+",0"}).attr("fill","rgb(235,235,235)").attr("transform","translate("+(t+q(h-5,l))+","+(n+I(h-5,l))+")rotate("+l+")"),b=d.append("text").attr("class","caption").text(u).attr("text-anchor","middle").attr("font-size",T/4+"px"),w=d.append("text").attr("class","subcaption").text(i).attr("text-anchor","middle").attr("font-size",T/16+"px"),g=d.append("text").attr("class","mincaption").text(s).attr("text-anchor","middle").attr("font-size",T/16+"px"),y=d.append("text").attr("class","maxcaption").text(o).attr("text-anchor","middle").attr("font-size",T/16+"px"),j()},j=function(){var e=null,r=a/2,i=f/2,l=T/2,c=N*180/Math.PI,h=C*180/Math.PI,d=l*.5,g=d+d*.2;e=t.svg.arc().innerRadius(l).outerRadius(l-l*L).startAngle(function(e){return e.startAngle}).endAngle(function(e){return e.endAngle}),v=p.selectAll("path.back").data([{color:"gray",startAngle:N,endAngle:C}]).enter().append("path").attr("class","back").attr("d",function(t){return e(t)}).attr("transform","translate("+r+","+i+")").attr("fill",function(e){return"rgb(235,235,235)"}),m=p.selectAll("path.main").data([{color:"green",startAngle:N,endAngle:N}]).enter().append("path").attr("class","main").attr("fill",function(e){return"rgb(112, 207, 1)"}).attr("transform","translate("+r+","+i+")"),b.attr("transform","translate("+r+", "+i+")").attr("dy",T/10),n.updateValue(u,!0),E.attr("transform","translate("+r+", "+i+")"),E.attr("r",d);var y=c+(h-c)*u/(o-s),w;M?(w=c+(180+y-(180+c)),$arrowPath.attr("transform","translate("+(r+q(d-5,w))+"1,"+(i+I(d-5,w))+")rotate("+w+")")):t.timer(function(e){if(e>=O)return w=c+(180+y-(180+c)),$arrowPath.attr("transform","translate("+(r+q(d-5,w))+"1,"+(i+I(d-5,w))+")rotate("+w+")"),M=f?!0:M,!0;w=c+(180+y-(180+c))*e/O,$arrowPath.attr("transform","translate("+(r+q(d-5,w))+","+(i+I(d-5,w))+")rotate("+w+")")})},F=function(e,t){return"translate("+e+","+t+")"},I=function(e,t){return-e*Math.cos(t*Math.PI/180)},q=function(e,t){return-(-e*Math.sin(t*Math.PI/180))},R=function(e,t,n){return"rotate("+e+","+t+","+n+")"}};return n}),define("graphics/rfkpi",["utils/internallayoutmanager","constants/kpilayoutconstants","graphics/rfchart","graphics/rfgauge"],function(e,t,n,r){var i=function(){var i=this,s={},o=null,u=t,a,f,l,c;i.configure=function(e){s=e},i.renderTo=function(t){var i=p(),u={rfKPIValue:s.valueString,rfKPICaption:s.captionString},h;o=new e(i,u),o.manageElement(t),o.setValues(),a=t.find(".rfKPISpark"),s.sparkFlag&&(l=new n,l.setProfile("spark"),l.setAnimation(!1),l.setYAxisProperties("",{}),l.setData(s.sparkLabels,[s.sparkValues],[{displayType:"line",color:"#2C82C9"}],[s.sparkValues]),l.renderTo(a,a.width(),a.height())),s.gaugeFlag&&(f=t.find(".rfKPIGauge"),c=new r,c.setData(s.caption,"",s.limits.min,s.limits.max,+s.valueString),c.renderTo(f,f.width(),f.height()))},i.resizeTo=function(e,t){o.handleResize(e,t),l&&l.resizeTo(a.width(),a.height()),c&&c.resizeTo(f.width(),f.height())};var h=function(e){var t=!0,n;return e.has&&_.each(e.has,function(e){s.hasOwnProperty(e)||(t=!1)}),e.not&&_.each(e.not,function(e){s.hasOwnProperty(e)&&(t=!1)}),t},p=function(){var e="";return h({has:["captionString","valueString"],not:["gaugeFlag","sparkFlag"]})&&(e="basicKPI"),h({has:["captionString","valueString","gaugeFlag"]})&&(e="basicGauge"),h({has:["captionString","valueString","sparkFlag"]})&&(e="kpiWithSpark"),h({has:["captionString","valueString","c1","c2"]})&&(e="kpiWithChanges"),u[e][s.mode]}};return i}),define("renderers/kpirenderer",["renderers/componentrenderer","graphics/rfkpi"],function(e,t){function n(){e.call(this);var n=this,r={},i,s=n._raw,o,u=n.pro,a={},f,l,c,h,p,d,v,m;i={setConfig:function(e){p=e.labels,d=e.values,v=e.limits,m=!!e.gaugeFlag},renderCore:function(){var e=n.getDimensionProperties(),r;e.portrait?l="portrait":l="landscape",f=new t,r={valueString:n.props.kpi.display.value,captionString:n.props.core.caption,mode:l,sparkValues:d,sparkLabels:p,limits:v},n.props.kpi.display.sparkFlag?r.sparkFlag=!0:n.props.kpi.display.gaugeFlag&&(r.gaugeFlag=!0),f.configure(r),f.renderTo(n.$core),n.$core.click(function(){n.pro.trigger("click",{a:"hello",b:"world"})})},resizeCore:function(e,t){f.resizeTo(e,t)}},o={},s._registerClassName("KPIRenderer"),s._registerPublic(r,i),s._registerProtected(a,o)}return n}),define("prop/proputils",["utils/media"],function(e){return{error:function(e,t){console.error(e,t)},isProp:function(t){if(t!==null&&typeof t!="undefined"){if(t.isPropList||t.isPropBase)return!0;var n=e.fastMediaSelect(e.getCurrentMedia(),t);return n===null?!1:n.isPropList||n.isPropBase?!0:!1}return!1},isPropList:function(t){if(t!==null&&typeof t!="undefined"){if(t.isPropList)return!0;var n=e.fastMediaSelect(e.getCurrentMedia(),t);return n===null?!1:n.isPropList?!0:!1}return!1},isPropBase:function(t){if(t!==null&&typeof t!="undefined"){if(t.isPropBase)return!0;var n=e.fastMediaSelect(e.getCurrentMedia(),t);return n===null?!1:n.isPropBase?!0:!1}return!1}}}),define("prop/propertybase",["utils/media","prop/proputils"],function(e,t){function n(){var n=this,r=null,i={},s={},o={},u=null,a=null,f="",l=null;n.isPropBase=!0,n.setValue=function(e,r,s){var o=c(e);s=s?s:e;if(o.terminal&&!t.isPropBase(o.root)){var u=i[o.key];i[o.key]=r,n.trigger("setValue",s,r,u,o)}else!o.terminal&&t.isPropBase(o.root)?o.root.setValue(o.rest,r,s):t.error("Cannot set a value to this pb",o)},n.setRootObject=function(e){var r;e=n.flipMedia(e);for(r in e)i.hasOwnProperty(r)?t.isProp(i[r])?i[r].setRootObject(e[r],!0):i[r]=e[r]:t.error("Unknown key in object",r)},n.setObjectAtPath=function(e,r,i){var s=c(e);i=i?i:e;if(s.terminal&&t.isProp(s.root)){var o=s.root.getRootObject();s.root.setRootObject(r,!0),n.trigger("setObjectAtPath",i,r,o,s)}else!s.terminal&&t.isPropBase(s.root)?s.root.setObjectAtPath(s.rest,r,i):t.error("Cannot set an object to this pb",s)},n.addItemToList=function(e,r,i,s){var o=c(e);s=s?s:e;if(o.terminal&&t.isPropList(o.root)){var u=o.root.addItem(r,i,!0);n.trigger("addItemToList",s,u,null,o)}else!o.terminal&&t.isPropBase(o.root)?o.root.addItemToList(o.rest,r,i,s):t.error("Cannot add an item to this pb",o)},n.pushItemToList=function(e,r,i){var s=c(e);i=i?i:e;if(s.terminal&&t.isPropList(s.root)){var o=s.root.pushItem(r,!0);n.trigger("pushItemToList",i,o,null,s)}else!s.terminal&&t.isPropBase(s.root)?s.root.pushItemToList(s.rest,r,i):t.error("Cannot push an item to this pb",s)},n.resetValue=function(e,r){var o=c(e);r=r?r:e;if(o.terminal&&!t.isPropBase(o.root)){var u=i[o.key],a=s[o.key];i[o.key]=a,n.trigger("resetValue",r,a,u,o)}else!o.terminal&&t.isPropBase(o.root)?o.root.resetValue(o.rest,r):t.error("Cannot set a value to this pb",o)},n.resetKeyInAll=function(e,n){var r=c(e);r.terminal&&t.isPropList(r.root)?r.root.resetKeyInAll(n):!r.terminal&&t.isPropBase(r.root)?r.root.resetKeyInAll(r.rest,n):t.error("Cannot push an item to this pb",r)},n.getValue=function(e){var r=c(e);if(r.terminal&&!t.isProp(r.root))return n.responsiveFilter(i[r.key]);if(!r.terminal&&t.isPropBase(r.root))return r.root.getValue(r.rest);t.error("Cannot get value for ",r)},n.getRootObject=function(){var e,r={};for(e in i)t.isProp(i[e])?r[e]=i[e].getRootObject():r[e]=i[e];return n.responsiveFilter(r)},n.getObjectAtPath=function(e){var n=c(e);if(n.terminal&&t.isProp(n.root))return n.root.getRootObject();if(!n.terminal&&t.isPropBase(n.root))return n.root.getObjectAtPath(n.rest);t.error("Cannot get object for ",n)},n.isSet=function(e){var n=c(e);if(n.terminal&&!t.isProp(n.root))return i[n.key]!==null;if(!n.terminal&&t.isPropBase(n.root))return n.root.isSet(n.rest);t.error("Cannot get value for ",n)},n.getListItem=function(e,n){var r=c(e);if(r.terminal&&t.isPropList(r.root))return r.root.getListItem(n);if(!r.terminal&&t.isPropBase(r.root))return r.root.getListItem(r.rest,n);t.error("Cannot set a value to this pb",r)},n.checkHasKey=function(e,n){var r=c(e);if(r.terminal&&t.isPropList(r.root))return r.root.checkHasKey(n);if(!r.terminal&&t.isPropBase(r.root))return r.root.checkHasKey(r.rest,n);t.error("check if this key exists",r)},n.register=function(e){var r,u;for(r in e)e.hasOwnProperty(r)&&(u=e[r],t.isProp(u)&&u.setParentProp(n),i[r]=u,s[r]=u,o[r]=[])},n.responsiveFilter=function(t){var r=e.getCurrentMedia(),i=null;if(t===null)return null;if(_.isArray(t))return i=t,i;if(_.isObject(t)){var s=e.fastMediaSelect(r,t);if(s===Object(t)){i={};for(var o in s)if(s.hasOwnProperty(o)){var u=e.fastMediaSelect(r,s[o]);i[o]=n.responsiveFilter(u)}return i}return s}return t},n.flipMedia=function(t){if(!e.isMediaObject(t))return t;var n={};for(var r in t)if(t.hasOwnProperty(r))for(var i in t[r])t[r].hasOwnProperty(i)&&(n[i]||(n[i]={}),n[i][r]=t[r][i]);return n},n.linkToComponent=function(e){var n;r=e;for(n in i)t.isProp(i[n])&&i[n].linkToComponent(e)},n.setBasePath=function(e){f=e;for(var n in i)t.isProp(i[n])&&i[n].setBasePath(f+"."+n)},n.setParentProp=function(e){l=e},n.trigger=function(e,t,i,s,f){var l=!1;u!==null&&(l=u.onItemUpdated(a,n)),r!==null&&(l||r.pro.applyChange(e,t,i,s,f));if(o.hasOwnProperty(f.key)&&o[f.key].length>0)for(var c=0;c<o[f.key].length;c++)o[f.key][c](i,s)},n.applyPatch=function(e){var t=e.action,r=e.path,i=e.params;switch(t){case"setValue":n.setValue(r,i);break;case"setObjectAtPath":n.setObjectAtPath(r,i);break;case"addItemToList":n.addItemToList(r,i.id,i.item);break;case"pushItemToList":n.addItemToList(r,i.item)}},n.subscribe=function(e,n){var r=c(e);r.terminal&&!t.isPropBase(r.root)?o[r.key].push(n):!r.terminal&&t.isPropBase(r.root)?r.root.subscribe(r.rest,n):t.error("Cannot set a value to this pb",r)},n.listSubscribe=function(e,n){var r=c(e);r.terminal&&t.isPropList(r.root)?r.root.listSubscribe(n):!r.terminal&&t.isPropBase(r.root)?r.root.listSubscribe(r.rest,n):t.error("Cannot set a value to this pb",r)},n.resetListSubscribers=function(e){var n=c(e);n.terminal&&t.isPropList(n.root)?n.root.resetListSubscribers(callback):!n.terminal&&t.isPropBase(n.root)?n.root.resetListSubscribers(n.rest,callback):t.error("Cannot set a value to this pb",n)},n.sag=function(e,t){n.subscribe(e,t),t(n.getValue(e),null)};var c=function(e){var t=e.split("."),n=t[0],r=n.match(/\[.+\]/),s=null,o=null,u=null,a=t.length===1;r!==null?(s=r[0],n=n.substr(0,n.length-s.length),s=s.substr(1,s.length-2),u=i[n],isNaN(parseInt(s,10))?o=u.getAtId(s):o=u.getAtIndex(parseInt(s,10))):o=i[t[0]],t.shift();var f={root:o,key:n,rest:t.join("."),terminal:a};return f};n.setParentList=function(e,t){u=e,a=t}}return n}),define("prop/propertylist",["prop/propertybase","utils/media","prop/proputils"],function(e,t,n){function r(e){var t=this,r=null,i=[],s={},o=!1,u=null,a=[],f;t.isPropList=!0,t.setRootObject=function(e){var n,r;typeof e[0]=="undefined"&&(o=!0);if(o)for(n in e)e.hasOwnProperty(n)&&t.addItem(n,e[n]);else for(r=0;r<e.length;r++)t.pushItem(e[r])},t.resetKeyInAll=function(e){c(function(t,n){n.resetValue(e)})};var l=function(i,s){var o;if(n.isPropBase(i))o=i;else{var u=new e;u.setRootObject(i),o=u}r!==null&&o.linkToComponent(r),o.setParentList(t,s),o.setBasePath(f);for(var l=0;l<a.length;l++)a[l].init(s,o.getRootObject());return o};t.addItem=function(e,t){o=!0;var n=l(t,e);return s[e]=n,n},t.pushItem=function(e){o=!1;var t=l(e,i.length);return i.push(t),t},t.getRootObject=function(){var e,t,n;if(o){n={};for(e in s)s.hasOwnProperty(e)&&(n[e]=s[e].getRootObject())}else{n=[];for(t=0;t<i.length;t++)n.push(i[t].getRootObject())}return n},t.getAtIndex=function(e){return i[e]},t.getAtId=function(e){return s[e]},t.getListItem=function(e){return s?s[e]:i[e]},t.checkHasKey=function(e){return s?s.hasOwnProperty(e):i.length<parseInt(e,10)},t.linkToComponent=function(e){r=e,c(function(t,n){n.linkToComponent(e)})},t.listSubscribe=function(e){a.push(e),c(function(t,n){e.init(t,n.getRootObject())})},t.resetListSubscribers=function(){a=[]},t.onItemUpdated=function(e,t){var n;if(a.length===0)return!1;for(n=0;n<a.length;n++)a[n].update(e,t.getRootObject());return!0};var c=function(e){var t,n;if(o)for(t in s)s.hasOwnProperty(t)&&e(t,s[t]);else for(n=0;n<i.length;n++)e(n,i[n])};t.setParentProp=function(e){u=e},t.setBasePath=function(e){f=e},t.getBasePath=function(){return f}}return r}),define("prop/properties",["prop/propertybase","prop/propertylist"],function(e,t){function r(){e.call(this),this.register({})}function i(){e.call(this),this.register({dataType:"auto",numberFormatFlag:!0,numberHumanize:!1,numberPrefix:null,numberSuffix:null,numberThousandsSeparator:",",numberDecimalsSeparator:".",numberForceDecimals:!1,numberDecimalPoints:2})}function s(){e.call(this),this.register({core:new c,events:new t(f),children:new t(r),data:new o})}function o(){e.call(this),this.register({})}function u(){o.call(this),this.register({rowDataSource:new a})}function a(){e.call(this),this.register({url:null})}function f(){e.call(this),this.register({type:"",affectedComponents:new t(l),url:""})}function l(){e.call(this),this.register({id:null})}function c(){e.call(this),this.register({caption:"",absolutePosition:!1,dimensions:new h,isChild:!1,location:new p,zoomable:!0})}function h(){e.call(this),this.register({w:null,h:null})}function p(){e.call(this),this.register({x:null,y:null,w:null,h:null})}function d(){s.call(this),this.register({kpi:new v})}function v(){e.call(this),this.register({display:new m})}function m(){i.call(this),this.register({dataType:"number",value:0,indicator:null,indicatorColor:"green",caption:"",subcaption:"",target:null,gaugeType:"circular",gaugeFlag:!1,sparkFlag:!1,ranges:new t(g),maximum:null,minimum:null,type:null})}function g(){e.call(this),this.register({start:null,end:null,color:null})}function y(){s.call(this),this.register({chart:new b})}function b(){e.call(this),this.register({series:new t(E),yaxis:new w,showLegendFlag:!0})}function w(){i.call(this),this.register({dataType:"number",axisName:"",minValue:null,maxValue:null,adaptiveMinimumValueFlag:!1})}function E(){i.call(this),this.register({dataType:"number",seriesName:"",seriesDisplayType:"column",seriesColor:"auto",seriesHiddenFlag:!1,includeInLegendFlag:!0})}function S(){s.call(this),this.register({gauge:new x})}function x(){i.call(this),this.register({caption:"",subcaption:"",min:0,max:100,value:50})}function T(){s.call(this),this.register({table:new N,data:new u})}function N(){e.call(this),this.register({columns:new t(C),rowsPerPage:10,currentPageNumber:0,serverPaginationFlag:!1,useRemoteDataSourceFlag:!1,detailViewFlag:!1})}function C(){i.call(this),this.register({name:"",columnType:"text",sortable:!1,sortActiveFlag:!1,sortDirection:"descending",cellWidth:null,hideColumnOnSmallDevices:!1})}function k(){s.call(this),this.register({filter:new L})}function L(){e.call(this),this.register({items:new t(A)})}function A(){e.call(this),this.register({type:"",label:"",list:"string",options:"",range:"",value:""})}function O(){s.call(this),this.register({kpitable:new M})}function M(){e.call(this),this.register({items:new t(m)})}function _(){e.call(this),this.register({caption:"",value:""})}function D(){s.call(this),this.register({children:new t(H),tabbed:new P})}function P(){e.call(this),this.register({activeIndex:0})}function H(){e.call(this),this.register({name:"",componentId:""})}var n={};return n.NullProperties=r,n.DataColumnProperties=i,n.ComponentProperties=s,n.ComponentDataProperties=o,n.TableDataProperties=u,n.RemoteDataSource=a,n.ComponentEventProperties=f,n.AffectedComponentProperties=l,n.ComponentCoreProperties=c,n.ComponentDimensionProperties=h,n.ComponentLocationProperties=p,n.KPIComponentProperties=d,n.KPIProperties=v,n.KPIDisplayProperties=m,n.RFRangeProperties=g,n.ChartComponentProperties=y,n.ChartProperties=b,n.ChartAxisProperties=w,n.ChartSeriesProperties=E,n.GaugeComponentProperties=S,n.GaugeProperties=x,n.TableComponentProperties=T,n.TableProperties=N,n.TableColumnProperties=C,n.FilterComponentProperties=k,n.FilterProperties=L,n.FilterItemProperties=A,n.KPITableComponentProperties=O,n.KPITableProperties=M,n.KPITableItem=_,n.TabbedComponentProperties=D,n.TabbedCoreProperties=P,n.TabItemProperties=H,n}),define("components/kpicomponentcore",["components/component","renderers/kpirenderer","prop/properties"],function(e,t,n){function r(){e.apply(this,Array.prototype.slice.call(arguments));var t=this,r={},i,s=t._raw,o,u=t.pro,a={};i={setValue:function(e){u.pb.setValue("kpi.display.value",e)}},o={overriddenDimensions:{sm:{w:12,h:4},xs:{w:12,h:3}}};var f=function(){u.pb=new n.KPIComponentProperties};s._registerClassName("KPIComponent"),s._registerPublic(r,i),s._registerProtected(a,o),f()}return r}),define("components/kpicomponent",["components/kpicomponentcore","renderers/kpirenderer","prop/properties"],function(e,t,n){function r(){e.apply(this,Array.prototype.slice.call(arguments));var n=this,r={},i,s=n._raw,o,u=n.pro,a={};i={setSparkValues:function(e,t){u.pb.setValue("kpi.display.sparkFlag",!0),n.ds.addColumn("sparkValue",t),n.ds.addColumn("sparkLabel",e)}},o={init:function(){a.init()},createRenderer:function(){var e=n.ds.getRawData(),r=_.pluck(e,"sparkLabel"),i=_.pluck(e,"sparkValue");u.renderer=new t,u.renderer.setConfig({labels:r,values:i}),u.renderer.pro.bind("click",function(e){u.handleComponentEvent("click",e)})},renderCore:function(){u.renderer.renderCore()},resizeCore:function(e,t){u.renderer.resizeCore(e,t)},addListeners:function(){a.addListeners(),u.pushListeners([])}},s._registerClassName("KPIComponent"),s._registerPublic(r,i),s._registerProtected(a,o)}return r}),define("components/gaugecomponent",["components/kpicomponentcore","renderers/kpirenderer","prop/properties"],function(e,t,n){function r(){e.apply(this,Array.prototype.slice.call(arguments));var r=this,i={},s,o=r._raw,u,a=r.pro,f={};s={setLimits:function(e,t){a.pb.setValue("kpi.display.minimum",e),a.pb.setValue("kpi.display.maximum",t)}},u={init:function(){f.init()},createRenderer:function(){a.renderer=new t,a.renderer.setConfig({gaugeFlag:!0,limits:{min:a.pb.getValue("kpi.display.minimum"),max:a.pb.getValue("kpi.display.maximum")}})},renderCore:function(){a.renderer.renderCore()},resizeCore:function(e,t){a.renderer.resizeCore(e,t)},addListeners:function(){f.addListeners(),a.pushListeners([])}};var l=function(){a.pb=new n.KPIComponentProperties,a.pb.setValue("kpi.display.gaugeFlag",!0)};o._registerClassName("GaugeComponent"),o._registerPublic(i,s),o._registerProtected(f,u),l()}return r}),define("renderers/table/sortingrenderer",[],function(){var e=function(e){var t=this,n=function(){console.log("New private function")};return{initSorting:function(){},addSortListeners:function(){t.managedBind(t.$core.find(".rfTable > thead > tr > th"),"click",function(e){e.preventDefault(),t.pro.trigger("sortColumn",$(this).data("id"))})}}};return e}),define("renderers/table/paginationrenderer",["utils/media"],function(e){var t=function(t){var n=this,r;return{pagination:{init:function(){r=n.$core.find(".rfPaginationContainer")},setData:function(t){var n=e.getCurrentMedia(),i=n==="sm"||n==="xs";r.html(window.JST.table_paginator({totalPages:t.totalPages,activePage:t.activePage,startPage:t.startPage,lastPage:t.lastPage,media:i}))},addDomListeners:function(){n.managedBind(n.$core.find(".rfPrevButton"),"click",function(e){e.preventDefault(),n.pro.trigger("prevPage")}),n.managedBind(n.$core.find(".rfNextButton"),"click",function(e){e.preventDefault(),n.pro.trigger("nextPage")}),n.managedBind(n.$core.find(".rfPageNumber"),"click",function(e){e.preventDefault();var t=$(this).data("page-number");n.pro.trigger("jumpToPage",t)})}}}};return t}),define("renderers/tablerenderer",["renderers/componentrenderer","renderers/table/sortingrenderer","renderers/table/paginationrenderer","utils/numberformatter"],function(e,t,n,r){function i(){e.call(this);var i=this,s={},o,u=i._raw,a,f=i.pro,l={},c,h,p;o={renderCore:function(){i.$core.html(window.JST.table_base({columns:i.props.table.columns})),i.pagination.init(),p=i.$core.find(".rfTableContainer"),c=p.find(".rfTableBody"),h=p.find(".rfTableHeader"),m()},resizeCore:function(e,t){g(t),b()},setTableData:function(e){d(e),i.pagination.setData(e),b(),y(),i.pagination.addDomListeners()},dispose:function(){s.dispose()}};var d=function(e){c.html(window.JST.table_body({columns:i.props.table.columns,data:v(e)}))},v=function(e){var t=_.cloneDeep(e),n=null,s=i.props.table.columns;for(var o in s)if(s.hasOwnProperty(o)){var u=new r;u.setConfig(s[o]),n=u.formatColumn(t,o)}return n},m=function(){i.pagination.addDomListeners()},g=function(e){e=e?e:i.$core.height();var t=e-i.$core.find(".rfPaginationContainer").height(),n=h.height();p.height(t),c.height(t-n),c.height()},y=function(){var e=i.$core.find(".rfTableBody"),t=i.$core.find(".rfTableHeader");e.on("scroll",function(){t.css({"margin-left":-this.scrollLeft})})},b=function(){var e=i.$core.find("tbody"),t=i.$core.find(".rfTableHeader > table"),n=i.$core.find(".rfTableBody > table"),r=i.$core.find(".rfTableHeader > table"),s=i.$core.find("th"),o=i.$core.find(".rfTableBody"),u=null,a=o.width();firstRowTds=i.$core.find(".rfTableBody > table > tbody > tr").first().find("td"),$tp=null,$tdWidth=0,s.css("width","auto"),r.css({width:"auto"}),n.css({width:"auto"}),t.css({width:"auto"}),firstRowTds.each(function(e,t){$tp=$("<p/>").text($(s[e]).text()).addClass("canaryTH"),$(t).append($tp)}),u<a&&(u=a),r.css({width:u}),n.css({width:u}),t.css({width:u}),e.css({width:u}),e.find("tr").first().find("td").each(function(e,t){t=$(t),$(s[e]).find("p").width(t.width()*.9),t.find("p").width(t.width()*.9)}),e.find(".canaryTH").remove(),o.scrollTop(0)};a={},u._registerClassName("TableRenderer"),u._registerPublic(s,o),u._registerProtected(l,a),u.registerPublicExtensions(n),u.registerPublicExtensions(t)}return i}),define("components/table/sortingcore",[],function(){var e=function(e){var t=this;return{sortColumn:function(t){e.query.sort(t).triggerUpdates()},initSortingRender:function(){e.renderer.pro.bind("sortColumn",t.pro.sortColumn)}}};return e}),define("components/table/paginationcore",[],function(){var e=function(e){var t=this,n={pagination:{maxPages:5}},r=function(t){var n=e.pb.getValue("table.rowsPerPage");e.query.limit(t*n,n).triggerUpdates()},i=function(){var t=e.pb.getValue("table.currentPageNumber");return t++,u(t)?t<o()?0:Math.abs(o()-t)+1:a()-o()},s=function(){return i()+(o()-1)},o=function(){var e=n.pagination.maxPages;return a()<e?a():e},u=function(e){return e<a()},a=function(){return totalPages=t.ds.getRawData().length/e.pb.getValue("table.rowsPerPage"),Math.ceil(totalPages)};return{pagination:{initRender:function(){e.renderer.pro.bind("nextPage",t.pro.pagination.nextPage),e.renderer.pro.bind("prevPage",t.pro.pagination.previousPage),e.renderer.pro.bind("jumpToPage",t.pro.pagination.jumpToPage),r(e.pb.getValue("table.currentPageNumber"))},addListeners:function(){e.pushListeners([{path:"table.currentPageNumber",callback:r}])},previousPage:function(){var t=e.pb.getValue("table.currentPageNumber");t!==0&&(t--,e.pb.setValue("table.currentPageNumber",t))},nextPage:function(){var t=e.pb.getValue("table.currentPageNumber");t!==a()-1&&(t++,e.pb.setValue("table.currentPageNumber",t))},jumpToPage:function(t){u(t)&&(e.pb.setValue("table.currentPageNumber",t),e.query.subscribe(e.onDataReady))},extendData:function(t){return _.extend(t,{totalPages:a(),activePage:e.pb.getValue("table.currentPageNumber"),startPage:i(),lastPage:s()})}}}};return e}),define("messages/errormessages",[],function(){return{1e3:"Please add a series with addSeries",1001:"Please set the labels with setLabels",1002:"Please lock component before unlocking it",1003:"Please set dimension with setDimensions",1004:"Please add column with addColumn"}}),define("utils/errorutils",["messages/errormessages"],function(e){var t={getError:function(t){return e.hasOwnProperty(t)?e[t]:"Error: "+t}};return t}),define("components/tablecomponent",["components/component","renderers/tablerenderer","prop/properties","components/table/sortingcore","components/table/paginationcore","utils/errorutils"],function(e,t,n,r,i,s){function o(){e.apply(this,Array.prototype.slice.call(arguments));var o=this,u={},a,f=o._raw,l,c=o.pro,h={};a={addRow:function(e){o.ds.pushRow(e)},addColumn:function(e,t,n){n=n?n:{},c.aspect.provide("addColumn"),n.name=t,c.pb.addItemToList("table.columns",e,n)},setRowsPerPage:function(e){e=+e,_.isNumber(e)&&!_.isNaN(e)?c.pb.setValue("table.rowsPerPage",e):console.error("Error in `setRowsPerPage`, expected a number and found "+e+". Defaulting it to "+c.pb.getValue("table.rowsPerPage"))},addMultipleRows:function(e){for(var t=-1;++t<e.length;)o.ds.pushRow(e[t])},clearRows:function(){o.ds.clearRows()}},l={init:function(){h.init()},validate:function(){h.validate(),c.errMsg=c.aspect.require({addColumn:s.getError("1004")}),c.errMsg.length>0&&c.showError(c.errMsg)},createRenderer:function(){c.renderer=new t},query:o.ds.createQuery(),renderCore:function(){c.renderer.renderCore(),c.query.subscribe(c.onDataReady),c.pagination.initRender()},resizeCore:function(e,t){c.renderer.resizeCore(e,t)},addListeners:function(){h.addListeners(),c.pushListeners([]),c.pagination.addListeners()},onDataReady:function(e){var t={data:e};t=c.pagination.extendData(e),c.renderer.setTableData(t)}};var p=function(){c.pb=new n.TableComponentProperties};f._registerClassName("TableComponent"),f._registerPublic(u,a),f._registerProtected(h,l),f.registerProtectedExtensions(r),f.registerProtectedExtensions(i),p()}return o}),define("graphics/rfpiechart",["graphics/rftooltip","constants/componentconstants","d3"],function(e,t,n){var r=function(){var r=this,i=null,s=null,o=null,u=null,a=null,f=null,l=null,c=!1,h=t.pieChart.innerRadiusDistance,p=t.pieChart.profile,d=t.pieChart.animationDuration,v=t.pieChart.padding,m=new e,g=!1;r.setData=function(e,t,n){i=e,s=t,o=n},r.setAnimation=function(e){g=!e},r.updateData=function(e,t,n){r.setData(e,t,n),E()},r.renderTo=function(e,t,n){a=t,f=n,u=e,y()},r.resizeTo=function(e,t){a=e,f=t,w(),E(),g=t?!0:g};var y=function(){u.empty(),b(),w(),E()};r.dispose=function(){l.remove()};var b=function(){l=n.select(u[0]).append("svg"),m.setCore(l)},w=function(){l.attr("width",a),l.attr("height",f)},E=function(){function H(e){e.innerRadius=0;var t=n.interpolate({startAngle:0,endAngle:0},e);return function(e){return r(t(e))}}function B(e){return e.x<a/2&&(e.x-=e.width),e}function j(e,t){var n=B(_.clone(e)),r=B(_.clone(t));return n.x<r.x+r.width&&n.x+n.width>r.x&&n.y<r.y+r.height&&n.y+n.height>r.y?!0:!1}function F(e,t,n){var r=0,i,s,o,u=_.clone(t);while(j(e,u))i=r*Math.PI/180,s=Math.cos(i)*(u.x-n.x)-Math.sin(i)*(u.y-n.y)+n.x,o=Math.sin(i)*(u.x-n.x)+Math.cos(i)*(u.y-n.y)+n.y,u.x=s,u.y=o,r++;if(r>8){r=0,u=_.clone(t);while(j(e,u))i=r*Math.PI/180,s=Math.cos(i)*(u.x-n.x)-Math.sin(i)*(u.y-n.y)+n.x,o=Math.sin(i)*(u.x-n.x)+Math.cos(i)*(u.y-n.y)+n.y,u.x=s,u.y=o,r--,console.log("i = "+r),console.log(u)}return u}function I(e){var t=a/2,n=f/2;for(var r=0;r<x.length;r++)j(e,x[r])&&(e=F(x[r],e,{x:t,y:n}));return e}var e=null,t=null,r=null,p=null,y=null,b=null,w=null,E=null,S=null,x=[],T=Math.min(a,f),N=12,C=0,k=10,L="md",A=L==="sm"||L==="xs";for(var O=-1;++O<i.length;){var M=Array.prototype.slice.call(i[O],0,N).join("")+" : "+s[O],D=l.append("text").text(M).attr("style","font-size: 11px;");C=_.max([D.node().getBBox().width,C]),D.remove()}l.selectAll("*").remove(),A?e=T/2-k:e=T/2-T*.1,S=e+e*.1;if(!A&&S+C>a/2){var P=S+C-a/2+10+v;e-=P,S=e+e*.1}t=c?e-h:0,l.append("g"),r=n.svg.arc().outerRadius(A?e:e-10).innerRadius(t),p=n.layout.pie().sort(null).value(function(e){return e}),y=l.append("g").attr("class","piecan").attr("transform","translate("+a/2+","+f/2+")"),b=y.selectAll(".arc").data(p(s)).enter().append("g").attr("class","arc"),w=b.append("path").attr("d",r).attr("data-label",function(e,t){return i[t]}).attr("data-displayValue",function(e,t){return o[t]}).attr("class",function(e,t){return"chart-color-"+(t+1)}),w.transition().duration(g?0:d).attrTween("d",H),Modernizr.touch?w.on("touchstart",function(){showTooltip();var e=n.mouse(this),t=n.select(this),r=t.node().getBBox().x,i=t.node().getBBox().y,s=t.attr("data-label"),o=t.attr("data-displayValue"),u=t.attr("fill");m.update(o,s,u,a/2+e[0],f/2+e[1])}):w.on("mouseenter",function(){var e=n.event,t=e.pageX-u.offset().left,r=e.pageY-u.offset().top,i=n.select(this),s=i.attr("data-label"),o=i.attr("data-displayValue"),a=i.attr("fill");m.show(),m.update(o,s+" : ",a,t,r)}).on("mousemove",function(){var e=n.event,t=e.pageX-u.offset().left,r=e.pageY-u.offset().top,i=n.select(this),s=i.attr("data-label"),o=i.attr("data-displayValue"),a=i.attr("fill");m.update(o,s+" : ",a,t,r)}).on("mouseleave",function(){m.hide()}),E=b.append("text").attr("transform",function(e,t){var n=r.centroid(e),s=n[0],o=n[1],u=s-a/2,c=o-f/2,h=Math.atan2(o,s)*180/Math.PI,p=Math.sqrt(s*s+o*o),d=s/p*S,v=o/p*S,m=i[t]+" : "+e.data;h=s<0?h-180:h;if(!A){var g=l.append("text").text(m).attr("style","font-size: 11px;"),y=g.node().getBBox().width+15,b=g.node().getBBox().height,w={x:d+a/2,y:v+f/2,width:y,height:b,text:i[t]+" : "+e.data,idx:t},E=I(w);return x.push(E),g.remove(),"translate("+(E.x-a/2)+","+(E.y-f/2)+")"}return"translate("+s+","+o+")rotate("+h+")"}).attr("dy","0.3em").attr("style","font-size: 11px;").style("text-anchor",function(e,t){if(!A){var n=r.centroid(e);return x[t].x<a/2?"end":"start"}return"middle"}).style("pointer-events","none").attr("fill",function(){return A?"#FFF":"#666"}).text(function(e,t){return A?i[t]:i[t]+" : "+e.data});if(!A){E.attr("dx",function(e,t){return x[t].x<a/2?-15:15});var q=b.append("line").attr("class","line1").attr("x1",function(e,t){return x[t].x-a/2}).attr("y1",function(e,t){return x[t].y-f/2}).attr("x2",function(e,t){var n=x[t].x-a/2;return n<0?n-10:n+10}).attr("y2",function(e,t){return x[t].y-f/2}).attr("stroke","black"),R=b.append("line").attr("class","line2").attr("x1",function(e,t){return x[t].x-a/2}).attr("y1",function(e,t){return x[t].y-f/2}).attr("x2",function(t,n){var i=r.centroid(t),s=i[0],o=i[1],u=Math.sqrt(s*s+o*o),a=s/u*(e-10),f=o/u*(e-10);return a}).attr("y2",function(t,n){var i=r.centroid(t),s=i[0],o=i[1],u=Math.sqrt(s*s+o*o),a=s/u*(e-10),f=o/u*(e-10);return f}).attr("stroke","black")}},S=function(e,t){return"translate("+e+","+t+")"}};return r}),define("renderers/chartrenderer",["renderers/componentrenderer","graphics/rfchart","graphics/rfpiechart","graphics/wrapgenius"],function(e,t,n,r){function i(){e.call(this);var i=this,s={},o,u=i._raw,a,f=i.pro,l={},c,h,p,d,v,m={},g=!1;o={setData:function(e){h=e.labels,p=e.data,d=e.series,v=e.displayValues},renderCore:function(){var e=[],t=[],n=[],s=0;for(s=0;s<h.length;s++)r.add(h[s],i.$core);i.$core.html(window.JST.chart_base({series:d})),f.$chartCore=i.$core.find(".chartCore"),f.$legendContainer=i.$core.find(".rfLegendContainer"),y();for(s=0;s<d.length;s++)d[s].seriesHiddenFlag||(e.push(d[s]),t.push(p[s]),n.push(v[s]));w(h,t,e,n),f.chart.renderTo(f.$chartCore,0,0),g=!0,b()},resizeCore:function(e,t){var n=t;n>0&&(n=t-f.$legendContainer.height(),f.chart.setAnimation(g),f.chart.resizeTo(e,n),g=!1)}},a={$chartCore:null,$legendContainer:null,chart:null};var y=function(){for(var e=-1;++e<d.length;)m[d[e].key]=d[e].seriesHiddenFlag;f.$legendContainer.find(".rfLegendKey").on("click",function(){var e=$(this).data("key");if(_.filter(m,function(e){return!e}).length<=1&&!m[e])return;m[e]=!m[e],m[e]?$(this).addClass("disabled"):$(this).removeClass("disabled"),f.trigger("legendClick",{key:e,value:m[e]})})},b=function(){f.chart.onItemClicked(function(e){f.trigger("itemClick",e)})},w=function(e,r,s,o){s[0].displayType==="pie"?(f.chart=new n,f.chart.setData(e,r[0],o[0])):(f.chart=new t,f.chart.setData(e,r,s,o),f.chart.setYAxisProperties(i.props.chart.yaxis))};u._registerClassName("ComponentRenderer"),u._registerPublic(s,o),u._registerProtected(l,a)}return i}),define("components/chartcomponent",["components/component","renderers/chartrenderer","prop/properties","utils/numberformatter","utils/errorutils","utils/assert"],function(e,t,n,r,i,s){function o(){e.apply(this,Array.prototype.slice.call(arguments));var o=this,u={},a,f=o._raw,l,c=o.pro,h={},p=[],d;a={addSeries:function(e,t,n,r){r=r?r:{},c.aspect.provide("series"),s.isString(e,"seriesId","warn",o),s.isString(t,"seriesName","warn",o),s.isArray(n,"seriesData","error",o),r.seriesName=t,c.pb.addItemToList("chart.series",e,r),o.ds.addColumn(e,n)},setPieValues:function(e,t){t=t||{},o.addSeries("pie0","Pie",e,_.extend(t,{seriesDisplayType:"pie"}))},updateSeries:function(e,t){o.ds.addColumn(e,t),o.pro.redraw()},setLabels:function(e){c.aspect.provide("labels"),s.isArray(e,"labelArray","error",o),o.ds.addColumn("rfLabels",e)},setYAxis:function(e,t){t=t?t:{},t.axisName=e,c.pb.setObjectAtPath("chart.yaxis",t)},onItemClick:function(e){c.renderer?c.renderer.pro.bind("itemClick",e):d=e}},l={init:function(){h.init()},validate:function(){h.validate(),c.errMsg=c.aspect.require({series:i.getError("1000"),labels:i.getError("1001")}),c.errMsg.length>0&&c.showError(c.errMsg)},createRenderer:function(){c.renderer=new t,c.renderer.pro.bind("legendClick",function(e){c.pb.setValue("chart.series["+e.key+"].seriesHiddenFlag",e.value)}),d&&c.renderer.pro.bind("itemClick",d),c.renderer.pro.bind("itemClick",function(e){c.handleComponentEvent("itemClick",e)})},renderCore:function(){var e=c.pb.getObjectAtPath("chart.series"),t=o.ds.getRawData(),n=_.pluck(t,"rfLabels"),i=_.map(e,function(e,n){return _.pluck(t,n)}),s=1,u=_.map(e,function(e,t,n){return{color:"chart-color-"+s++,key:t,seriesName:e.seriesName,seriesHiddenFlag:e.seriesHiddenFlag,displayType:e.seriesDisplayType}}),a=_.map(e,function(e,n){var i=_.pluck(t,n),s=new r;return s.setConfig(e),_.map(i,function(e){return s.formatValue(e)})});c.renderer.setData({labels:n,data:i,series:u,displayValues:a}),c.renderer.renderCore()},resizeCore:function(e,t){c.renderer.resizeCore(e,t)},addListeners:function(){h.addListeners(),c.pushListeners([])}};var v=function(){c.pb=new n.ChartComponentProperties},m=function(){p=_.map([1,2,3,4,5],function(e){return rf.utils.getColor("cs-"+e)})};f._registerClassName("ChartComponent"),f._registerPublic(u,a),f._registerProtected(h,l),v()}return o}),define("utils/datepicker",[],function(){var e=function(e){function d(e,t){return(new Date(t,e+1,0)).getDate()}var t=this,n=e,r=n.core||$("body"),i=e.scrollable||$("body"),s=$(window.JST.date_picker({})),o=s.find(".title"),u=s.find("tbody"),a=rf.globals.dbRegistry.getDefaultDashboard()._getNinjaDiv(),f=new Date,l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=["January","February","March","April","May","June","July","August","September","October","November","December"],h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],p=!1;f=r.val()?new Date(r.val()):f,f=f==="Invalid Date"?new Date:f,a.append(s),s.hide();var v=function(){var e,t,n,r,i,a,h,p;o.text(c[f.getMonth()]+" "+f.getFullYear()),e=(new Date("1 "+l[f.getMonth()]+" "+f.getFullYear())).getDay(),t=d(f.getMonth(),f.getFullYear()),n=Math.ceil((t+e)/7),u.empty();for(r=0;r<n;r++)u.append($("<tr/>"));i=u.find("tr");for(r=0;r<7*n;r++)a=Math.floor(r/7),h=$("<td/>"),p=r-e+1,p>0&&p<=t&&h.append($("<p/>").text(r-e+1)).addClass("date"),f.getDate()===p&&h.addClass("selected"),$(i[a]).append(h);m(),s.find("td.date").on("mousedown",function(e){var t=$(this).text();f=new Date(t+" "+l[f.getMonth()]+" "+f.getFullYear()),s.find("td.date").removeClass("selected"),$(this).addClass("selected"),y()})},m=function(){s.css({position:"absolute",top:r.offset().top+r.height()+2+r.scrollTop(),left:r.offset().left})},g=function(e){e?(m(),s.show()):s.hide(),p=e},y=function(){r.val(b(f,"Y-m-d")),r.trigger("keyup")},b=function(e,t){var n=t;return n=n.replace(/D/g,h[e.getDay()]),n=n.replace(/d/g,e.getDate()),n=n.replace(/m/g,e.getMonth()+1),n=n.replace(/M/g,l[e.getMonth()]).replace(/y/g,e.getYear()).replace(/Y/g,e.getFullYear()),n};v(),s.find(".leftArrow").on("click",function(){var e=f.getMonth()-1,t=f.getFullYear();e<0&&(t--,e=11),f=new Date(f.getDate()+" "+l[e]+" "+t),v()}),s.find(".rightArrow").on("click",function(){var e=f.getMonth()+1,t=f.getFullYear();e>11&&(t++,e=0),f=new Date(f.getDate()+" "+l[e]+" "+t),v()}),s.on("mousedown",function(e){e.preventDefault()}),r.on("focus.datepicker",function(){g(!0)}),i.on("scroll.datepicker",function(){m()}),r.on("blur.datepicker",function(){g(!1)})};return e}),define("renderers/filterrenderer",["renderers/componentrenderer","graphics/rfkpi","utils/datepicker"],function(e,t,n){function r(){e.call(this);var t=this,r={},s,o=t._raw,u,a=t.pro,f={},l,c,h,p,d,v,m={},g=null,y=null;s={setConfig:function(e){m=e.defaultValues||{}},renderCore:function(){t.$core.html(window.JST.filter_base({})),y=t.$core.find(".filterContainer"),g=t.$core.find(".filterItems");var e=t.props.filter.items;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];r.id=n,b(r);var i=$(window.JST.filter_item(r));g.append(i),w(r,i)}var s=t.$core.find("#submit");s.on("click",function(){obj=t.getAllInputValues(),a.trigger("submit",obj)})},resizeCore:function(e,t){},getInputValue:function(e){var n=t.props.filter.items[e],r=t.$core.find(".filterItems");if(!n){console.error("Filter item with id "+e+" was not found!");return}if(n.type==="text")return r.find("[data-key="+n.id+"]").val();if(n.type==="select"){var i=r.find("[data-key="+n.id+"]")[0].selectedIndex;return{text:n.list[i],index:i}}if(n.type==="multiSelect"){var s=r.find("[data-key="+n.id+"] option"),o=[],u=[];for(var a=0;a<s.length;a++)s[a].selected&&(o.push(a),u.push(n.list[a]));return{text:u,index:o}}if(n.type==="date")return new Date(r.find("[data-key="+n.id+"]").val());if(n.type==="dateRange")return[new Date(r.find("[data-key="+n.id+"].rangeStart").val()),new Date(r.find("[data-key="+n.id+"].rangeEnd").val())];if(n.type==="numericRange")return[+r.find("[data-key="+n.id+"].rangeStart").val(),+r.find("[data-key="+n.id+"].rangeEnd").val()];if(n.type==="checkbox")return r.find("[data-key="+n.id+"]").is(":checked")},getAllInputValues:function(){var e=t.props.filter.items,n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t.getInputValue(r));return n}},u={};var b=function(e){var t=[],n=m[e.id];e.options=e.options||{};if(e.type==="text")e.value=n||"";else if(e.type==="select")e.multiple=!1,e.options=n?{defaultSelectedIndex:n}:e.options||{defaultSelectedIndex:0};else if(e.type==="multiSelect"){e.multiple=!0,e.options.defaultSelectedOptions=n||e.options.defaultSelectedOptions||[];if(e.options&&e.options.defaultSelectedOptions.length>1){for(i=0;i<e.list.length;i++)t[i]=!1;for(i=0;i<e.options.defaultSelectedOptions.length;i++)t[e.options.defaultSelectedOptions[i]]=!0}e.isOptionSelected=t}else e.type==="date"?(e.touch=Modernizr.touch,e.options.defaultDate=n||e.options.defaultDate||E()):e.type==="dateRange"?(e.touch=Modernizr.touch,e.options.defaultStartDate=n?n.defaultStartDate:e.options.defaultStartDate||S(),e.options.defaultEndDate=n?n.defaultEndDate:e.options.defaultEndDate||E()):e.type==="numericRange"?e.options.values=n?[n.start,n.end]:e.options.values||[0,100]:e.type==="checkbox"&&(e.options.value=n)},w=function(e,t){if(e.type==="text")t.on("keyup",function(){m[e.id]=t.find("input").val(),a.trigger("change",m)});else if(e.type==="select")t.on("change",function(){m[e.id]=t.find("select")[0].selectedIndex,a.trigger("change",m)});else if(e.type==="multiSelect")t.on("change",function(){var t=$(this).find("option"),n=[];for(var r=0;r<t.length;r++)t[r].selected&&n.push(r);m[e.id]=n,a.trigger("change",m)});else if(e.type==="date"){var n=t.find("input[data-key="+e.id+"]");x(n),t.on("keyup",function(){m[e.id]=t.find("input").val(),a.trigger("change",m)})}else if(e.type==="dateRange"){var r=t.find("input[data-key="+e.id+"].rangeStart"),i=t.find("input[data-key="+e.id+"].rangeEnd");x(r),x(i),t.on("keyup",function(){m[e.id]={defaultStartDate:t.find(".rangeStart").val(),defaultEndDate:t.find(".rangeEnd").val()},a.trigger("change",m)})}else e.type==="numericRange"?t.on("keyup",function(){m[e.id]={start:t.find(".rangeStart").val(),end:t.find(".rangeEnd").val()},a.trigger("change",m)}):e.type==="checkbox"&&t.on("change",function(){m[e.id]=t.find("input").is(":checked"),a.trigger("change",m)})},E=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+(e.getDate()<10?"0":"")+e.getDate()},S=function(){var e=new Date(Date.now()-2592e6);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+(e.getDate()<10?"0":"")+e.getDate()},x=function(e){(!Modernizr.touch||!Modernizr.inputtypes)&&new n({core:e,scrollable:y})};o._registerClassName("ComponentRenderer"),o._registerPublic(r,s),o._registerProtected(f,u)}return r}),define("components/filtercomponent",["components/component","renderers/filterrenderer","prop/properties"],function(e,t,n){function r(){e.apply(this,Array.prototype.slice.call(arguments));var r=this,i={},s,o=r._raw,u,a=r.pro,f={},l;s={addTextFilter:function(e,t){var n={type:"text",label:t};a.pb.addItemToList("filter.items",e,n)},addSelectFilter:function(e,t,n,r){var i={type:"select",label:t,list:n,options:r};a.pb.addItemToList("filter.items",e,i)},addMultiSelectFilter:function(e,t,n,r){var i=_.extend(r,{defaultSelectedOptions:[]}),s={type:"multiSelect",label:t,list:n,options:i};a.pb.addItemToList("filter.items",e,s)},addDateFilter:function(e,t,n){var r={type:"date",label:t,options:n};a.pb.addItemToList("filter.items",e,r)},addDateRangeFilter:function(e,t,n){var r={type:"dateRange",label:t,options:n};a.pb.addItemToList("filter.items",e,r)},addNumericRangeFilter:function(e,t,n){var r={type:"numericRange",label:t,options:{values:n}};a.pb.addItemToList("filter.items",e,r)},addCheckboxFilter:function(e,t,n){var r={type:"checkbox",label:t,options:{value:n}};a.pb.addItemToList("filter.items",e,r)},onApplyClicked:function(e){a.renderer?a.renderer.pro.bind("submit",e):l=e},getAllInputValues:function(e){return a.renderer.getAllInputValues(e)}},u={init:function(){f.init()},createRenderer:function(){a.renderer=new t,a.renderer.setConfig({defaultValues:a.defaultValues}),a.renderer.pro.bind("change",c),l&&(a.renderer.pro.bind("submit",l),l=undefined)},renderCore:function(){a.renderer.renderCore()},resizeCore:function(e,t){a.renderer.resizeCore(e,t)},addListeners:function(){f.addListeners(),a.pushListeners([])},addCurrentValuesToPropBase:function(){},defaultValues:{}};var c=function(e){a.defaultValues=e},h=function(){a.pb=new n.FilterComponentProperties};o._registerClassName("FilterComponent"),o._registerPublic(i,s),o._registerProtected(f,u),h()}return r}),define("core/dashboard",["core/rfclass","utils/positionutils","utils/layoutmanager","helpers/mediahelper","constants/componentconstants","components/kpicomponent","components/gaugecomponent","components/tablecomponent","components/chartcomponent","components/filtercomponent"],function(e,t,n,r,i,s,o,u,a,f){function l(){e.call(this);var l=this,c={},h={},p=l._raw,d="",v,m=l.pro,g={},y=[],b=[],w,E,S,x,T=!0,N=0,C=i.dashboard.resizeDelay,k=[];h={setDashboardTitle:function(e){d=e},renderTo:function(e){w=e,w.css({"max-width":"1170px",margin:"0 auto"}),L(),O(),M()},addComponent:function(e){y.push(e),e.pro.linkToDashboard(l)},_makeTempDiv:function(){var e=$("<div/>");return S.append(e),e},_getNinjaDiv:function(){return x},removeComponent:function(e){var t=e.getID();_.remove(y,function(e){return e.getID()===t}),D()}},v={media:new r,_serializeComponents:function(){var e={components:[]};for(var t=-1;++t<y.length;){var n=y[t];e.components.push(n.pro._serializeComponent())}return e},_buildFromObject:function(e){var t=e.components;for(var n=-1;++n<t.length;){var r=t[n],i=H(r.type);i.pro._buildFromObject(r),l.addComponent(i)}},getComponentByID:function(e){return _.find(y,function(t){return t.getID()===e})}};var L=function(){for(var e=0;e<y.length;e++)y[e].pro.init()},A=function(){var e=function(e){e.removeClass("rf-lg"),e.removeClass("rf-md"),e.removeClass("rf-sm"),e.removeClass("rf-xs")},t=function(e){return e<480?"xs":e<768?"sm":e<978?"md":"lg"},n=t(N),r=w;return n!==m.media.getCurrentMedia()?(e(r),r.addClass("rf-"+n),m.media.setMedia(n),D(),!0):!1},O=function(){var e=new n;w.html(window.JST.dashboard_standalone({title:d})),E=w.find(".rfDashboardCore"),S=w.find(".rfDashboardHidden"),x=w.find(".rfDashboardNinja"),b=[];for(var r=0;r<y.length;r++){var s=$("<div/>",{"class":"rfComponentContainer"}),o=y[r].pro.pb.getObjectAtPath("core.location"),u=null,a=y[r],f=m.media.getCurrentMedia();if(f==="xs"||f==="sm")o=a.pro.overriddenDimensions[f];if(!_.isNumber(o.w)||!!_.isNaN(o.w)||!_.isNumber(o.h)||!!_.isNaN(o.h)||o.h===0||o.w===0)console.error("Error in `setDimensions`. Defaulting it"),o.w=i.dashboard.dimension.w,o.h=i.dashboard.dimension.h;if(T){var l=e.findEmptySpot(o.w,o.h);o.x=l.col,o.y=l.row}k[r]=o,u={left:t.unitsToPcString(o.x),width:t.unitsToPcString(o.w)},s.css(u),E.append(s),b.push(s),y[r].pro.setTargetContainer(s),y[r].pro.render()}},M=function(){var e=E.width();e!==N?(N=e,P(),_.defer(function(){_.delay(function(){N=E.width(),_.delay(M,C/2)},C/2)})):_.delay(M,C)},D=function(){O(),P()},P=function(){var e=E.width(),n=0,r={};if(A())return;for(var i=0;i<y.length;i++){var s=y[i],o=b[i],u=k[i];r={top:t.unitsToPixels(u.y,e),height:t.unitsToPixels(u.h,e)},o.css(r),s.pro.resize(o.width(),o.height()),n=_.max([n,r.top+r.height])}E.height(n)},H=function(e){if(e==="KPIComponent")return new s;if(e==="GaugeComponent")return new o;if(e==="TableComponent")return new u;if(e==="ChartComponent")return new a;if(e==="FilterComponent")return new f};p._registerClassName("Dashboard"),p._registerPublic(c,h),p._registerProtected(g,v)}return l}),define("helpers/standalonedashboard",["core/dashboard"],function(e){function t(t){var n=new e;t(n),rf.globals.dbRegistry.registerDashboard(n),n.renderTo($("#dbTarget"))}return t}),define("core/dbregistry",[],function(){var e={dashboard:null,registerDashboard:function(t){e.dashboard=t},getDefaultDashboard:function(){return e.dashboard}};return e}),function(){function e(e,t,n){n=(n||0)-1;for(var r=e?e.length:0;++n<r;)if(e[n]===t)return n;return-1}function t(t,n){var r=typeof n;if(t=t.l,"boolean"==r||null==n)return t[n]?0:-1;"number"!=r&&"string"!=r&&(r="object");var i="number"==r?n:y+n;return t=(t=t[r])&&t[i],"object"==r?t&&-1<e(t,n)?0:-1:t?0:-1}function n(e){var t=this.l,n=typeof e;if("boolean"==n||null==e)t[e]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?e:y+e,t=t[n]||(t[n]={});"object"==n?(t[r]||(t[r]=[])).push(e):t[r]=!0}}function r(e){return e.charCodeAt(0)}function i(e,t){var n=e.m,r=t.m;if(n!==r){if(n>r||typeof n=="undefined")return 1;if(n<r||typeof r=="undefined")return-1}return e.n-t.n}function s(e){var t=-1,r=e.length,i=e[0],s=e[0|r/2],o=e[r-1];if(i&&typeof i=="object"&&s&&typeof s=="object"&&o&&typeof o=="object")return!1;for(i=a(),i["false"]=i["null"]=i["true"]=i.undefined=!1,s=a(),s.k=e,s.l=i,s.push=n;++t<r;)s.push(e[t]);return s}function o(e){return"\\"+$[e]}function u(){return v.pop()||[]}function a(){return m.pop()||{k:null,l:null,m:null,"false":!1,n:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,"undefined":!1,o:null}}function f(){}function l(e){e.length=0,v.length<w&&v.push(e)}function c(e){var t=e.l;t&&c(t),e.k=e.l=e.m=e.object=e.number=e.string=e.o=null,m.length<w&&m.push(e)}function h(e,t,n){t||(t=0),typeof n=="undefined"&&(n=e?e.length:0);var r=-1;n=n-t||0;for(var i=Array(0>n?0:n);++r<n;)i[r]=e[t+r];return i}function p(n){function v(e){if(!e||xn.call(e)!=q)return!1;var t=e.valueOf,n=typeof t=="function"&&(n=mn(t))&&mn(n);return n?e==n||mn(e)==n:ht(e)}function m(e,t,n){if(!e||!V[typeof e])return e;t=t&&typeof n=="undefined"?t:nt(t,n,3);for(var r=-1,i=V[typeof e]&&zn(e),s=i?i.length:0;++r<s&&(n=i[r],!1!==t(e[n],n,e)););return e}function w(e,t,n){var r;if(!e||!V[typeof e])return e;t=t&&typeof n=="undefined"?t:nt(t,n,3);for(r in e)if(!1===t(e[r],r,e))break;return e}function $(e,t,n){var r,i=e,s=i;if(!i)return s;for(var o=arguments,u=0,a=typeof n=="number"?2:o.length;++u<a;)if((i=o[u])&&V[typeof i])for(var f=-1,l=V[typeof i]&&zn(i),c=l?l.length:0;++f<c;)r=l[f],"undefined"==typeof s[r]&&(s[r]=i[r]);return s}function K(e,t,n){var r,i=e,s=i;if(!i)return s;var o=arguments,u=0,a=typeof n=="number"?2:o.length;if(3<a&&"function"==typeof o[a-2])var f=nt(o[--a-1],o[a--],2);else 2<a&&"function"==typeof o[a-1]&&(f=o[--a]);for(;++u<a;)if((i=o[u])&&V[typeof i])for(var l=-1,c=V[typeof i]&&zn(i),h=c?c.length:0;++l<h;)r=c[l],s[r]=f?f(s[r],i[r]):i[r];return s}function Q(e){var t,n=[];if(!e||!V[typeof e])return n;for(t in e)gn.call(e,t)&&n.push(t);return n}function Y(e){return e&&typeof e=="object"&&!Un(e)&&gn.call(e,"__wrapped__")?e:new et(e)}function et(e,t){this.__chain__=!!t,this.__wrapped__=e}function tt(e,t,n,r,i){if(n){var s=n(e);if(typeof s!="undefined")return s}if(!bt(e))return e;var o=xn.call(e);if(!z[o])return e;var a=In[o];switch(o){case B:case j:return new a(+e);case I:case U:return new a(e);case R:return s=a(e.source,C.exec(e)),s.lastIndex=e.lastIndex,s}if(o=Un(e),t){var f=!r;r||(r=u()),i||(i=u());for(var c=r.length;c--;)if(r[c]==e)return i[c];s=o?a(e.length):{}}else s=o?h(e):K({},e);return o&&(gn.call(e,"index")&&(s.index=e.index),gn.call(e,"input")&&(s.input=e.input)),t?(r.push(e),i.push(s),(o?kt:m)(e,function(e,o){s[o]=tt(e,t,n,r,i)}),f&&(l(r),l(i)),s):s}function nt(e,t,n){if(typeof e!="function")return $t;if(typeof t=="undefined")return e;var r=e.__bindData__||qn.funcNames&&!e.name;if(typeof r=="undefined"){var i=M&&vn.call(e);qn.funcNames||!i||k.test(i)||(r=!0),(qn.funcNames||!r)&&(r=!qn.funcDecomp||M.test(i),Rn(e,r))}if(!0!==r&&r&&1&r[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)}}return Wt(e,t)}function rt(e,t,n,r){r=(r||0)-1;for(var i=e?e.length:0,s=[];++r<i;){var o=e[r];if(o&&typeof o=="object"&&typeof o.length=="number"&&(Un(o)||dt(o))){t||(o=rt(o,t,n));var u=-1,a=o.length,f=s.length;for(s.length+=a;++u<a;)s[f++]=o[u]}else n||s.push(o)}return s}function it(e,t,n,r,i,s){if(n){var o=n(e,t);if(typeof o!="undefined")return!!o}if(e===t)return 0!==e||1/e==1/t;if(e===e&&!(e&&V[typeof e]||t&&V[typeof t]))return!1;if(null==e||null==t)return e===t;var a=xn.call(e),f=xn.call(t);if(a==P&&(a=q),f==P&&(f=q),a!=f)return!1;switch(a){case B:case j:return+e==+t;case I:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case R:case U:return e==on(t)}if(f=a==H,!f){if(gn.call(e,"__wrapped__")||gn.call(t,"__wrapped__"))return it(e.__wrapped__||e,t.__wrapped__||t,n,r,i,s);if(a!=q)return!1;var a=e.constructor,c=t.constructor;if(a!=c&&!(yt(a)&&a instanceof a&&yt(c)&&c instanceof c))return!1}for(c=!i,i||(i=u()),s||(s=u()),a=i.length;a--;)if(i[a]==e)return s[a]==t;var h=0,o=!0;if(i.push(e),s.push(t),f){if(a=e.length,h=t.length,o=h==e.length,!o&&!r)return o;for(;h--;)if(f=a,c=t[h],r)for(;f--&&!(o=it(e[f],c,n,r,i,s)););else if(!(o=it(e[h],c,n,r,i,s)))break;return o}return w(t,function(t,u,a){return gn.call(a,u)?(h++,o=gn.call(e,u)&&it(e[u],t,n,r,i,s)):void 0}),o&&!r&&w(e,function(e,t,n){return gn.call(n,t)?o=-1<--h:void 0}),c&&(l(i),l(s)),o}function st(e,t,n,r,i){(Un(t)?kt:m)(t,function(t,s){var o,u,a=t,f=e[s];if(t&&((u=Un(t))||v(t))){for(a=r.length;a--;)if(o=r[a]==t){f=i[a];break}if(!o){var l;n&&(a=n(f,t),l=typeof a!="undefined")&&(f=a),l||(f=u?Un(f)?f:[]:v(f)?f:{}),r.push(t),i.push(f),l||st(f,t,n,r,i)}}else n&&(a=n(f,t),typeof a=="undefined"&&(a=t)),typeof a!="undefined"&&(f=a);e[s]=f})}function ot(n,r,i){var o=-1,a=ct(),f=n?n.length:0,h=[],p=!r&&f>=b&&a===e,d=i||p?u():h;if(p){var v=s(d);v?(a=t,d=v):(p=!1,d=i?d:(l(d),h))}for(;++o<f;){var v=n[o],m=i?i(v,o,n):v;(r?!o||d[d.length-1]!==m:0>a(d,m))&&((i||p)&&d.push(m),h.push(v))}return p?(l(d.k),c(d)):i&&l(d),h}function ut(e){return function(t,n,r){var i={};n=Y.createCallback(n,r,3),r=-1;var s=t?t.length:0;if(typeof s=="number")for(;++r<s;){var o=t[r];e(i,o,n(o,r,t),t)}else m(t,function(t,r,s){e(i,t,n(t,r,s),s)});return i}}function at(e,t,n,r,i,s){var o=1&t,u=2&t,a=4&t,f=8&t,l=16&t,c=32&t,h=e;if(!u&&!yt(e))throw new un;l&&!n.length&&(t&=-17,l=n=!1),c&&!r.length&&(t&=-33,c=r=!1);var p=e&&e.__bindData__;if(p)return!o||1&p[1]||(p[4]=i),!o&&1&p[1]&&(t|=8),!a||4&p[1]||(p[5]=s),l&&bn.apply(p[2]||(p[2]=[]),n),c&&bn.apply(p[3]||(p[3]=[]),r),p[1]|=t,at.apply(null,p);if(!o||u||a||c||!(qn.fastBind||Cn&&l))v=function(){var p=arguments,d=o?i:this;return(a||l||c)&&(p=Bn.call(p),l&&Tn.apply(p,n),c&&bn.apply(p,r),a&&p.length<s)?(t|=16,at(e,f?t:-4&t,p,null,i,s)):(u&&(e=d[h]),this instanceof v?(d=ft(e.prototype),p=e.apply(d,p),bt(p)?p:d):e.apply(d,p))};else{if(l){var d=[i];bn.apply(d,n)}var v=l?Cn.apply(e,d):Cn.call(e,i)}return Rn(v,Bn.call(arguments)),v}function ft(e){return bt(e)?kn(e):{}}function lt(e){return Wn[e]}function ct(){var t=(t=Y.indexOf)===Ft?e:t;return t}function ht(e){var t,n;return e&&xn.call(e)==q&&(t=e.constructor,!yt(t)||t instanceof t)?(w(e,function(e,t){n=t}),typeof n=="undefined"||gn.call(e,n)):!1}function pt(e){return Xn[e]}function dt(e){return e&&typeof e=="object"&&typeof e.length=="number"&&xn.call(e)==P||!1}function vt(e,t,n){var r=zn(e),i=r.length;for(t=nt(t,n,3);i--&&(n=r[i],!1!==t(e[n],n,e)););return e}function mt(e){var t=[];return w(e,function(e,n){yt(e)&&t.push(n)}),t.sort()}function gt(e){for(var t=-1,n=zn(e),r=n.length,i={};++t<r;){var s=n[t];i[e[s]]=s}return i}function yt(e){return typeof e=="function"}function bt(e){return!!e&&!!V[typeof e]}function wt(e){return typeof e=="number"||xn.call(e)==I}function Et(e){return typeof e=="string"||xn.call(e)==U}function St(e){for(var t=-1,n=zn(e),r=n.length,i=Gt(r);++t<r;)i[t]=e[n[t]];return i}function xt(e,t,n){var r=-1,i=ct(),s=e?e.length:0,o=!1;return n=(0>n?_n(0,s+n):n)||0,Un(e)?o=-1<i(e,t,n):typeof s=="number"?o=-1<(Et(e)?e.indexOf(t,n):i(e,t,n)):m(e,function(e){return++r<n?void 0:!(o=e===t)}),o}function Tt(e,t,n){var r=!0;t=Y.createCallback(t,n,3),n=-1;var i=e?e.length:0;if(typeof i=="number")for(;++n<i&&(r=!!t(e[n],n,e)););else m(e,function(e,n,i){return r=!!t(e,n,i)});return r}function Nt(e,t,n){var r=[];t=Y.createCallback(t,n,3),n=-1;var i=e?e.length:0;if(typeof i=="number")for(;++n<i;){var s=e[n];t(s,n,e)&&r.push(s)}else m(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function Ct(e,t,n){t=Y.createCallback(t,n,3),n=-1;var r=e?e.length:0;if(typeof r!="number"){var i;return m(e,function(e,n,r){return t(e,n,r)?(i=e,!1):void 0}),i}for(;++n<r;){var s=e[n];if(t(s,n,e))return s}}function kt(e,t,n){var r=-1,i=e?e.length:0;if(t=t&&typeof n=="undefined"?t:nt(t,n,3),typeof i=="number")for(;++r<i&&!1!==t(e[r],r,e););else m(e,t);return e}function Lt(e,t,n){var r=e?e.length:0;if(t=t&&typeof n=="undefined"?t:nt(t,n,3),typeof r=="number")for(;r--&&!1!==t(e[r],r,e););else{var i=zn(e),r=i.length;m(e,function(e,n,s){return n=i?i[--r]:--r,t(s[n],n,s)})}return e}function At(e,t,n){var r=-1,i=e?e.length:0;if(t=Y.createCallback(t,n,3),typeof i=="number")for(var s=Gt(i);++r<i;)s[r]=t(e[r],r,e);else s=[],m(e,function(e,n,i){s[++r]=t(e,n,i)});return s}function Ot(e,t,n){var i=-1/0,s=i;if(!t&&Un(e)){n=-1;for(var o=e.length;++n<o;){var u=e[n];u>s&&(s=u)}}else t=!t&&Et(e)?r:Y.createCallback(t,n,3),kt(e,function(e,n,r){n=t(e,n,r),n>i&&(i=n,s=e)});return s}function Mt(e,t){var n=-1,r=e?e.length:0;if(typeof r=="number")for(var i=Gt(r);++n<r;)i[n]=e[n][t];return i||At(e,t)}function _t(e,t,n,r){if(!e)return n;var i=3>arguments.length;t=nt(t,r,4);var s=-1,o=e.length;if(typeof o=="number")for(i&&(n=e[++s]);++s<o;)n=t(n,e[s],s,e);else m(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)});return n}function Dt(e,t,n,r){var i=3>arguments.length;return t=nt(t,r,4),Lt(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)}),n}function Pt(e){var t=-1,n=e?e.length:0,r=Gt(typeof n=="number"?n:0);return kt(e,function(e){var n=Kt(++t);r[t]=r[n],r[n]=e}),r}function Ht(e,t,n){var r;t=Y.createCallback(t,n,3),n=-1;var i=e?e.length:0;if(typeof i=="number")for(;++n<i&&!(r=t(e[n],n,e)););else m(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}function Bt(n){var r=-1,i=ct(),o=n?n.length:0,u=rt(arguments,!0,!0,1),a=[],f=o>=b&&i===e;if(f){var l=s(u);l?(i=t,u=l):f=!1}for(;++r<o;)l=n[r],0>i(u,l)&&a.push(l);return f&&c(u),a}function jt(e,t,n){var r=0,i=e?e.length:0;if(typeof t!="number"&&null!=t){var s=-1;for(t=Y.createCallback(t,n,3);++s<i&&t(e[s],s,e);)r++}else if(r=t,null==r||n)return e?e[0]:d;return h(e,0,Dn(_n(0,r),i))}function Ft(t,n,r){if(typeof r=="number"){var i=t?t.length:0;r=0>r?_n(0,i+r):r||0}else if(r)return r=qt(t,n),t[r]===n?r:-1;return e(t,n,r)}function It(e,t,n){if(typeof t!="number"&&null!=t){var r=0,i=-1,s=e?e.length:0;for(t=Y.createCallback(t,n,3);++i<s&&t(e[i],i,e);)r++}else r=null==t||n?1:_n(0,t);return h(e,r)}function qt(e,t,n,r){var i=0,s=e?e.length:i;for(n=n?Y.createCallback(n,r,1):$t,t=n(t);i<s;)r=i+s>>>1,n(e[r])<t?i=r+1:s=r;return i}function Rt(e,t,n,r){return typeof t!="boolean"&&null!=t&&(n=(r=n)&&r[t]===e?null:t,t=!1),null!=n&&(n=Y.createCallback(n,r,3)),ot(e,t,n)}function Ut(){for(var e=1<arguments.length?arguments:arguments[0],t=-1,n=e?Ot(Mt(e,"length")):0,r=Gt(0>n?0:n);++t<n;)r[t]=Mt(e,t);return r}function zt(e,t){for(var n=-1,r=e?e.length:0,i={};++n<r;){var s=e[n];t?i[s]=t[n]:s&&(i[s[0]]=s[1])}return i}function Wt(e,t){return 2<arguments.length?at(e,17,Bn.call(arguments,2),null,t):at(e,1,null,null,t)}function Xt(e,t,n){function r(){l&&pn(l),o=l=c=d,(v||p!==t)&&(h=yn(),u=e.apply(f,s))}function i(){var n=t-(yn()-a);0<n?l=En(i,n):(o&&pn(o),n=c,o=l=c=d,n&&(h=yn(),u=e.apply(f,s)))}var s,o,u,a,f,l,c,h=0,p=!1,v=!0;if(!yt(e))throw new un;if(t=_n(0,t)||0,!0===n)var m=!0,v=!1;else bt(n)&&(m=n.leading,p="maxWait"in n&&(_n(t,n.maxWait)||0),v="trailing"in n?n.trailing:v);return function(){if(s=arguments,a=yn(),f=this,c=v&&(l||!m),!1===p)var n=m&&!l;else{o||m||(h=a);var d=p-(a-h);0<d?o||(o=En(r,d)):(o&&(o=pn(o)),h=a,u=e.apply(f,s))}return l||t===p||(l=En(i,t)),n&&(u=e.apply(f,s)),u}}function Vt(e){if(!yt(e))throw new un;var t=Bn.call(arguments,1);return En(function(){e.apply(d,t)},1)}function $t(e){return e}function Jt(e,t){var n=e,r=!t||yt(n);t||(n=et,t=e,e=Y),kt(mt(t),function(i){var s=e[i]=t[i];r&&(n.prototype[i]=function(){var t=this.__wrapped__,r=[t];return bn.apply(r,arguments),r=s.apply(e,r),t&&typeof t=="object"&&t===r?this:(r=new n(r),r.__chain__=this.__chain__,r)})})}function Kt(e,t,n){var r=null==e,i=null==t;return null==n&&(typeof e=="boolean"&&i?(n=e,e=1):i||typeof t!="boolean"||(n=t,i=!0)),r&&i&&(t=1),e=+e||0,i?(t=e,e=0):t=+t||0,r=Hn(),n||e%1||t%1?Dn(e+r*(t-e+parseFloat("1e-"+((r+"").length-1))),t):e+dn(r*(t-e+1))}function Qt(){return this.__wrapped__}n=n?Z.defaults(J.Object(),n,Z.pick(J,D)):J;var Gt=n.Array,Yt=n.Boolean,Zt=n.Date,en=n.Function,tn=n.Math,nn=n.Number,rn=n.Object,sn=n.RegExp,on=n.String,un=n.TypeError,an=[],fn=rn.prototype,ln=n._,cn=sn("^"+on(fn.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),hn=tn.ceil,pn=n.clearTimeout,dn=tn.floor,vn=en.prototype.toString,mn=cn.test(mn=rn.getPrototypeOf)&&mn,gn=fn.hasOwnProperty,yn=cn.test(yn=Zt.now)&&yn||function(){return+(new Zt)},bn=an.push,wn=n.setImmediate,En=n.setTimeout,Sn=an.splice,xn=fn.toString,Tn=an.unshift,Nn=function(){try{var e={},t=cn.test(t=rn.defineProperty)&&t,n=t(e,e,e)&&t}catch(r){}return n}(),Cn=cn.test(Cn=xn.bind)&&Cn,kn=cn.test(kn=rn.create)&&kn,Ln=cn.test(Ln=Gt.isArray)&&Ln,An=n.isFinite,On=n.isNaN,Mn=cn.test(Mn=rn.keys)&&Mn,_n=tn.max,Dn=tn.min,Pn=n.parseInt,Hn=tn.random,Bn=an.slice,jn=cn.test(n.attachEvent),Fn=Cn&&!/\n|true/.test(Cn+jn),In={};In[H]=Gt,In[B]=Yt,In[j]=Zt,In[F]=en,In[q]=rn,In[I]=nn,In[R]=sn,In[U]=on,et.prototype=Y.prototype;var qn=Y.support={};qn.fastBind=Cn&&!Fn,qn.funcDecomp=!cn.test(n.a)&&M.test(p),qn.funcNames=typeof en.name=="string",Y.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:L,variable:"",imports:{_:Y}},kn||(ft=function(e){if(bt(e)){f.prototype=e;var t=new f;f.prototype=null}return t||{}});var Rn=Nn?function(e,t){X.value=t,Nn(e,"__bindData__",X)}:f,Un=Ln||function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&xn.call(e)==H||!1},zn=Mn?function(e){return bt(e)?Mn(e):[]}:Q,Wn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xn=gt(Wn),Vn=sn("("+zn(Xn).join("|")+")","g"),$n=sn("["+zn(Wn).join("")+"]","g"),Jn=ut(function(e,t,n){gn.call(e,n)?e[n]++:e[n]=1}),Kn=ut(function(e,t,n){(gn.call(e,n)?e[n]:e[n]=[]).push(t)}),Qn=ut(function(e,t,n){e[n]=t});Fn&&G&&typeof wn=="function"&&(Vt=function(e){if(!yt(e))throw new un;return wn.apply(n,arguments)});var Gn=8==Pn(E+"08")?Pn:function(e,t){return Pn(Et(e)?e.replace(A,""):e,t||0)};return Y.after=function(e,t){if(!yt(t))throw new un;return function(){return 1>--e?t.apply(this,arguments):void 0}},Y.assign=K,Y.at=function(e){for(var t=arguments,n=-1,r=rt(t,!0,!1,1),t=t[2]&&t[2][t[1]]===e?1:r.length,i=Gt(t);++n<t;)i[n]=e[r[n]];return i},Y.bind=Wt,Y.bindAll=function(e){for(var t=1<arguments.length?rt(arguments,!0,!1,1):mt(e),n=-1,r=t.length;++n<r;){var i=t[n];e[i]=at(e[i],1,null,null,e)}return e},Y.bindKey=function(e,t){return 2<arguments.length?at(t,19,Bn.call(arguments,2),null,e):at(t,3,null,null,e)},Y.chain=function(e){return e=new et(e),e.__chain__=!0,e},Y.compact=function(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var i=e[t];i&&r.push(i)}return r},Y.compose=function(){for(var e=arguments,t=e.length;t--;)if(!yt(e[t]))throw new un;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}},Y.countBy=Jn,Y.createCallback=function(e,t,n){var r=typeof e;if(null==e||"function"==r)return nt(e,t,n);if("object"!=r)return function(t){return t[e]};var i=zn(e),s=i[0],o=e[s];return 1!=i.length||o!==o||bt(o)?function(t){for(var n=i.length,r=!1;n--&&(r=it(t[i[n]],e[i[n]],null,!0)););return r}:function(e){return e=e[s],o===e&&(0!==o||1/o==1/e)}},Y.curry=function(e,t){return t=typeof t=="number"?t:+t||e.length,at(e,4,null,null,null,t)},Y.debounce=Xt,Y.defaults=$,Y.defer=Vt,Y.delay=function(e,t){if(!yt(e))throw new un;var n=Bn.call(arguments,2);return En(function(){e.apply(d,n)},t)},Y.difference=Bt,Y.filter=Nt,Y.flatten=function(e,t,n,r){return typeof t!="boolean"&&null!=t&&(n=(r=n)&&r[t]===e?null:t,t=!1),null!=n&&(e=At(e,n,r)),rt(e,t)},Y.forEach=kt,Y.forEachRight=Lt,Y.forIn=w,Y.forInRight=function(e,t,n){var r=[];w(e,function(e,t){r.push(t,e)});var i=r.length;for(t=nt(t,n,3);i--&&!1!==t(r[i--],r[i],e););return e},Y.forOwn=m,Y.forOwnRight=vt,Y.functions=mt,Y.groupBy=Kn,Y.indexBy=Qn,Y.initial=function(e,t,n){var r=0,i=e?e.length:0;if(typeof t!="number"&&null!=t){var s=i;for(t=Y.createCallback(t,n,3);s--&&t(e[s],s,e);)r++}else r=null==t||n?1:t||r;return h(e,0,Dn(_n(0,i-r),i))},Y.intersection=function(n){for(var r=arguments,i=r.length,o=-1,a=u(),f=-1,h=ct(),p=n?n.length:0,d=[],v=u();++o<i;){var m=r[o];a[o]=h===e&&(m?m.length:0)>=b&&s(o?r[o]:v)}e:for(;++f<p;){var g=a[0],m=n[f];if(0>(g?t(g,m):h(v,m))){for(o=i,(g||v).push(m);--o;)if(g=a[o],0>(g?t(g,m):h(r[o],m)))continue e;d.push(m)}}for(;i--;)(g=a[i])&&c(g);return l(a),l(v),d},Y.invert=gt,Y.invoke=function(e,t){var n=Bn.call(arguments,2),r=-1,i=typeof t=="function",s=e?e.length:0,o=Gt(typeof s=="number"?s:0);return kt(e,function(e){o[++r]=(i?t:e[t]).apply(e,n)}),o},Y.keys=zn,Y.map=At,Y.max=Ot,Y.memoize=function(e,t){function n(){var r=n.cache,i=t?t.apply(this,arguments):y+arguments[0];return gn.call(r,i)?r[i]:r[i]=e.apply(this,arguments)}if(!yt(e))throw new un;return n.cache={},n},Y.merge=function(e){var t=arguments,n=2;if(!bt(e))return e;if("number"!=typeof t[2]&&(n=t.length),3<n&&"function"==typeof t[n-2])var r=nt(t[--n-1],t[n--],2);else 2<n&&"function"==typeof t[n-1]&&(r=t[--n]);for(var t=Bn.call(arguments,1,n),i=-1,s=u(),o=u();++i<n;)st(e,t[i],r,s,o);return l(s),l(o),e},Y.min=function(e,t,n){var i=1/0,s=i;if(!t&&Un(e)){n=-1;for(var o=e.length;++n<o;){var u=e[n];u<s&&(s=u)}}else t=!t&&Et(e)?r:Y.createCallback(t,n,3),kt(e,function(e,n,r){n=t(e,n,r),n<i&&(i=n,s=e)});return s},Y.omit=function(e,t,n){var r=ct(),i=typeof t=="function",s={};if(i)t=Y.createCallback(t,n,3);else var o=rt(arguments,!0,!1,1);return w(e,function(e,n,u){(i?!t(e,n,u):0>r(o,n))&&(s[n]=e)}),s},Y.once=function(e){var t,n;if(!yt(e))throw new un;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},Y.pairs=function(e){for(var t=-1,n=zn(e),r=n.length,i=Gt(r);++t<r;){var s=n[t];i[t]=[s,e[s]]}return i},Y.partial=function(e){return at(e,16,Bn.call(arguments,1))},Y.partialRight=function(e){return at(e,32,null,Bn.call(arguments,1))},Y.pick=function(e,t,n){var r={};if(typeof t!="function")for(var i=-1,s=rt(arguments,!0,!1,1),o=bt(e)?s.length:0;++i<o;){var u=s[i];u in e&&(r[u]=e[u])}else t=Y.createCallback(t,n,3),w(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r},Y.pluck=Mt,Y.pull=function(e){for(var t=arguments,n=0,r=t.length,i=e?e.length:0;++n<r;)for(var s=-1,o=t[n];++s<i;)e[s]===o&&(Sn.call(e,s--,1),i--);return e},Y.range=function(e,t,n){e=+e||0,n=typeof n=="number"?n:+n||1,null==t&&(t=e,e=0);var r=-1;t=_n(0,hn((t-e)/(n||1)));for(var i=Gt(t);++r<t;)i[r]=e,e+=n;return i},Y.reject=function(e,t,n){return t=Y.createCallback(t,n,3),Nt(e,function(e,n,r){return!t(e,n,r)})},Y.remove=function(e,t,n){var r=-1,i=e?e.length:0,s=[];for(t=Y.createCallback(t,n,3);++r<i;)n=e[r],t(n,r,e)&&(s.push(n),Sn.call(e,r--,1),i--);return s},Y.rest=It,Y.shuffle=Pt,Y.sortBy=function(e,t,n){var r=-1,s=e?e.length:0,o=Gt(typeof s=="number"?s:0);for(t=Y.createCallback(t,n,3),kt(e,function(e,n,i){var s=o[++r]=a();s.m=t(e,n,i),s.n=r,s.o=e}),s=o.length,o.sort(i);s--;)e=o[s],o[s]=e.o,c(e);return o},Y.tap=function(e,t){return t(e),e},Y.throttle=function(e,t,n){var r=!0,i=!0;if(!yt(e))throw new un;return!1===n?r=!1:bt(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),W.leading=r,W.maxWait=t,W.trailing=i,Xt(e,t,W)},Y.times=function(e,t,n){e=-1<(e=+e)?e:0;var r=-1,i=Gt(e);for(t=nt(t,n,1);++r<e;)i[r]=t(r);return i},Y.toArray=function(e){return e&&typeof e.length=="number"?h(e):St(e)},Y.transform=function(e,t,n,r){var i=Un(e);return t=nt(t,r,4),null==n&&(i?n=[]:(r=e&&e.constructor,n=ft(r&&r.prototype))),(i?kt:m)(e,function(e,r,i){return t(n,e,r,i)}),n},Y.union=function(){return ot(rt(arguments,!0,!0))},Y.uniq=Rt,Y.values=St,Y.where=Nt,Y.without=function(e){return Bt(e,Bn.call(arguments,1))},Y.wrap=function(e,t){if(!yt(t))throw new un;return function(){var n=[e];return bn.apply(n,arguments),t.apply(this,n)}},Y.zip=Ut,Y.zipObject=zt,Y.collect=At,Y.drop=It,Y.each=kt,Y.b=Lt,Y.extend=K,Y.methods=mt,Y.object=zt,Y.select=Nt,Y.tail=It,Y.unique=Rt,Y.unzip=Ut,Jt(Y),Y.clone=function(e,t,n,r){return typeof t!="boolean"&&null!=t&&(r=n,n=t,t=!1),tt(e,t,typeof n=="function"&&nt(n,r,1))},Y.cloneDeep=function(e,t,n){return tt(e,!0,typeof t=="function"&&nt(t,n,1))},Y.contains=xt,Y.escape=function(e){return null==e?"":on(e).replace($n,lt)},Y.every=Tt,Y.find=Ct,Y.findIndex=function(e,t,n){var r=-1,i=e?e.length:0;for(t=Y.createCallback(t,n,3);++r<i;)if(t(e[r],r,e))return r;return-1},Y.findKey=function(e,t,n){var r;return t=Y.createCallback(t,n,3),m(e,function(e,n,i){return t(e,n,i)?(r=n,!1):void 0}),r},Y.findLast=function(e,t,n){var r;return t=Y.createCallback(t,n,3),Lt(e,function(e,n,i){return t(e,n,i)?(r=e,!1):void 0}),r},Y.findLastIndex=function(e,t,n){var r=e?e.length:0;for(t=Y.createCallback(t,n,3);r--;)if(t(e[r],r,e))return r;return-1},Y.findLastKey=function(e,t,n){var r;return t=Y.createCallback(t,n,3),vt(e,function(e,n,i){return t(e,n,i)?(r=n,!1):void 0}),r},Y.has=function(e,t){return e?gn.call(e,t):!1},Y.identity=$t,Y.indexOf=Ft,Y.isArguments=dt,Y.isArray=Un,Y.isBoolean=function(e){return!0===e||!1===e||xn.call(e)==B},Y.isDate=function(e){return e?typeof e=="object"&&xn.call(e)==j:!1},Y.isElement=function(e){return e?1===e.nodeType:!1},Y.isEmpty=function(e){var t=!0;if(!e)return t;var n=xn.call(e),r=e.length;return n==H||n==U||n==P||n==q&&typeof r=="number"&&yt(e.splice)?!r:(m(e,function(){return t=!1}),t)},Y.isEqual=function(e,t,n,r){return it(e,t,typeof n=="function"&&nt(n,r,2))},Y.isFinite=function(e){return An(e)&&!On(parseFloat(e))},Y.isFunction=yt,Y.isNaN=function(e){return wt(e)&&e!=+e},Y.isNull=function(e){return null===e},Y.isNumber=wt,Y.isObject=bt,Y.isPlainObject=v,Y.isRegExp=function(e){return e?typeof e=="object"&&xn.call(e)==R:!1},Y.isString=Et,Y.isUndefined=function(e){return typeof e=="undefined"},Y.lastIndexOf=function(e,t,n){var r=e?e.length:0;for(typeof n=="number"&&(r=(0>n?_n(0,r+n):Dn(n,r-1))+1);r--;)if(e[r]===t)return r;return-1},Y.mixin=Jt,Y.noConflict=function(){return n._=ln,this},Y.parseInt=Gn,Y.random=Kt,Y.reduce=_t,Y.reduceRight=Dt,Y.result=function(e,t){if(e){var n=e[t];return yt(n)?e[t]():n}},Y.runInContext=p,Y.size=function(e){var t=e?e.length:0;return typeof t=="number"?t:zn(e).length},Y.some=Ht,Y.sortedIndex=qt,Y.template=function(e,t,n){var r=Y.templateSettings;e||(e=""),n=$({},n,r);var i,s=$({},n.imports,r.imports),r=zn(s),s=St(s),u=0,a=n.interpolate||O,f="__p+='",a=sn((n.escape||O).source+"|"+a.source+"|"+(a===L?N:O).source+"|"+(n.evaluate||O).source+"|$","g");e.replace(a,function(t,n,r,s,a,l){return r||(r=s),f+=e.slice(u,l).replace(_,o),n&&(f+="'+__e("+n+")+'"),a&&(i=!0,f+="';"+a+";__p+='"),r&&(f+="'+((__t=("+r+"))==null?'':__t)+'"),u=l+t.length,t}),f+="';\n",a=n=n.variable,a||(n="obj",f="with("+n+"){"+f+"}"),f=(i?f.replace(S,""):f).replace(x,"$1").replace(T,"$1;"),f="function("+n+"){"+(a?"":n+"||("+n+"={});")+"var __t,__p='',__e=_.escape"+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+f+"return __p}";try{var l=en(r,"return "+f).apply(d,s)}catch(c){throw c.source=f,c}return t?l(t):(l.source=f,l)},Y.unescape=function(e){return null==e?"":on(e).replace(Vn,pt)},Y.uniqueId=function(e){var t=++g;return on(null==e?"":e)+t},Y.all=Tt,Y.any=Ht,Y.detect=Ct,Y.findWhere=Ct,Y.foldl=_t,Y.foldr=Dt,Y.include=xt,Y.inject=_t,m(Y,function(e,t){Y.prototype[t]||(Y.prototype[t]=function(){var t=[this.__wrapped__],n=this.__chain__;return bn.apply(t,arguments),t=e.apply(Y,t),n?new et(t,n):t})}),Y.first=jt,Y.last=function(e,t,n){var r=0,i=e?e.length:0;if(typeof t!="number"&&null!=t){var s=i;for(t=Y.createCallback(t,n,3);s--&&t(e[s],s,e);)r++}else if(r=t,null==r||n)return e?e[i-1]:d;return h(e,_n(0,i-r))},Y.sample=function(e,t,n){var r=e?e.length:0;return typeof r!="number"&&(e=St(e)),null==t||n?e?e[Kt(r-1)]:d:(e=Pt(e),e.length=Dn(_n(0,t),e.length),e)},Y.take=jt,Y.head=jt,m(Y,function(e,t){var n="sample"!==t;Y.prototype[t]||(Y.prototype[t]=function(t,r){var i=this.__chain__,s=e(this.__wrapped__,t,r);return i||null!=t&&(!r||n&&typeof t=="function")?new et(s,i):s})}),Y.VERSION="2.2.1",Y.prototype.chain=function(){return this.__chain__=!0,this},Y.prototype.toString=function(){return on(this.__wrapped__)},Y.prototype.value=Qt,Y.prototype.valueOf=Qt,kt(["join","pop","shift"],function(e){var t=an[e];Y.prototype[e]=function(){var e=this.__chain__,n=t.apply(this.__wrapped__,arguments);return e?new et(n,e):n}}),kt(["push","reverse","sort","unshift"],function(e){var t=an[e];Y.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),kt(["concat","slice","splice"],function(e){var t=an[e];Y.prototype[e]=function(){return new et(t.apply(this.__wrapped__,arguments),this.__chain__)}}),Y}var d,v=[],m=[],g=0,y=+(new Date)+"",b=75,w=40,E=" 	\f\n\r\u2028\u2029",S=/\b__p\+='';/g,x=/\b(__p\+=)''\+/g,T=/(__e\(.*?\)|\b__t\))\+'';/g,N=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,C=/\w*$/,k=/^function[ \n\r\t]+\w/,L=/<%=([\s\S]+?)%>/g,A=RegExp("^["+E+"]*0+(?=.$)"),O=/($^)/,M=/\bthis\b/,_=/['\n\r\t\u2028\u2029\\]/g,D="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setImmediate setTimeout".split(" "),P="[object Arguments]",H="[object Array]",B="[object Boolean]",j="[object Date]",F="[object Function]",I="[object Number]",q="[object Object]",R="[object RegExp]",U="[object String]",z={};z[F]=!1,z[P]=z[H]=z[B]=z[j]=z[I]=z[q]=z[R]=z[U]=!0;var W={leading:!1,maxWait:0,trailing:!1},X={configurable:!1,enumerable:!1,value:null,writable:!1},V={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},$={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},J=V[typeof window]&&window||this,K=V[typeof exports]&&exports&&!exports.nodeType&&exports,Q=V[typeof module]&&module&&!module.nodeType&&module,G=Q&&Q.exports===K&&K,Y=V[typeof global]&&global;!Y||Y.global!==Y&&Y.window!==Y||(J=Y);var Z=p();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(J._=Z,define("lodash",[],function(){return Z})):K&&Q?G?(Q.exports=Z)._=Z:K._=Z:J._=Z}.call(this),window.Modernizr=function(e,t,n){function r(e){v.cssText=e}function i(e,t){return r(b.join(e+";")+(t||""))}function s(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function u(e,t,r){for(var i in e){var o=t[e[i]];if(o!==n)return r===!1?e[i]:s(o,"function")?o.bind(r||t):o}return!1}function a(){l.inputtypes=function(e){for(var r=0,i,s,o,u=e.length;r<u;r++)m.setAttribute("type",s=e[r]),i=m.type!=="text",i&&(m.value=g,m.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(s)&&m.style.WebkitAppearance!==n?(h.appendChild(m),o=t.defaultView,i=o.getComputedStyle&&o.getComputedStyle(m,null).WebkitAppearance!=="textfield"&&m.offsetHeight!==0,h.removeChild(m)):/^(search|tel)$/.test(s)||(/^(url|email)$/.test(s)?i=m.checkValidity&&m.checkValidity()===!1:i=m.value!=g)),E[e[r]]=!!i;return E}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var f="2.7.1",l={},c=!0,h=t.documentElement,p="modernizr",d=t.createElement(p),v=d.style,m=t.createElement("input"),g=":)",y={}.toString,b=" -webkit- -moz- -o- -ms- ".split(" "),w={},E={},S={},x=[],T=x.slice,N,C=function(e,n,r,i){var s,o,u,a,f=t.createElement("div"),l=t.body,c=l||t.createElement("body");if(parseInt(r,10))while(r--)u=t.createElement("div"),u.id=i?i[r]:p+(r+1),f.appendChild(u);return s=["&#173;",'<style id="s',p,'">',e,"</style>"].join(""),f.id=p,(l?f:c).innerHTML+=s,c.appendChild(f),l||(c.style.background="",c.style.overflow="hidden",a=h.style.overflow,h.style.overflow="hidden",h.appendChild(c)),o=n(f,e),l?f.parentNode.removeChild(f):(c.parentNode.removeChild(c),h.style.overflow=a),!!o},k={}.hasOwnProperty,L;!s(k,"undefined")&&!s(k.call,"undefined")?L=function(e,t){return k.call(e,t)}:L=function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function")throw new TypeError;var n=T.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(T.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(T.call(arguments)))};return r}),w.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:C(["@media (",b.join("touch-enabled),("),p,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=e.offsetTop===9}),n};for(var A in w)L(w,A)&&(N=A.toLowerCase(),l[N]=w[A](),x.push((l[N]?"":"no-")+N));return l.input||a(),l.addTest=function(e,t){if(typeof e=="object")for(var r in e)L(e,r)&&l.addTest(r,e[r]);else{e=e.toLowerCase();if(l[e]!==n)return l;t=typeof t=="function"?t():t,typeof c!="undefined"&&c&&(h.className+=" "+(t?"":"no-")+e),l[e]=t}return l},r(""),d=m=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=y.elements;return typeof e=="string"?e.split(" "):e}function i(e){var t=m[e[d]];return t||(t={},v++,e[d]=v,m[v]=t),t}function s(e,n,r){n||(n=t);if(g)return n.createElement(e);r||(r=i(n));var s;return r.cache[e]?s=r.cache[e].cloneNode():h.test(e)?s=(r.cache[e]=r.createElem(e)).cloneNode():s=r.createElem(e),s.canHaveChildren&&!c.test(e)&&!s.tagUrn?r.frag.appendChild(s):s}function o(e,n){e||(e=t);if(g)return e.createDocumentFragment();n=n||i(e);var s=n.frag.cloneNode(),o=0,u=r(),a=u.length;for(;o<a;o++)s.createElement(u[o]);return s}function u(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return y.shivMethods?s(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(y,t.frag)}function a(e){e||(e=t);var r=i(e);return y.shivCSS&&!p&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),g||u(e,r),e}var f="3.7.0",l=e.html5||{},c=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,h=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,p,d="_html5shiv",v=0,m={},g;(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",p="hidden"in e,g=e.childNodes.length==1||function(){t.createElement("a");var e=t.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(n){p=!0,g=!0}})();var y={elements:l.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:f,shivCSS:l.shivCSS!==!1,supportsUnknownElements:g,shivMethods:l.shivMethods!==!1,type:"default",shivDocument:a,createElement:s,createDocumentFragment:o};e.html5=y,a(t)}(this,t),l._version=f,l._prefixes=b,l.testStyles=C,h.className=h.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(c?" js "+x.join(" "):""),l}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==d.call(e)}function i(e){return"string"==typeof e}function s(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function u(){var e=v.shift();m=1,e?e.t?h(function(){("c"==e.t?k.injectCss:k.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),u()):m=0}function a(e,n,r,i,s,a,f){function l(t){if(!d&&o(c.readyState)&&(w.r=d=1,!m&&u(),c.onload=c.onreadystatechange=null,t)){"img"!=e&&h(function(){b.removeChild(c)},50);for(var r in T[n])T[n].hasOwnProperty(r)&&T[n][r].onload()}}var f=f||k.errorTimeout,c=t.createElement(e),d=0,g=0,w={t:r,s:n,e:s,a:a,x:f};1===T[n]&&(g=1,T[n]=[]),"object"==e?c.data=n:(c.src=n,c.type=e),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){l.call(this,g)},v.splice(i,0,w),"img"!=e&&(g||2===T[n]?(b.insertBefore(c,y?null:p),h(l,f)):T[n].push(c))}function f(e,t,n,r,s){return m=0,t=t||"j",i(e)?a("c"==t?E:w,e,t,this.i++,n,r,s):(v.splice(this.i++,0,e),1==v.length&&u()),this}function l(){var e=k;return e.loader={load:f,i:0},e}var c=t.documentElement,h=e.setTimeout,p=t.getElementsByTagName("script")[0],d={}.toString,v=[],m=0,g="MozAppearance"in c.style,y=g&&!!t.createRange().compareNode,b=y?c:p.parentNode,c=e.opera&&"[object Opera]"==d.call(e.opera),c=!!t.attachEvent&&!c,w=g?"object":c?"script":"img",E=c?"script":w,S=Array.isArray||function(e){return"[object Array]"==d.call(e)},x=[],T={},N={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}},C,k;k=function(e){function t(e){var e=e.split("!"),t=x.length,n=e.pop(),r=e.length,n={url:n,origUrl:n,prefixes:e},i,s,o;for(s=0;s<r;s++)o=e[s].split("="),(i=N[o.shift()])&&(n=i(n,o));for(s=0;s<t;s++)n=x[s](n);return n}function o(e,i,s,o,u){var a=t(e),f=a.autoCallback;a.url.split(".").pop().split("?").shift(),a.bypass||(i&&(i=r(i)?i:i[e]||i[o]||i[e.split("/").pop().split("?")[0]]),a.instead?a.instead(e,i,s,o,u):(T[a.url]?a.noexec=!0:T[a.url]=1,s.load(a.url,a.forceCSS||!a.forceJS&&"css"==a.url.split(".").pop().split("?").shift()?"c":n,a.noexec,a.attrs,a.timeout),(r(i)||r(f))&&s.load(function(){l(),i&&i(a.origUrl,u,o),f&&f(a.origUrl,u,o),T[a.url]=2})))}function u(e,t){function n(e,n){if(e){if(i(e))n||(f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}),o(e,f,t,0,u);else if(Object(e)===e)for(p in h=function(){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t}(),e)e.hasOwnProperty(p)&&(!n&&!--h&&(r(f)?f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}:f[p]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),c()}}(l[p])),o(e[p],f,t,p,u))}else!n&&c()}var u=!!e.test,a=e.load||e.both,f=e.callback||s,l=f,c=e.complete||s,h,p;n(u?e.yep:e.nope,!!a),a&&n(a)}var a,f,c=this.yepnope.loader;if(i(e))o(e,0,c,0);else if(S(e))for(a=0;a<e.length;a++)f=e[a],i(f)?o(f,0,c,0):S(f)?k(f):Object(f)===f&&u(f,c);else Object(e)===e&&u(e,c)},k.addPrefix=function(e,t){N[e]=t},k.addFilter=function(e){x.push(e)},k.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",C=function(){t.removeEventListener("DOMContentLoaded",C,0),t.readyState="complete"},0)),e.yepnope=l(),e.yepnope.executeStack=u,e.yepnope.injectJs=function(e,n,r,i,a,f){var l=t.createElement("script"),c,d,i=i||k.errorTimeout;l.src=e;for(d in r)l.setAttribute(d,r[d]);n=f?u:n||s,l.onreadystatechange=l.onload=function(){!c&&o(l.readyState)&&(c=1,n(),l.onload=l.onreadystatechange=null)},h(function(){c||(c=1,n(1))},i),a?l.onload():p.parentNode.insertBefore(l,p)},e.yepnope.injectCss=function(e,n,r,i,o,a){var i=t.createElement("link"),f,n=a?u:n||s;i.href=e,i.rel="stylesheet",i.type="text/css";for(f in r)i.setAttribute(f,r[f]);o||(p.parentNode.insertBefore(i,p),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},define("Modernizr",function(e){return function(){var t,n;return t||e.Modernizr}}(this)),function(e,t){typeof exports=="object"?module.exports=t():e.Spinner=t()}(this,function(){function r(e,t){var n=document.createElement(e||"div"),r;for(r in t)n[r]=t[r];return n}function i(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function o(e,r,i,o){var u=["opacity",r,~~(e*100),i,o].join("-"),a=.01+i/o*100,f=Math.max(1-(1-e)/r*(100-a),e),l=n.substring(0,n.indexOf("Animation")).toLowerCase(),c=l&&"-"+l+"-"||"";return t[u]||(s.insertRule("@"+c+"keyframes "+u+"{"+"0%{opacity:"+f+"}"+a+"%{opacity:"+e+"}"+(a+.01)+"%{opacity:1}"+(a+r)%100+"%{opacity:"+e+"}"+"100%{opacity:"+f+"}"+"}",s.cssRules.length),t[u]=1),u}function u(t,n){var r=t.style,i,s;n=n.charAt(0).toUpperCase()+n.slice(1);for(s=0;s<e.length;s++){i=e[s]+n;if(r[i]!==undefined)return i}if(r[n]!==undefined)return n}function a(e,t){for(var n in t)e.style[u(e,n)||n]=t[n];return e}function f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]===undefined&&(e[r]=n[r])}return e}function l(e){var t={x:e.offsetLeft,y:e.offsetTop};while(e=e.offsetParent)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function c(e,t){return typeof e=="string"?e:e[t%e.length]}function p(e){if(typeof this=="undefined")return new p(e);this.opts=f(e||{},p.defaults,h)}function d(){function e(e,t){return r("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}s.addRule(".spin-vml","behavior:url(#default#VML)"),p.prototype.lines=function(t,n){function o(){return a(e("group",{coordsize:s+" "+s,coordorigin:-r+" "+ -r}),{width:s,height:s})}function h(t,s,u){i(f,i(a(o(),{rotation:360/n.lines*t+"deg",left:~~s}),i(a(e("roundrect",{arcsize:n.corners}),{width:r,height:n.width,left:n.radius,top:-n.width>>1,filter:u}),e("fill",{color:c(n.color,t),opacity:n.opacity}),e("stroke",{opacity:0}))))}var r=n.length+n.width,s=2*r,u=-(n.width+n.length)*2+"px",f=a(o(),{position:"absolute",top:u,left:u}),l;if(n.shadow)for(l=1;l<=n.lines;l++)h(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=n.lines;l++)h(l);return i(t,f)},p.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}var e=["webkit","Moz","ms","O"],t={},n,s=function(){var e=r("style",{type:"text/css"});return i(document.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),h={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};p.defaults={},f(p.prototype,{spin:function(e){this.stop();var t=this,i=t.opts,s=t.el=a(r(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex}),o=i.radius+i.length+i.width,u,f;e&&(e.insertBefore(s,e.firstChild||null),f=l(e),u=l(s),a(s,{left:(i.left=="auto"?f.x-u.x+(e.offsetWidth>>1):parseInt(i.left,10)+o)+"px",top:(i.top=="auto"?f.y-u.y+(e.offsetHeight>>1):parseInt(i.top,10)+o)+"px"})),s.setAttribute("role","progressbar"),t.lines(s,t.opts);if(!n){var c=0,h=(i.lines-1)*(1-i.direction)/2,p,d=i.fps,v=d/i.speed,m=(1-i.opacity)/(v*i.trail/100),g=v/i.lines;(function y(){c++;for(var e=0;e<i.lines;e++)p=Math.max(1-(c+(i.lines-e)*g)%v*m,i.opacity),t.opacity(s,e*i.direction+h,p,i);t.timeout=t.el&&setTimeout(y,~~(1e3/d))})()}return t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=undefined),this},lines:function(e,t){function l(e,n){return a(r(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*s+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.corners*t.width>>1)+"px"})}var s=0,u=(t.lines-1)*(1-t.direction)/2,f;for(;s<t.lines;s++)f=a(r(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:n&&o(t.opacity,t.trail,u+s*t.direction,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&i(f,a(l("#000","0 0 4px #000"),{top:"2px"})),i(e,i(f,l(c(t.color,s),"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var v=a(r("group"),{behavior:"url(#default#VML)"});return!u(v,"transform")&&v.adj?d():n=u(v,"animation"),p}),define("spin",function(e){return function(){var t,n;return t||e.Spinner}}(this));var Zepto=function(){function M(e){return e==null?String(e):x[T.call(e)]||"object"}function _(e){return M(e)=="function"}function D(e){return e!=null&&e==e.window}function P(e){return e!=null&&e.nodeType==e.DOCUMENT_NODE}function H(e){return M(e)=="object"}function B(e){return H(e)&&!D(e)&&Object.getPrototypeOf(e)==Object.prototype}function j(e){return typeof e.length=="number"}function F(e){return o.call(e,function(e){return e!=null})}function I(e){return e.length>0?n.fn.concat.apply([],e):e}function q(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function R(e){return e in f?f[e]:f[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function U(e,t){return typeof t=="number"&&!l[q(e)]?t+"px":t}function z(e){var t,n;return a[e]||(t=u.createElement(e),u.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),n=="none"&&(n="block"),a[e]=n),a[e]}function W(e){return"children"in e?s.call(e.children):n.map(e.childNodes,function(e){if(e.nodeType==1)return e})}function X(n,r,i){for(t in r)i&&(B(r[t])||O(r[t]))?(B(r[t])&&!B(n[t])&&(n[t]={}),O(r[t])&&!O(n[t])&&(n[t]=[]),X(n[t],r[t],i)):r[t]!==e&&(n[t]=r[t])}function V(e,t){return t==null?n(e):n(e).filter(t)}function $(e,t,n,r){return _(t)?t.call(e,n,r):t}function J(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function K(t,n){var r=t.className,i=r&&r.baseVal!==e;if(n===e)return i?r.baseVal:r;i?r.baseVal=n:t.className=n}function Q(e){var t;try{return e?e=="true"||(e=="false"?!1:e=="null"?null:!/^0/.test(e)&&!isNaN(t=Number(e))?t:/^[\[\{]/.test(e)?n.parseJSON(e):e):e}catch(r){return e}}function G(e,t){t(e);for(var n in e.childNodes)G(e.childNodes[n],t)}var e,t,n,r,i=[],s=i.slice,o=i.filter,u=window.document,a={},f={},l={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},c=/^\s*<(\w+|!)[^>]*>/,h=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,d=/^(?:body|html)$/i,v=/([A-Z])/g,m=["val","css","html","text","data","width","height","offset"],g=["after","prepend","before","append"],y=u.createElement("table"),b=u.createElement("tr"),w={tr:u.createElement("tbody"),tbody:y,thead:y,tfoot:y,td:b,th:b,"*":u.createElement("div")},E=/complete|loaded|interactive/,S=/^[\w-]*$/,x={},T=x.toString,N={},C,k,L=u.createElement("div"),A={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},O=Array.isArray||function(e){return e instanceof Array};return N.matches=function(e,t){if(!t||!e||e.nodeType!==1)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,s=!i;return s&&(i=L).appendChild(e),r=~N.qsa(i,t).indexOf(e),s&&L.removeChild(e),r},C=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},k=function(e){return o.call(e,function(t,n){return e.indexOf(t)==n})},N.fragment=function(t,r,i){var o,a,f;return h.test(t)&&(o=n(u.createElement(RegExp.$1))),o||(t.replace&&(t=t.replace(p,"<$1></$2>")),r===e&&(r=c.test(t)&&RegExp.$1),r in w||(r="*"),f=w[r],f.innerHTML=""+t,o=n.each(s.call(f.childNodes),function(){f.removeChild(this)})),B(i)&&(a=n(o),n.each(i,function(e,t){m.indexOf(e)>-1?a[e](t):a.attr(e,t)})),o},N.Z=function(e,t){return e=e||[],e.__proto__=n.fn,e.selector=t||"",e},N.isZ=function(e){return e instanceof N.Z},N.init=function(t,r){var i;if(!t)return N.Z();if(typeof t=="string"){t=t.trim();if(t[0]=="<"&&c.test(t))i=N.fragment(t,RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=N.qsa(u,t)}}else{if(_(t))return n(u).ready(t);if(N.isZ(t))return t;if(O(t))i=F(t);else if(H(t))i=[t],t=null;else if(c.test(t))i=N.fragment(t.trim(),RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=N.qsa(u,t)}}return N.Z(i,t)},n=function(e,t){return N.init(e,t)},n.extend=function(e){var t,n=s.call(arguments,1);return typeof e=="boolean"&&(t=e,e=n.shift()),n.forEach(function(n){X(e,n,t)}),e},N.qsa=function(e,t){var n,r=t[0]=="#",i=!r&&t[0]==".",o=r||i?t.slice(1):t,u=S.test(o);return P(e)&&u&&r?(n=e.getElementById(o))?[n]:[]:e.nodeType!==1&&e.nodeType!==9?[]:s.call(u&&!r?i?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},n.contains=function(e,t){return e!==t&&e.contains(t)},n.type=M,n.isFunction=_,n.isWindow=D,n.isArray=O,n.isPlainObject=B,n.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},n.inArray=function(e,t,n){return i.indexOf.call(t,e,n)},n.camelCase=C,n.trim=function(e){return e==null?"":String.prototype.trim.call(e)},n.uuid=0,n.support={},n.expr={},n.map=function(e,t){var n,r=[],i,s;if(j(e))for(i=0;i<e.length;i++)n=t(e[i],i),n!=null&&r.push(n);else for(s in e)n=t(e[s],s),n!=null&&r.push(n);return I(r)},n.each=function(e,t){var n,r;if(j(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e},n.grep=function(e,t){return o.call(e,t)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){x["[object "+t+"]"]=t.toLowerCase()}),n.fn={forEach:i.forEach,reduce:i.reduce,push:i.push,sort:i.sort,indexOf:i.indexOf,concat:i.concat,map:function(e){return n(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return n(s.apply(this,arguments))},ready:function(e){return E.test(u.readyState)&&u.body?e(n):u.addEventListener("DOMContentLoaded",function(){e(n)},!1),this},get:function(t){return t===e?s.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(e){return i.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return _(e)?this.not(this.not(e)):n(o.call(this,function(t){return N.matches(t,e)}))},add:function(e,t){return n(k(this.concat(n(e,t))))},is:function(e){return this.length>0&&N.matches(this[0],e)},not:function(t){var r=[];if(_(t)&&t.call!==e)this.each(function(e){t.call(this,e)||r.push(this)});else{var i=typeof t=="string"?this.filter(t):j(t)&&_(t.item)?s.call(t):n(t);this.forEach(function(e){i.indexOf(e)<0&&r.push(e)})}return n(r)},has:function(e){return this.filter(function(){return H(e)?n.contains(this,e):n(this).find(e).size()})},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!H(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!H(e)?e:n(e)},find:function(e){var t,r=this;return typeof e=="object"?t=n(e).filter(function(){var e=this;return i.some.call(r,function(t){return n.contains(t,e)})}):this.length==1?t=n(N.qsa(this[0],e)):t=this.map(function(){return N.qsa(this,e)}),t},closest:function(e,t){var r=this[0],i=!1;typeof e=="object"&&(i=n(e));while(r&&!(i?i.indexOf(r)>=0:N.matches(r,e)))r=r!==t&&!P(r)&&r.parentNode;return n(r)},parents:function(e){var t=[],r=this;while(r.length>0)r=n.map(r,function(e){if((e=e.parentNode)&&!P(e)&&t.indexOf(e)<0)return t.push(e),e});return V(t,e)},parent:function(e){return V(k(this.pluck("parentNode")),e)},children:function(e){return V(this.map(function(){return W(this)}),e)},contents:function(){return this.map(function(){return s.call(this.childNodes)})},siblings:function(e){return V(this.map(function(e,t){return o.call(W(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return n.map(this,function(t){return t[e]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=z(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=_(e);if(this[0]&&!t)var r=n(e).get(0),i=r.parentNode||this.length>1;return this.each(function(s){n(this).wrapAll(t?e.call(this,s):i?r.cloneNode(!0):r)})},wrapAll:function(e){if(this[0]){n(this[0]).before(e=n(e));var t;while((t=e.children()).length)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=_(e);return this.each(function(r){var i=n(this),s=i.contents(),o=t?e.call(this,r):e;s.length?s.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var r=n(this);(t===e?r.css("display")=="none":t)?r.show():r.hide()})},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return arguments.length===0?this.length>0?this[0].innerHTML:null:this.each(function(t){var r=this.innerHTML;n(this).empty().append($(this,e,t,r))})},text:function(t){return arguments.length===0?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t===e?"":""+t})},attr:function(n,r){var i;return typeof n=="string"&&r===e?this.length==0||this[0].nodeType!==1?e:n=="value"&&this[0].nodeName=="INPUT"?this.val():!(i=this[0].getAttribute(n))&&n in this[0]?this[0][n]:i:this.each(function(e){if(this.nodeType!==1)return;if(H(n))for(t in n)J(this,t,n[t]);else J(this,n,$(this,r,e,this.getAttribute(n)))})},removeAttr:function(e){return this.each(function(){this.nodeType===1&&J(this,e)})},prop:function(t,n){return t=A[t]||t,n===e?this[0]&&this[0][t]:this.each(function(e){this[t]=$(this,n,e,this[t])})},data:function(t,n){var r=this.attr("data-"+t.replace(v,"-$1").toLowerCase(),n);return r!==null?Q(r):e},val:function(e){return arguments.length===0?this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(t){this.value=$(this,e,t,this.value)})},offset:function(e){if(e)return this.each(function(t){var r=n(this),i=$(this,e,t,r.offset()),s=r.offsetParent().offset(),o={top:i.top-s.top,left:i.left-s.left};r.css("position")=="static"&&(o.position="relative"),r.css(o)});if(this.length==0)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,r){if(arguments.length<2){var i=this[0],s=getComputedStyle(i,"");if(!i)return;if(typeof e=="string")return i.style[C(e)]||s.getPropertyValue(e);if(O(e)){var o={};return n.each(O(e)?e:[e],function(e,t){o[t]=i.style[C(t)]||s.getPropertyValue(t)}),o}}var u="";if(M(e)=="string")!r&&r!==0?this.each(function(){this.style.removeProperty(q(e))}):u=q(e)+":"+U(e,r);else for(t in e)!e[t]&&e[t]!==0?this.each(function(){this.style.removeProperty(q(t))}):u+=q(t)+":"+U(t,e[t])+";";return this.each(function(){this.style.cssText+=";"+u})},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?i.some.call(this,function(e){return this.test(K(e))},R(e)):!1},addClass:function(e){return e?this.each(function(t){r=[];var i=K(this),s=$(this,e,t,i);s.split(/\s+/g).forEach(function(e){n(this).hasClass(e)||r.push(e)},this),r.length&&K(this,i+(i?" ":"")+r.join(" "))}):this},removeClass:function(t){return this.each(function(n){if(t===e)return K(this,"");r=K(this),$(this,t,n,r).split(/\s+/g).forEach(function(e){r=r.replace(R(e)," ")}),K(this,r.trim())})},toggleClass:function(t,r){return t?this.each(function(i){var s=n(this),o=$(this,t,i,K(this));o.split(/\s+/g).forEach(function(t){(r===e?!s.hasClass(t):r)?s.addClass(t):s.removeClass(t)})}):this},scrollTop:function(t){if(!this.length)return;var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})},scrollLeft:function(t){if(!this.length)return;var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})},position:function(){if(!this.length)return;var e=this[0],t=this.offsetParent(),r=this.offset(),i=d.test(t[0].nodeName)?{top:0,left:0}:t.offset();return r.top-=parseFloat(n(e).css("margin-top"))||0,r.left-=parseFloat(n(e).css("margin-left"))||0,i.top+=parseFloat(n(t[0]).css("border-top-width"))||0,i.left+=parseFloat(n(t[0]).css("border-left-width"))||0,{top:r.top-i.top,left:r.left-i.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||u.body;while(e&&!d.test(e.nodeName)&&n(e).css("position")=="static")e=e.offsetParent;return e})}},n.fn.detach=n.fn.remove,["width","height"].forEach(function(t){var r=t.replace(/./,function(e){return e[0].toUpperCase()});n.fn[t]=function(i){var s,o=this[0];return i===e?D(o)?o["inner"+r]:P(o)?o.documentElement["scroll"+r]:(s=this.offset())&&s[t]:this.each(function(e){o=n(this),o.css(t,$(this,i,e,o[t]()))})}}),g.forEach(function(e,t){var r=t%2;n.fn[e]=function(){var e,i=n.map(arguments,function(t){return e=M(t),e=="object"||e=="array"||t==null?t:N.fragment(t)}),s,o=this.length>1;return i.length<1?this:this.each(function(e,u){s=r?u:u.parentNode,u=t==0?u.nextSibling:t==1?u.firstChild:t==2?u:null,i.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!s)return n(e).remove();G(s.insertBefore(e,u),function(e){e.nodeName!=null&&e.nodeName.toUpperCase()==="SCRIPT"&&(!e.type||e.type==="text/javascript")&&!e.src&&window.eval.call(window,e.innerHTML)})})})},n.fn[r?e+"To":"insert"+(t?"Before":"After")]=function(t){return n(t)[e](this),this}}),N.Z.prototype=n.fn,N.uniq=k,N.deserializeValue=Q,n.zepto=N,n}();return window.Zepto=Zepto,window.$===undefined&&(window.$=Zepto),function(e){function c(e){return e._zid||(e._zid=t++)}function h(e,t,n,r){t=p(t);if(t.ns)var i=d(t.ns);return(o[c(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!n||c(e.fn)===c(n))&&(!r||e.sel==r)})}function p(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function d(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function v(e,t){return e.del&&!a&&e.e in f||!!t}function m(e){return l[e]||a&&f[e]||e}function g(t,r,i,s,u,a,f){var h=c(t),d=o[h]||(o[h]=[]);r.split(/\s/).forEach(function(r){if(r=="ready")return e(document).ready(i);var o=p(r);o.fn=i,o.sel=u,o.e in l&&(i=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return o.fn.apply(this,arguments)}),o.del=a;var c=a||i;o.proxy=function(e){e=x(e);if(e.isImmediatePropagationStopped())return;e.data=s;var r=c.apply(t,e._args==n?[e]:[e].concat(e._args));return r===!1&&(e.preventDefault(),e.stopPropagation()),r},o.i=d.length,d.push(o),"addEventListener"in t&&t.addEventListener(m(o.e),o.proxy,v(o,f))})}function y(e,t,n,r,i){var s=c(e);(t||"").split(/\s/).forEach(function(t){h(e,t,n,r).forEach(function(t){delete o[s][t.i],"removeEventListener"in e&&e.removeEventListener(m(t.e),t.proxy,v(t,i))})})}function x(t,r){if(r||!t.isDefaultPrevented){r||(r=t),e.each(S,function(e,n){var i=r[e];t[e]=function(){return this[n]=b,i&&i.apply(r,arguments)},t[n]=w});if(r.defaultPrevented!==n?r.defaultPrevented:"returnValue"in r?r.returnValue===!1:r.getPreventDefault&&r.getPreventDefault())t.isDefaultPrevented=b}return t}function T(e){var t,r={originalEvent:e};for(t in e)!E.test(t)&&e[t]!==n&&(r[t]=e[t]);return x(r,e)}var t=1,n,r=Array.prototype.slice,i=e.isFunction,s=function(e){return typeof e=="string"},o={},u={},a="onfocusin"in window,f={focus:"focusin",blur:"focusout"},l={mouseenter:"mouseover",mouseleave:"mouseout"};u.click=u.mousedown=u.mouseup=u.mousemove="MouseEvents",e.event={add:g,remove:y},e.proxy=function(t,n){if(i(t)){var r=function(){return t.apply(n,arguments)};return r._zid=c(t),r}if(s(n))return e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var b=function(){return!0},w=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$)/,S={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,o,u,a,f){var l,c,h=this;if(t&&!s(t))return e.each(t,function(e,t){h.on(e,o,u,t,f)}),h;!s(o)&&!i(a)&&a!==!1&&(a=u,u=o,o=n);if(i(u)||u===!1)a=u,u=n;return a===!1&&(a=w),h.each(function(n,i){f&&(l=function(e){return y(i,e.type,a),a.apply(this,arguments)}),o&&(c=function(t){var n,s=e(t.target).closest(o,i).get(0);if(s&&s!==i)return n=e.extend(T(t),{currentTarget:s,liveFired:i}),(l||a).apply(s,[n].concat(r.call(arguments,1)))}),g(i,t,a,u,o,c||l)})},e.fn.off=function(t,r,o){var u=this;return t&&!s(t)?(e.each(t,function(e,t){u.off(e,r,t)}),u):(!s(r)&&!i(o)&&o!==!1&&(o=r,r=n),o===!1&&(o=w),u.each(function(){y(this,t,o,r)}))},e.fn.trigger=function(t,n){return t=s(t)||e.isPlainObject(t)?e.Event(t):x(t),t._args=n,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,n){var r,i;return this.each(function(o,u){r=T(s(t)?e.Event(t):t),r._args=n,r.target=u,e.each(h(u,t.type||t),function(e,t){i=t.proxy(r);if(r.isImmediatePropagationStopped())return!1})}),i},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),e.Event=function(e,t){s(e)||(t=e,e=t.type);var n=document.createEvent(u[e]||"Events"),r=!0;if(t)for(var i in t)i=="bubbles"?r=!!t[i]:n[i]=t[i];return n.initEvent(e,r,!0),x(n)}}(Zepto),function($){function triggerAndReturn(e,t,n){var r=$.Event(t);return $(e).trigger(r,n),!r.isDefaultPrevented()}function triggerGlobal(e,t,n,r){if(e.global)return triggerAndReturn(t||document,n,r)}function ajaxStart(e){e.global&&$.active++===0&&triggerGlobal(e,null,"ajaxStart")}function ajaxStop(e){e.global&&!--$.active&&triggerGlobal(e,null,"ajaxStop")}function ajaxBeforeSend(e,t){var n=t.context;if(t.beforeSend.call(n,e,t)===!1||triggerGlobal(t,n,"ajaxBeforeSend",[e,t])===!1)return!1;triggerGlobal(t,n,"ajaxSend",[e,t])}function ajaxSuccess(e,t,n,r){var i=n.context,s="success";n.success.call(i,e,s,t),r&&r.resolveWith(i,[e,s,t]),triggerGlobal(n,i,"ajaxSuccess",[t,n,e]),ajaxComplete(s,t,n)}function ajaxError(e,t,n,r,i){var s=r.context;r.error.call(s,n,t,e),i&&i.rejectWith(s,[n,t,e]),triggerGlobal(r,s,"ajaxError",[n,r,e||t]),ajaxComplete(t,n,r)}function ajaxComplete(e,t,n){var r=n.context;n.complete.call(r,t,e),triggerGlobal(n,r,"ajaxComplete",[t,n]),ajaxStop(n)}function empty(){}function mimeToDataType(e){return e&&(e=e.split(";",2)[0]),e&&(e==htmlType?"html":e==jsonType?"json":scriptTypeRE.test(e)?"script":xmlTypeRE.test(e)&&"xml")||"text"}function appendQuery(e,t){return t==""?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function serializeData(e){e.processData&&e.data&&$.type(e.data)!="string"&&(e.data=$.param(e.data,e.traditional)),e.data&&(!e.type||e.type.toUpperCase()=="GET")&&(e.url=appendQuery(e.url,e.data),e.data=undefined)}function parseArguments(e,t,n,r){return $.isFunction(t)&&(r=n,n=t,t=undefined),$.isFunction(n)||(r=n,n=undefined),{url:e,data:t,success:n,dataType:r}}function serialize(e,t,n,r){var i,s=$.isArray(t),o=$.isPlainObject(t);$.each(t,function(t,u){i=$.type(u),r&&(t=n?r:r+"["+(o||i=="object"||i=="array"?t:"")+"]"),!r&&s?e.add(u.name,u.value):i=="array"||!n&&i=="object"?serialize(e,u,n,t):e.add(t,u)})}var jsonpID=0,document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;$.active=0,$.ajaxJSONP=function(e,t){if("type"in e){var n=e.jsonpCallback,r=($.isFunction(n)?n():n)||"jsonp"+ ++jsonpID,i=document.createElement("script"),s=window[r],o,u=function(e){$(i).triggerHandler("error",e||"abort")},a={abort:u},f;return t&&t.promise(a),$(i).on("load error",function(n,u){clearTimeout(f),$(i).off().remove(),n.type=="error"||!o?ajaxError(null,u||"error",a,e,t):ajaxSuccess(o[0],a,e,t),window[r]=s,o&&$.isFunction(s)&&s(o[0]),s=o=undefined}),ajaxBeforeSend(a,e)===!1?(u("abort"),a):(window[r]=function(){o=arguments},i.src=e.url.replace(/\?(.+)=\?/,"?$1="+r),document.head.appendChild(i),e.timeout>0&&(f=setTimeout(function(){u("timeout")},e.timeout)),a)}return $.ajax(e)},$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},$.ajax=function(options){var settings=$.extend({},options||{}),deferred=$.Deferred&&$.Deferred();for(key in $.ajaxSettings)settings[key]===undefined&&(settings[key]=$.ajaxSettings[key]);ajaxStart(settings),settings.crossDomain||(settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host),settings.url||(settings.url=window.location.toString()),serializeData(settings),settings.cache===!1&&(settings.url=appendQuery(settings.url,"_="+Date.now()));var dataType=settings.dataType,hasPlaceholder=/\?.+=\?/.test(settings.url);if(dataType=="jsonp"||hasPlaceholder)return hasPlaceholder||(settings.url=appendQuery(settings.url,settings.jsonp?settings.jsonp+"=?":settings.jsonp===!1?"":"callback=?")),$.ajaxJSONP(settings,deferred);var mime=settings.accepts[dataType],headers={},setHeader=function(e,t){headers[e.toLowerCase()]=[e,t]},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr(),nativeSetHeader=xhr.setRequestHeader,abortTimeout;deferred&&deferred.promise(xhr),settings.crossDomain||setHeader("X-Requested-With","XMLHttpRequest"),setHeader("Accept",mime||"*/*");if(mime=settings.mimeType||mime)mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),xhr.overrideMimeType&&xhr.overrideMimeType(mime);(settings.contentType||settings.contentType!==!1&&settings.data&&settings.type.toUpperCase()!="GET")&&setHeader("Content-Type",settings.contentType||"application/x-www-form-urlencoded");if(settings.headers)for(name in settings.headers)setHeader(name,settings.headers[name]);xhr.setRequestHeader=setHeader,xhr.onreadystatechange=function(){if(xhr.readyState==4){xhr.onreadystatechange=empty,clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||xhr.status==304||xhr.status==0&&protocol=="file:"){dataType=dataType||mimeToDataType(settings.mimeType||xhr.getResponseHeader("content-type")),result=xhr.responseText;try{dataType=="script"?(1,eval)(result):dataType=="xml"?result=xhr.responseXML:dataType=="json"&&(result=blankRE.test(result)?null:$.parseJSON(result))}catch(e){error=e}error?ajaxError(error,"parsererror",xhr,settings,deferred):ajaxSuccess(result,xhr,settings,deferred)}else ajaxError(xhr.statusText||null,xhr.status?"error":"abort",xhr,settings,deferred)}};if(ajaxBeforeSend(xhr,settings)===!1)return xhr.abort(),ajaxError(null,"abort",xhr,settings,deferred),xhr;if(settings.xhrFields)for(name in settings.xhrFields)xhr[name]=settings.xhrFields[name];var async="async"in settings?settings.async:!0;xhr.open(settings.type,settings.url,async,settings.username,settings.password);for(name in headers)nativeSetHeader.apply(xhr,headers[name]);return settings.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty,xhr.abort(),ajaxError(null,"timeout",xhr,settings,deferred)},settings.timeout)),xhr.send(settings.data?settings.data:null),xhr},$.get=function(){return $.ajax(parseArguments.apply(null,arguments))},$.post=function(){var e=parseArguments.apply(null,arguments);return e.type="POST",$.ajax(e)},$.getJSON=function(){var e=parseArguments.apply(null,arguments);return e.dataType="json",$.ajax(e)},$.fn.load=function(e,t,n){if(!this.length)return this;var r=this,i=e.split(/\s/),s,o=parseArguments(e,t,n),u=o.success;return i.length>1&&(o.url=i[0],s=i[1]),o.success=function(e){r.html(s?$("<div>").html(e.replace(rscript,"")).find(s):e),u&&u.apply(r,arguments)},$.ajax(o),this};var escape=encodeURIComponent;$.param=function(e,t){var n=[];return n.add=function(e,t){this.push(escape(e)+"="+escape(t))},serialize(n,e,t),n.join("&").replace(/%20/g,"+")}}(Zepto),function(e){e.fn.serializeArray=function(){var t=[],n;return e([].slice.call(this.get(0).elements)).each(function(){n=e(this);var r=n.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&r!="submit"&&r!="reset"&&r!="button"&&(r!="radio"&&r!="checkbox"||this.checked)&&t.push({name:n.attr("name"),value:n.val()})}),t},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(t,n){return t=t||[],e.extend(t,e.fn),t.selector=n||"",t.__Z=!0,t},isZ:function(t){return e.type(t)==="array"&&"__Z"in t}});try{getComputedStyle(undefined)}catch(t){var n=getComputedStyle;window.getComputedStyle=function(e){try{return n(e)}catch(t){return null}}}}(Zepto),function(e){function t(e){var t=this.os={},n=this.browser={},r=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=e.match(/(Android);?[\s\/]+([\d.]+)?/),s=!!e.match(/\(Macintosh\; Intel /),o=e.match(/(iPad).*OS\s([\d_]+)/),u=e.match(/(iPod)(.*OS\s([\d_]+))?/),a=!o&&e.match(/(iPhone\sOS)\s([\d_]+)/),f=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),l=f&&e.match(/TouchPad/),c=e.match(/Kindle\/([\d.]+)/),h=e.match(/Silk\/([\d._]+)/),p=e.match(/(BlackBerry).*Version\/([\d.]+)/),d=e.match(/(BB10).*Version\/([\d.]+)/),v=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),m=e.match(/PlayBook/),g=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),y=e.match(/Firefox\/([\d.]+)/),b=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),w=!g&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),E=w||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);if(n.webkit=!!r)n.version=r[1];i&&(t.android=!0,t.version=i[2]),a&&!u&&(t.ios=t.iphone=!0,t.version=a[2].replace(/_/g,".")),o&&(t.ios=t.ipad=!0,t.version=o[2].replace(/_/g,".")),u&&(t.ios=t.ipod=!0,t.version=u[3]?u[3].replace(/_/g,"."):null),f&&(t.webos=!0,t.version=f[2]),l&&(t.touchpad=!0),p&&(t.blackberry=!0,t.version=p[2]),d&&(t.bb10=!0,t.version=d[2]),v&&(t.rimtabletos=!0,t.version=v[2]),m&&(n.playbook=!0),c&&(t.kindle=!0,t.version=c[1]),h&&(n.silk=!0,n.version=h[1]),!h&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0),g&&(n.chrome=!0,n.version=g[1]),y&&(n.firefox=!0,n.version=y[1]),b&&(n.ie=!0,n.version=b[1]),E&&(s||t.ios)&&(n.safari=!0,s&&(n.version=E[1])),w&&(n.webview=!0),t.tablet=!!(o||m||i&&!e.match(/Mobile/)||y&&e.match(/Tablet/)||b&&!e.match(/Phone/)&&e.match(/Touch/)),t.phone=!!(!t.tablet&&!t.ipod&&(i||a||f||p||d||g&&e.match(/Android/)||g&&e.match(/CriOS\/([\d.]+)/)||y&&e.match(/Mobile/)||b&&e.match(/Touch/)))}t.call(e,navigator.userAgent),e.__detect=t}(Zepto),define("zepto",function(e){return function(){var t,n;return t||e.$}}(this)),function(e,t){var n="",r="?",i="function",s="undefined",o="object",u="major",a="model",f="name",l="type",c="vendor",h="version",p="architecture",d="console",v="mobile",m="tablet",g={has:function(e,t){return t.toLowerCase().indexOf(e.toLowerCase())!==-1},lowerize:function(e){return e.toLowerCase()}},y={rgx:function(){for(var e,n=0,r,u,a,f,l,c,h=arguments;n<h.length;n+=2){var p=h[n],d=h[n+1];if(typeof e===s){e={};for(a in d)f=d[a],typeof f===o?e[f[0]]=t:e[f]=t}for(r=u=0;r<p.length;r++){l=p[r].exec(this.getUA());if(!!l){for(a=0;a<d.length;a++)c=l[++u],f=d[a],typeof f===o&&f.length>0?f.length==2?typeof f[1]==i?e[f[0]]=f[1].call(this,c):e[f[0]]=f[1]:f.length==3?typeof f[1]===i&&(!f[1].exec||!f[1].test)?e[f[0]]=c?f[1].call(this,c,f[2]):t:e[f[0]]=c?c.replace(f[1],f[2]):t:f.length==4&&(e[f[0]]=c?f[3].call(this,c.replace(f[1],f[2])):t):e[f]=c?c:t;break}}if(!!l)break}return e},str:function(e,n){for(var i in n)if(typeof n[i]===o&&n[i].length>0){for(var s=0;s<n[i].length;s++)if(g.has(n[i][s],e))return i===r?t:i}else if(g.has(n[i],e))return i===r?t:i;return e}},b={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}},w={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[f,h,u],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[f,"Opera"],h,u],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[f,h,u],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[f,"IE"],h,u],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[f,"Yandex"],h,u],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[f,/_/g," "],h,u],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i],[f,h,u],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[f,"Dolphin"],h,u],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[f,"Chrome"],h,u],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[h,u,[f,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[h,u,f],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[f,[u,y.str,b.browser.oldsafari.major],[h,y.str,b.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[f,h,u],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[f,"Netscape"],h,u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[f,h,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[p,/ower/,"",g.lowerize]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/(ia64(?=;)|68k(?=\))|arm(?=v\d+;)|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[p,g.lowerize]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[a,c,[l,m]],[/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[c,a,[l,m]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,c,[l,v]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[c,a,[l,v]],[/\((bb10);\s(\w+)/i],[[c,"BlackBerry"],a,[l,v]],[/android.+((transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+))/i],[[c,"Asus"],a,[l,m]],[/(sony)\s(tablet\s[ps])/i],[c,a,[l,m]],[/(nintendo)\s([wids3u]+)/i],[c,a,[l,d]],[/((playstation)\s[3portablevi]+)/i],[[c,"Sony"],a,[l,d]],[/(sprint\s(\w+))/i],[[c,y.str,b.device.sprint.vendor],[a,y.str,b.device.sprint.model],[l,v]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[c,[a,/_/g," "],[l,v]],[/\s((milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?))[\w\s]+build\//i,/(mot)[\s-]?(\w+)*/i],[[c,"Motorola"],a,[l,v]],[/android.+\s((mz60\d|xoom[\s2]{0,2}))\sbuild\//i],[[c,"Motorola"],a,[l,m]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9))/i],[[c,"Samsung"],a,[l,m]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[c,"Samsung"],a,[l,v]],[/(sie)-(\w+)*/i],[[c,"Siemens"],a,[l,v]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[c,"Nokia"],a,[l,v]],[/android\s3\.[\s\w-;]{10}((a\d{3}))/i],[[c,"Acer"],a,[l,m]],[/android\s3\.[\s\w-;]{10}(lg?)-([06cv9]{3,4})/i],[[c,"LG"],a,[l,m]],[/((nexus\s4))/i,/((nexus\s5))/i,/(lg)[e;\s-\/]+(\w+)*/i],[[c,"LG"],a,[l,v]],[/(mobile|tablet);.+rv\:.+gecko\//i],[l,c,a]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[f,h],[/rv\:([\w\.]+).*(gecko)/i],[h,f]],os:[[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[f,[h,y.str,b.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[f,"Windows"],[h,y.str,b.os.windows.version]],[/\((bb)(10);/i],[[f,"BlackBerry"],h],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)\/([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],[f,h],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[f,"Symbian"],h],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[f,"Firefox OS"],h],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[f,h],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[f,"Chromium OS"],h],[/(sunos)\s?([\w\.]+\d)*/i],[[f,"Solaris"],h],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[f,h],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[f,"iOS"],[h,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i],[f,[h,/_/g,"."]],[/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i,/(unix)\s?([\w\.]+)*/i],[f,h]]},E=function(t){var r=t||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:n);if(!(this instanceof E))return(new E(t)).getResult();this.getBrowser=function(){return y.rgx.apply(this,w.browser)},this.getCPU=function(){return y.rgx.apply(this,w.cpu)},this.getDevice=function(){return y.rgx.apply(this,w.device)},this.getEngine=function(){return y.rgx.apply(this,w.engine)},this.getOS=function(){return y.rgx.apply(this,w.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this.setUA(r)};if(typeof exports!==s)typeof module!==s&&module.exports&&(exports=module.exports=E),exports.UAParser=E;else{e.UAParser=E,typeof define===i&&define.amd&&define("UAParser",[],function(){return E});if(typeof e.jQuery!==s){var S=e.jQuery,x=new E;S.ua=x.getResult(),S.ua.get=function(){return x.getUA()},S.ua.set=function(e){x.setUA(e);var t=x.getResult();for(var n in t)S.ua[n]=t[n]}}}}(this),define("core/globals",["core/dbregistry","lodash","d3","Modernizr","spin","zepto","UAParser"],function(e){var t={globals:{media:"md",dbRegistry:e}};window.rf=t}),define("wrapperhelpers/standalonebuilder",["core/dashboard","helpers/standalonedashboard","components/kpicomponent","components/tablecomponent","components/chartcomponent","components/filtercomponent","core/globals","lodash","zepto","d3","Modernizr","spin"],function(e,t,n,r,i,s,o){var u=function(){var e=this;e.buildDashboardFromObject=function(e){t(function(t){var n=e.components;for(var r in n)n.hasOwnProperty(r)&&o(t,n[r],r)})};var o=function(e,t,o){var u=null;switch(t.type){case"KPIComponent":u=new n;break;case"TableComponent":u=new r;break;case"ChartComponent":u=new i;break;case"FilterComponent":u=new s;break;default:throw"Cannot build for type "+t.type}u.pro.buildFromObject(t),u.setID(o),e.addComponent(u)}};return u}),define("wrapperhelpers/wrappermain",["wrapperhelpers/standalonebuilder"],function(e){var t=function(){window.rf.StandaloneBuilder=e};return t(),window.rf}),require(["wrapperhelpers/wrappermain"]),require("wrapperhelpers/wrappermain")});